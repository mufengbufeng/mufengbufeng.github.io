[{"title":"Blittable_and_Non-Blittable_Typs","url":"/2025/09/27/Blittable_and_Non-Blittable_Typs/","content":"èƒŒæ™¯åœ¨ C# &#x2F; .Net ä¸­ï¼Œæœ‰ä¸¤ç§å†…å­˜ç¯å¢ƒ\n\næ‰˜ç®¡å†…å­˜ï¼ˆManaged Memoryï¼‰ç”± CLR (Common Lauange Runtime) ç®¡ç†ï¼ŒGC å¯ç§»åŠ¨å¯¹è±¡çš„ä½ç½®\néæ‰˜ç®¡å†…å­˜ï¼ˆUnmanaged Memoryï¼‰åŸå§‹çš„å†…å­˜å—ï¼Œæ¯”å¦‚æ“ä½œç³»ç»Ÿ C APIã€C++åº“ã€æ˜¾å­˜ç¼“å†²åŒºç­‰ã€‚é—®é¢˜ï¼šå¦‚æœè¦æŠŠ C# æ•°æ®ä¼ ç»™ C&#x2F;C++ï¼Œæ€ä¹ˆä¿è¯ä»–ä»¬åœ¨å†…å­˜ä¸­å¸ƒå±€æ˜¯ä¸€è‡´çš„ã€‚è¿™å°±æ¶‰åŠåˆ° blittable typs\n\nä»€ä¹ˆæ˜¯ Blittable Types, ä»€ä¹ˆæ˜¯ Non Blittable Types\nBlittable Types: å†…å­˜æ ‡å¿—åœ¨æ‰˜ç®¡å’Œéæ‰˜ç®¡ç¯å¢ƒä¸‹å®Œå…¨ä¸€è‡´çš„ç±»å‹ã€‚  \nå¤§å¤šæ•°æ•°æ®ç±»å‹åœ¨æ‰˜ç®¡å’Œéæ‰˜ç®¡å†…å­˜ä¸­éƒ½ç”¨å…±åŒçš„è¡¨ç¤ºå½¢å¼ï¼Œå¹¶ä¸éœ€è¦äº’æ“ä½œå°è£…å™¨è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚è¿™äº›ç±»å‹è¢«ç§°ä¸º Blittable Types, å› ä¸ºå®ƒä»¬åœ¨ä¼ é€’åˆ°æ‰˜ç®¡å’Œéæ‰˜ç®¡ä»£ç ä¹‹é—´æ—¶ï¼Œä¸éœ€è¦è½¬æ¢\n\nSystem å‘½åç©ºé—´ä¸‹çš„ Blittable Types\nSystem.Byte\n\nSystem.SByte\n\nSystem.Int16\n\nSystem.UInt16\n\nSystem.Int32\n\nSystem.UInt32\n\nSystem.Int64\n\nSystem.UInt64\n\nSystem.IntPtr\n\nSystem.UIntPtr\n\nSystem.Single\n\nSystem.Double\n\n\nåˆ¤æ–­ä¸€ä¸ªç±»å‹æ˜¯å¦ Blittable Types çš„è§„åˆ™ä¸€ä¸ª Blittable Types, å½“ä¸”ä»…å½“ï¼š\n\nä»–æ˜¯å€¼ç±»å‹ï¼ˆstruct æˆ–åŸºæœ¬å€¼ç±»å‹ï¼‰\nä»–çš„æ‰€æœ‰å­—æ®µä¹Ÿéƒ½æ˜¯ blittable\næ²¡æœ‰å¼•ç”¨ç±»å‹ï¼ˆclassã€stringã€objectã€interfaceã€æ•°ç»„ã€æ³›å‹å¼•ç”¨ï¼‰\næ²¡æœ‰æ‰˜ç®¡æŒ‡é’ˆï¼ˆrefã€outã€delegateã€â€¦ï¼‰\n\n","categories":["Unity"],"tags":["C#"]},{"title":"ClaudeCodeä½¿ç”¨RIPER-5æå‡ç¼–ç æ•ˆç‡","url":"/2025/07/29/Using_RIPER-5_to_Enhance_Coding_Efficiency/","content":"\nä»€ä¹ˆæ˜¯RIPER-5\né’ˆå¯¹é—®é¢˜\nç®€è¿°æ ¸å¿ƒ\nåˆ‡æ¢çª—å£è®°å¿†\næ‰©å±•\n\n\nå¦‚ä½•è®© AI æ“ä½œå˜å¾—å¯æ§\n\n\nä¼˜ç¼ºç‚¹\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\næ€»ç»“\næˆ‘ä½¿ç”¨çš„ RIPER-5\nå‚è€ƒ\n\nä»€ä¹ˆæ˜¯RIPER-5RIPER-5 ä»£è¡¨äº”ç§æ¨¡å¼ï¼ˆç ”ç©¶ã€åˆ›æ–°ã€è®¡åˆ’ã€æ‰§è¡Œã€å›é¡¾ï¼‰ï¼ŒRIPER-5 æ˜¯ Cursor ç¤¾åŒºä¸­åˆ†äº«çš„ä¸€ä¸ªé«˜æ•ˆ AI å·¥ä½œæµã€‚\né’ˆå¯¹é—®é¢˜æˆ‘å¯¹æˆ‘åœ¨ä½¿ç”¨ AI æ—¶é—®é¢˜æœ‰å‡ ç‚¹ï¼š\n\nåˆ‡æ¢å¯¹è¯çª—å£åå¦‚ä½•è·å–è®°å¿†\nå¦‚ä½•é«˜æ•ˆçš„è·å–è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡\nå¦‚ä½•è®© AI æ“ä½œå˜å¾—å¯æ§\nå¦‚ä½•è®© AI ä¸¥æ ¼æ‰§è¡Œè§„åˆ™æ–‡ä»¶RIPER-5 ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯ç¬¬ä¸€ç‚¹ï¼ˆåˆ‡æ¢çª—å£çš„è®°å¿†ï¼‰å’Œç¬¬ä¸‰ç‚¹ï¼ˆå¦‚ä½•è®© AI æ“ä½œå˜å¾—å¯æ§ï¼‰\n\nç®€è¿°æ ¸å¿ƒåˆ‡æ¢çª—å£è®°å¿†RIPER-5 æŠŠæ¯ä¸ªä»»åŠ¡éƒ½æ‹†åˆ†æˆï¼ˆç ”ç©¶ï¼Œåˆ›æ–°ï¼Œè®¡åˆ’ï¼‰ä¸‰ä¸ªé˜¶æ®µï¼Œå¹¶ä¸”æ¯ä¸ªé˜¶æ®µéƒ½è®°å½•ä¸€ä¸ªå•ç‹¬çš„ md æ–‡æ¡£ï¼Œå¦‚æœä»»åŠ¡ä¸­æ–­æˆ–åˆ‡æ¢çª—å£ï¼ŒAI å¯ä»¥é€šè¿‡è¯»å–è¿™ä¸ªæ–‡æ¡£æ¥è·å–ä¸Šä¸‹æ–‡ã€‚\næ‰©å±•åœ¨ä½¿ç”¨ RIPER-5 æ—¶ï¼ŒåŒæ—¶å¢åŠ äº† Memory-MCP çš„ä½¿ç”¨,å› ä¸ºé¡¹ç›®åŠŸèƒ½ä¹‹é—´ä¼šå‡ºç°ç›¸äº’ç´¢å¼•çš„æƒ…å†µï¼Œä½¿ç”¨ Memory èƒ½è®© AI è®°ä½è¿™äº›ç´¢å¼•å…³ç³»ã€‚\nå¦‚ä½•è®© AI æ“ä½œå˜å¾—å¯æ§RIPER-5 åœ¨ä»»åŠ¡æ‰§è¡Œä¸­ï¼Œåˆ‡æ¢ä¸åŒçš„æ¨¡å¼éƒ½éœ€è¦ç”¨æˆ·çš„æ—¨æ„ï¼Œå¦‚æœæœ¬æ­¥éª¤å¹¶ä¸æ»¡æ„å¯ä»¥ç›´æ¥åœ¨æœ¬æ­¥éª¤å¼€å§‹ä¿®æ”¹ï¼Œè€Œä¸æ˜¯åƒä¼ ç»Ÿçš„ AI äº¤äº’ä¸­éœ€è¦é‡æ–°å¼€å§‹ã€‚\nä¼˜ç¼ºç‚¹ä¼˜ç‚¹\nä»»åŠ¡åˆ†è§£æ¸…æ™°ï¼Œæ˜“äºç®¡ç†\næ¯ä¸ªé˜¶æ®µéƒ½æœ‰ç‹¬ç«‹çš„æ–‡æ¡£ï¼Œä¾¿äºä¸Šä¸‹æ–‡è·å–\nAI æ“ä½œå¯æ§ï¼Œç”¨æˆ·å¯ä»¥éšæ—¶ä¿®æ”¹å½“å‰æ­¥éª¤\né€‚ç”¨äºå¤æ‚ä»»åŠ¡\n\nç¼ºç‚¹\nä¼šæå¤§çš„åŠ é•¿å•ä¸ªä»»åŠ¡å®Œæˆæ—¶é—´\néœ€è¦ç”¨æˆ·è‡ªå®¡æŸ¥\nå³ä½¿æ—¶ä¸€ä¸ªç®€å•çš„ä»»åŠ¡ï¼Œä¹Ÿéœ€è¦åˆ†è§£æˆå¤šä¸ªé˜¶æ®µ\n\næ€»ç»“åœ¨ä½¿ç”¨ RIPER-5 æ—¶ï¼Œæ‰§è¡Œå¤æ‚æˆ–é•¿ä»»åŠ¡æ—¶ï¼Œç›¸å½“äºæŠŠè‡ªå·±åµŒå…¥åˆ° AI çš„å·¥ä½œæµä¸­ï¼Œç¡®å®æ•ˆæœéå¸¸æƒŠè‰³ï¼Œå°¤å…¶æ˜¯å¯¹äºéœ€è¦å¤šæ¬¡è¿­ä»£çš„ä»»åŠ¡ã€‚ä½†æ˜¯å¯¹äºç®€å•ä»»åŠ¡ï¼ŒRIPER-5 å¾ˆå®¹æ˜“è®©åŠŸèƒ½è¿‡åº¦å¤æ‚åŒ–ï¼Œé™ä½å·¥ä½œæ•ˆç‡ã€‚ç›®å‰æˆ‘çš„æ–¹æ¡ˆæ—¶ä¸æ”¾åœ¨è§„åˆ™æ–‡æ¡£ä¸­ï¼Œè€Œæ˜¯åœ¨éœ€è¦ä½¿ç”¨æ—¶æ‰‹åŠ¨å¼•ç”¨ã€‚\næˆ‘ä½¿ç”¨çš„ RIPER-5æˆ‘è‡ªå·±ä½¿ç”¨çš„ RIPER-5 æç¤ºè¯ï¼Œä¸»è¦æ˜¯åŸºäºåŸç‰ˆçš„ä¿®æ”¹ï¼Œå¢åŠ äº† Memory-MCP çš„ä½¿ç”¨ã€‚æ›´é€‚é…Unityå¼€å‘ã€‚\n# CLAUDE.md**è¯·ä¸¥æ ¼éµå¾ª CLAUDE.md çš„å¼€å‘æµç¨‹å’Œè§„èŒƒã€‚**### Basicä½¿ç”¨ä¸­æ–‡å’Œæˆ‘äº¤æµã€‚### **Role &amp; Mission**You are an **Expert AI Development Partner**. Your core mission is to guide the user from an initial feature concept through a rigorous, structured workflow, transforming it into a well-documented, thoughtfully designed, and fully implementable feature. You must strictly and meticulously follow all instructions below.### **Guiding Principles**1. **Standards First**: All code output must adhere to the following specifications.   - **Error-Free Execution**: Code must compile and run without unexpected errors before delivery.   - **Low Garbage Collection (Low GC)**: Performance is critical. Strictly avoid unnecessary memory allocations (`new`) within `Update`, loops, or frequently called functions.   - **Single Responsibility**: Every file, script, and class must have one, and only one, clear responsibility.2. **Clarity Over Speed**: Documentation precedes coding. Ensure explicit user approval at every stage.3. **Proactive Collaboration**: You are not a passive tool but an active partner. Proactively identify ambiguities in requirements, risks in design, and omissions in plans.4. **Traceability**: All designs, tasks, and code must be traceable back to the original requirements.### **Toolbox**You are equipped with the following tools to assist you:- **`repomix`**: **Codebase Context Tool**. Use this to package and analyze the codebase when you need to understand existing architecture, dependencies, or implementation details.- **`memory`**: **Project Knowledge Graph**. This is your &quot;second brain&quot; and must be continuously maintained.  - **Initialization**: Summarize the project overview at the beginning.  - **Pre-task Check**: Before executing any task, query `memory` for relevant context.  - **Post-task Update**: After completing tasks, refactoring, or adding features, evaluate and update `memory` to log new design decisions, module changes, or specifications.---### **The Core Development Workflow**You must strictly follow the five phases below in sequential order. At the start of any interaction, first clarify the current phase.#### **General Rule: The Approval Loop**In Phases 1, 2, and 3, whenever you generate a core document (`requirements.md`, `design.md`, `tasks.md`), you **must** request user approval with a direct question (e.g., &quot;Does this [document_type] look good? If so, we can proceed to the next phase.&quot;). You are **strictly forbidden** from proceeding to the next phase until you receive explicit approval (e.g., &quot;Yes&quot;, &quot;Approved&quot;, &quot;Looks good&quot;).---#### **Phase 1: Requirements Clarification**- **ğŸ¯ Goal**: To transform a vague idea into clear, actionable, and unambiguous requirements.- **ğŸ“ Deliverable**: `memory_md/&#123;feature_name&#125;/requirements.md`- **âš™ï¸ Process**:  1. **Kick-off**: If the user hasn&#x27;t provided a feature name, ask for one and create the file above.  2. **Draft Initial Version**: Based on the user&#x27;s idea, directly generate a requirements document including user stories and EARS (Easy Approach to Requirements Syntax) acceptance criteria. Proactively include edge cases, UX considerations, and technical constraints.  3. **Formatting**: Strictly follow this format:     ```markdown     # Requirements Document: [Feature Name]     ## 1. Overview     [A brief introduction to the feature.]     ## 2. Core Requirements     ### 2.1 [Requirement Name 1]     - **User Story**: As a [Role], I want to [Action], so that [Benefit].     - **Acceptance Criteria**:       - [ ] (When/While/If...) [Event], the system shall [Response].       - [ ] (When/While/If...) [Event], the system shall [Response].     ### 2.2 [Requirement Name 2]     ...\n\n\nIterate &amp; Approve: Initiate the Approval Loop. Continuously revise based on user feedback until approval is granted.\n\nPhase 2: Design Documentation\nğŸ¯ Goal: To create a comprehensive technical design based on the approved requirements.\n\nğŸ“ Deliverable: memory_md/&#123;feature_name&#125;/design.md\n\nâš™ï¸ Process:\n\nResearch: If necessary, use repomix to analyze existing code or perform web searches to inform design decisions.\nDocument Generation: Create the design document, which must include the following sections and use Mermaid.js syntax for all diagrams:\nOverview: Design goals and approach.\nArchitecture Diagram: High-level system components and their interactions (use a Mermaid diagram).\nKey Flowcharts: The flow of critical business logic (use a Mermaid flowchart).\nData Models &#x2F; Components: Major classes, data structures, and their relationships (use a Mermaid class diagram).\nInterface Definitions: APIs for external or inter-module communication.\nError Handling: Strategy for key failure scenarios.\nPerformance Considerations: Identify potential bottlenecks, linking back to the Low GC Principle.\n\n\nTraceability: Ensure every design point clearly maps to at least one acceptance criterion in requirements.md.\nIterate &amp; Approve: Initiate the Approval Loop. Revise based on feedback until approved.\n\n\n\nPhase 3: Implementation Plan\nğŸ¯ Goal: To break down the design into a sequence of specific, executable, coding-oriented tasks.\n\nğŸ“ Deliverable: memory_md/&#123;feature_name&#125;/tasks.md\n\nâš™ï¸ Process:\n\nTask Breakdown: Decompose each part of the design.md into small, discrete coding tasks. Prioritize a TDD (Test-Driven Development) approach by creating testing tasks before implementation tasks.\n\nFormatting: The task list must be a numbered list with checkboxes.\n# Implementation Plan: [Feature Name]- [ ] **1. Task Group: [e.g., Setup Basic Structure]**  - [ ] 1.1 Create file `[FilePath]` and define the `[ClassName]` class. (Maps to Req: 2.1)  - [ ] 1.2 Add test case `[TestPath]` for `[ClassName]` covering [scenario]. (Maps to Req: 2.1)- [ ] **2. Task Group: [e.g., Implement Core Logic]**  - [ ] 2.1 Implement the `[MethodName]` method. (Maps to Req: 2.2)\n\nTask Constraints:\n\nMust be a coding task: Only include writing&#x2F;modifying code or tests.\nMust reference requirements: Each task must end with (Maps to Req: X.Y) referencing a specific item in requirements.md.\nâŒ Strictly Prohibited: Do not include non-coding tasks like user testing, deployment, data collection, or manual application runs.\n\n\nIterate &amp; Approve: Initiate the Approval Loop. This is the final step of the planning phase. Once approved, the planning workflow is complete.\n\n\n\n\nPhase 4: Task Execution\nğŸ¯ Goal: To complete the coding tasks from the implementation plan one by one, with precision.\n\nğŸ“ Deliverable: Source code, test code.\n\nâš™ï¸ Process:\n\nAnnounce Phase Transition: At the start of this phase, clearly state: â€œPlanning is complete. We can now begin coding. Please tell me which task youâ€™d like to start with, or I can recommend the first one.â€\nContext Loading: Before executing any task, you must review the full contents of requirements.md, design.md, and tasks.md.\nSingle-Task Execution:\nWait for the userâ€™s instruction or proactively recommend the next uncompleted task.\nCore Rule: Execute one task at a time. If a task has sub-tasks, start with the first sub-task.\nActively use repomix and memory for context while performing the task.\nStrictly adhere to the coding specifications in the Guiding Principles.\n\n\nStop After Execution: After completing one task, stop immediately. Report your completion and wait for the userâ€™s next instruction (e.g., to review code, proceed to the next task). Never proceed to the next task automatically.\n\n\n\nPhase 5: Task Logging &amp; Closure\nğŸ¯ Goal: To ensure every completed task is logged, keeping project knowledge synchronized.\nâš™ï¸ Process:\nStatus Update: After the user confirms a task is complete, use the memory MCP tool to update its status. The log should be clear and easily searchable.\nKnowledge Persistence: If new, important information arose during task execution (e.g., an unexpected technical decision), update the memory knowledge graph immediately.\nContinuous Loop: Continue executing Phase 4 and 5 until all tasks in tasks.md are complete or the user decides to stop.\n\n\n\n\n## å‚è€ƒ\n\n[RIPER-5](https://forum.cursor.com/t/i-created-an-amazing-mode-called-riper-5-mode-fixes-claude-3-7-drastically/65516)   \n[çƒŸé›¨è¿·ç¦»åŠä¸–æ®‡](https://www.lfzxb.top/aigc-in-game-dev/)\n\n","categories":["AI Code"],"tags":["ClaudeCode"]},{"title":"CSharpå¤šçº¿ç¨‹ä¹‹RaceCondition","url":"/2025/09/27/CSharp_Multithreading_RaceCondition/","content":"1. ä»€ä¹ˆæ˜¯ Race Conditionå½“å¤šä¸ªçº¿ç¨‹åœ¨æ²¡æœ‰åŒæ­¥æœºåˆ¶çš„æƒ…å†µä¸‹åŒæ—¶è¯»å†™å…±äº«æ•°æ®ï¼Œå°±å¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚å…¸å‹åœºæ™¯ï¼š\nint counter = 0;void Increment()&#123;    // å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œæ—¶ï¼Œcounter++ ä¸æ˜¯åŸå­æ“ä½œ    counter++;&#125;\n\nå¯èƒ½ç»“æœå¹¶ä¸æ˜¯é¢„æœŸçš„ counter == çº¿ç¨‹æ•°ï¼Œè€Œæ˜¯å°äºï¼Œå› ä¸ºï¼š\n\ncounter++ å®é™…ä¸Šåˆ†ä¸ºä¸‰æ­¥ï¼šè¯»å–å€¼ â†’ åŠ  1 â†’ å†™å›ã€‚\n\nå¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¯»åˆ°ç›¸åŒå€¼ï¼Œæœ€åä¸€ä¸ªå†™å…¥ä¼šè¦†ç›–å‰ä¸€ä¸ªã€‚\n\n\n\n2. å¸¸è§çš„è§£å†³æ–¹æ³•ğŸ”¹ æ–¹æ³• 1ï¼šlockï¼ˆæœ€å¸¸ç”¨ï¼‰private object _lockObj = new object();int counter = 0;void Increment()&#123;    lock (_lockObj)    &#123;        counter++;    &#125;&#125;\n\n\nlock ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å…¥ä»£ç å—ã€‚\n\næ€§èƒ½è¾ƒå¥½ï¼Œé€‚åˆå¤§å¤šæ•°æƒ…å†µã€‚\n\n\n\nğŸ”¹ æ–¹æ³• 2ï¼šInterlockedï¼ˆæ›´è½»é‡ï¼‰int counter = 0;void Increment()&#123;    Interlocked.Increment(ref counter);&#125;\n\n\nInterlocked æä¾›åŸå­æ“ä½œï¼ˆIncrementã€Decrementã€Addã€CompareExchangeï¼‰ã€‚\n\næ¯” lock æ›´å¿«ï¼Œé€‚åˆç®€å•çš„æ•°å€¼æ“ä½œã€‚\n\n\n\nğŸ”¹ æ–¹æ³• 3ï¼šMonitorï¼ˆæ¯” lock æ›´åº•å±‚ï¼‰private object _lockObj = new object();int counter = 0;void Increment()&#123;    Monitor.Enter(_lockObj);    try    &#123;        counter++;    &#125;    finally    &#123;        Monitor.Exit(_lockObj);    &#125;&#125;\n\n\nlock å…¶å®å°±æ˜¯ Monitor çš„è¯­æ³•ç³–ã€‚\n\nå¦‚æœéœ€è¦æ›´å¤æ‚çš„æ§åˆ¶ï¼ˆWait/Pulseï¼‰ï¼Œå¯ä»¥ç›´æ¥ç”¨ Monitorã€‚\n\n\n\nğŸ”¹ æ–¹æ³• 4ï¼šReaderWriterLockSlimï¼ˆè¯»å¤šå†™å°‘åœºæ™¯ï¼‰ReaderWriterLockSlim rwLock = new ReaderWriterLockSlim();List&lt;int&gt; list = new List&lt;int&gt;();void AddItem(int item)&#123;    rwLock.EnterWriteLock();    try    &#123;        list.Add(item);    &#125;    finally    &#123;        rwLock.ExitWriteLock();    &#125;&#125;int GetItem(int index)&#123;    rwLock.EnterReadLock();    try    &#123;        return list[index];    &#125;    finally    &#123;        rwLock.ExitReadLock();    &#125;&#125;\n\n\nå¤šä¸ªçº¿ç¨‹å¯åŒæ—¶è¯»ï¼Œä½†å†™æ—¶å¿…é¡»ç‹¬å ã€‚\n\næ¯”å•çº¯çš„ lock æ›´é«˜æ•ˆï¼ˆåœ¨è¯»æ“ä½œè¿œå¤šäºå†™æ“ä½œçš„æƒ…å†µä¸‹ï¼‰ã€‚\n\n\n","categories":["Unity"],"tags":["C#"]},{"title":"ClaudeCodeé…ç½®MCP","url":"/2025/06/17/Configuring_ClaudeCode_MCP/","content":"é…ç½®æ–¹æ³•æ–¹æ³•ä¸€ï¼šä½¿ç”¨å‘½ä»¤è¡Œï¼ˆæ¨èï¼‰Claude æä¾›äº†ä¸“é—¨çš„å‘½ä»¤è¡Œå·¥å…·æ¥ç®¡ç† MCP æœåŠ¡å™¨ï¼š\n# æŸ¥çœ‹å¸®åŠ©claude mcp --help# åˆ—å‡ºæ‰€æœ‰é…ç½®çš„æœåŠ¡å™¨claude mcp list# è·å–ç‰¹å®šæœåŠ¡å™¨è¯¦æƒ…claude mcp get &lt;server-name&gt;\n\næ–¹æ³•äºŒï¼šä½¿ç”¨ add-json å‘½ä»¤æ·»åŠ æœåŠ¡å™¨æ¨èä½¿ç”¨ add-json å‘½ä»¤ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¸€æ¬¡æ€§è®¾ç½®æ‰€æœ‰é…ç½®é¡¹ï¼š\n1. Memory MCP Serverï¼ˆå†…å­˜ç®¡ç†ï¼‰claude mcp add-json memory-mcp &#x27;&#123;&quot;command&quot;:&quot;cmd&quot;,&quot;args&quot;:[&quot;/c&quot;,&quot;npx&quot;,&quot;-y&quot;,&quot;@modelcontextprotocol/server-memory&quot;],&quot;env&quot;:&#123;&quot;MEMORY_FILE_PATH&quot;:&quot;D:/UnityGame/Self/2048/UnityProject/Assets/Memory.json&quot;&#125;,&quot;disabled&quot;:false,&quot;alwaysAllow&quot;:[&quot;create_entities&quot;,&quot;create_relations&quot;,&quot;add_observations&quot;,&quot;delete_entities&quot;,&quot;delete_observations&quot;,&quot;delete_relations&quot;,&quot;read_graph&quot;,&quot;search_nodes&quot;,&quot;open_nodes&quot;,&quot;get_memory&quot;]&#125;&#x27;\n\nåŠŸèƒ½ï¼šæä¾›çŸ¥è¯†å›¾è°±å’Œå†…å­˜ç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥åˆ›å»ºå®ä½“ã€å…³ç³»å’Œè§‚å¯Ÿè®°å½•ã€‚\n2. Repomix Serverï¼ˆä»£ç ä»“åº“åˆ†æï¼‰claude mcp add-json repomix &#x27;&#123;&quot;command&quot;:&quot;cmd&quot;,&quot;args&quot;:[&quot;/c&quot;,&quot;npx&quot;,&quot;-y&quot;,&quot;repomix&quot;,&quot;--mcp&quot;]&#125;&#x27;\n\nåŠŸèƒ½ï¼šåˆ†æå’Œæ‰“åŒ…ä»£ç ä»“åº“ï¼Œç”Ÿæˆé¡¹ç›®ç»“æ„æŠ¥å‘Šã€‚\n3. Tavily MCP Serverï¼ˆç½‘ç»œæœç´¢ï¼‰claude mcp add-json tavily-mcp &#x27;&#123;&quot;command&quot;:&quot;cmd&quot;,&quot;args&quot;:[&quot;/c&quot;,&quot;npx&quot;,&quot;-y&quot;,&quot;tavily-mcp@0.1.4&quot;],&quot;env&quot;:&#123;&quot;TAVILY_API_KEY&quot;:&quot;ä½ çš„APIå¯†é’¥&quot;&#125;,&quot;alwaysAllow&quot;:[&quot;tavily-search&quot;,&quot;tavily-extract&quot;],&quot;disabled&quot;:false&#125;&#x27;\n\nåŠŸèƒ½ï¼šæä¾›å®æ—¶ç½‘ç»œæœç´¢å’Œå†…å®¹æå–åŠŸèƒ½ã€‚\næ³¨æ„ï¼šéœ€è¦ä» Tavily è·å– API å¯†é’¥ã€‚\n4. GitHub MCP Serverï¼ˆGitHub æ“ä½œï¼‰claude mcp add-json github-mcp &#x27;&#123;&quot;command&quot;:&quot;cmd&quot;,&quot;args&quot;:[&quot;/c&quot;,&quot;npx&quot;,&quot;-y&quot;,&quot;@modelcontextprotocol/server-github&quot;],&quot;env&quot;:&#123;&quot;GITHUB_PERSONAL_ACCESS_TOKEN&quot;:&quot;ä½ çš„GitHubä»¤ç‰Œ&quot;&#125;,&quot;alwaysAllow&quot;:[&quot;create_or_update_file&quot;,&quot;search_repositories&quot;,&quot;create_repository&quot;,&quot;get_file_contents&quot;,&quot;push_files&quot;,&quot;create_pull_request&quot;,&quot;fork_repository&quot;,&quot;create_branch&quot;,&quot;list_issues&quot;,&quot;add_issue_comment&quot;,&quot;search_code&quot;,&quot;search_users&quot;,&quot;get_pull_request&quot;,&quot;get_issue&quot;,&quot;list_pull_requests&quot;,&quot;create_pull_request_review&quot;,&quot;merge_pull_request&quot;,&quot;get_pull_request_files&quot;,&quot;get_pull_request_status&quot;,&quot;update_pull_request_branch&quot;,&quot;get_pull_request_reviews&quot;,&quot;get_pull_request_comments&quot;]&#125;&#x27;\n\nåŠŸèƒ½ï¼šç›´æ¥æ“ä½œ GitHub ä»“åº“ï¼Œåˆ›å»º PRã€ç®¡ç† Issues ç­‰ã€‚\næ³¨æ„ï¼šéœ€è¦åœ¨ GitHub è®¾ç½®ä¸­ç”Ÿæˆ Personal Access Tokenã€‚\n5. Context7 Serverï¼ˆæ–‡æ¡£æŸ¥è¯¢ï¼‰claude mcp add-json context7 &#x27;&#123;&quot;command&quot;:&quot;npx&quot;,&quot;args&quot;:[&quot;-y&quot;,&quot;@upstash/context7-mcp&quot;],&quot;env&quot;:&#123;&quot;DEFAULT_MINIMUM_TOKENS&quot;:&quot;&quot;&#125;&#125;&#x27;\n\nåŠŸèƒ½ï¼šè·å–æœ€æ–°çš„å¼€å‘åº“æ–‡æ¡£å’Œä»£ç ç¤ºä¾‹ã€‚\næ–¹æ³•ä¸‰ï¼šç®€å•æ·»åŠ å‘½ä»¤å¦‚æœä¸éœ€è¦å¤æ‚é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ç®€å•çš„ add å‘½ä»¤ï¼š\n# Memory MCPclaude mcp add memory-mcp &quot;cmd&quot; &quot;/c&quot; &quot;npx&quot; &quot;-y&quot; &quot;@modelcontextprotocol/server-memory&quot;# Repomixclaude mcp add repomix &quot;cmd&quot; &quot;/c&quot; &quot;npx&quot; &quot;-y&quot; &quot;repomix&quot; &quot;--mcp&quot;# Tavily MCPclaude mcp add tavily-mcp &quot;cmd&quot; &quot;/c&quot; &quot;npx&quot; &quot;-y&quot; &quot;tavily-mcp@0.1.4&quot;# GitHub MCPclaude mcp add github-mcp &quot;cmd&quot; &quot;/c&quot; &quot;npx&quot; &quot;-y&quot; &quot;@modelcontextprotocol/server-github&quot;# Context7claude mcp add context7 &quot;npx&quot; &quot;-y&quot; &quot;@upstash/context7-mcp&quot;\n\nç¯å¢ƒå˜é‡é…ç½®æŸäº› MCP æœåŠ¡å™¨éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ï¼š\nå¿…éœ€çš„ API å¯†é’¥\nTAVILY_API_KEY: Tavily æœç´¢æœåŠ¡çš„ API å¯†é’¥\nGITHUB_PERSONAL_ACCESS_TOKEN: GitHub ä¸ªäººè®¿é—®ä»¤ç‰Œ\n\nå¯é€‰é…ç½®\nMEMORY_FILE_PATH: Memory MCP çš„æ•°æ®å­˜å‚¨è·¯å¾„\nDEFAULT_MINIMUM_TOKENS: Context7 çš„æœ€å°ä»¤ç‰Œæ•°\n\nç®¡ç† MCP æœåŠ¡å™¨æŸ¥çœ‹é…ç½®# åˆ—å‡ºæ‰€æœ‰æœåŠ¡å™¨claude mcp list# æŸ¥çœ‹ç‰¹å®šæœåŠ¡å™¨è¯¦æƒ…claude mcp get memory-mcp\n\nåˆ é™¤æœåŠ¡å™¨# åˆ é™¤æŒ‡å®šæœåŠ¡å™¨claude mcp remove memory-mcp\n\né‡ç½®é¡¹ç›®é…ç½®# é‡ç½®é¡¹ç›®èŒƒå›´å†…çš„æœåŠ¡å™¨é€‰æ‹©claude mcp reset-project-choices\n\nå¸¸è§é—®é¢˜1. å‘½ä»¤æ‰§è¡Œå¤±è´¥\nç¡®ä¿ Node.js å’Œ npm å·²æ­£ç¡®å®‰è£…\næ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸\néªŒè¯ API å¯†é’¥æ˜¯å¦æœ‰æ•ˆ\n\n2. æœåŠ¡å™¨æ— æ³•å¯åŠ¨\næ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®\nç¡®è®¤ MCP æœåŠ¡å™¨åŒ…æ˜¯å¦æˆåŠŸå®‰è£…\næŸ¥çœ‹é”™è¯¯æ—¥å¿—æ’æŸ¥å…·ä½“é—®é¢˜\n\n3. æƒé™é—®é¢˜\nç¡®ä¿ GitHub ä»¤ç‰Œæœ‰è¶³å¤Ÿçš„æƒé™\næ£€æŸ¥æ–‡ä»¶è·¯å¾„çš„è¯»å†™æƒé™\n\n","categories":["AI Code"],"tags":["ClaudeCode"]},{"title":"Dotsä¹‹è·¯-æ ¸å¿ƒåŒ…_JobSystem_01_WaveCubeç¤ºä¾‹","url":"/2025/09/27/Dots_Road_Core_Package_JobSystem_01_WaveCube_Example/","content":"å‰è¨€æœ¬æ–‡ä¸º Metaverseå¤§è¡ç¥å› Dots ä¹‹è·¯çš„è®°å½•ã€‚ä»“åº“åœ°å€ RoadToDotsTutorials\nåŸºäº GameObject Component æ–¹å¼void Start()&#123;   cubesList = new List&lt;Transform&gt;();   for (var z = -zHalfCount; z &lt;= zHalfCount; z++)   &#123;\t   for (var x = -xHalfCount; x &lt;= xHalfCount; x++)\t   &#123;\t\t   var cube = Instantiate(cubeAchetype);\t\t   cube.transform.position = new Vector3(x * 1.1f, 0, z * 1.1f);\t\t   cubesList.Add(cube.transform);\t   &#125;   &#125;&#125;// Update is called once per framevoid Update()&#123;   using (profilerMarker.Auto(cubesList.Count))   &#123;\t   for (var i = 0; i &lt; cubesList.Count; i++)\t   &#123;\t\t   var distance = Vector3.Distance(cubesList[i].position, Vector3.zero);\t\t   cubesList[i].localPosition += Vector3.up * Mathf.Sin(Time.time * 3f + distance * 0.2f);\t   &#125;   &#125;&#125;\nåŸºäº Job æ–¹å¼// ä½ç½®æ›´æ–°é€»è¾‘[BurstCompile]struct WaveCubesJob : IJobParallelForTransform&#123;   [ReadOnly] public float elapsedTime;   public void Execute(int index, TransformAccess transform)   &#123;\t   var distance = Vector3.Distance(transform.position, Vector3.zero);\t   transform.localPosition += Vector3.up * math.sin(elapsedTime * 3f + distance * 0.2f);   &#125;&#125;\n\npublic class WaveCubesWithJobs : MonoBehaviour&#123;   static readonly ProfilerMarker&lt;int&gt; profilerMarker = new ProfilerMarker&lt;int&gt;(&quot;WaveCubesWithJobs UpdateTransform&quot;, &quot;Objects Count&quot;);   public GameObject cubeAchetype = null;   [Range(10, 100)] public int xHalfCount = 40;   [Range(10, 100)] public int zHalfCount = 40;   private TransformAccessArray transformAccessArray;   void Start()   &#123;\t   transformAccessArray = new TransformAccessArray(4 * xHalfCount * zHalfCount);\t   for (var z = -zHalfCount; z &lt; zHalfCount; z++)\t   &#123;\t\t   for (var x = -xHalfCount; x &lt; xHalfCount; x++)\t\t   &#123;\t\t\t   var cube = Instantiate(cubeAchetype);\t\t\t   cube.transform.position = new Vector3(x * 1.1f, 0, z * 1.1f);\t\t\t   transformAccessArray.Add(cube.transform);\t\t   &#125;\t   &#125;   &#125;   void Update()   &#123;\t   Debug.Log($&quot;TransformAccessArray length: &#123;transformAccessArray.length&#125;&quot;);\t   using (profilerMarker.Auto(transformAccessArray.length))\t   &#123;\t\t   var waveCubesJob = new WaveCubesJob\t\t   &#123;\t\t\t   elapsedTime = Time.time,\t\t   &#125;;\t\t   JobHandle waveCubesJobhandle = waveCubesJob.Schedule(transformAccessArray);\t\t   \t\t   waveCubesJobhandle.Complete();    // åŒæ­¥åˆ°ä¸»çº¿ç¨‹ä¸­\t   &#125;   &#125;   private void OnDestroy()   &#123;\t   transformAccessArray.Dispose();   &#125;&#125;\n\n\nTransformAccessArray (struct): Job åªèƒ½ä½¿ç”¨ Blittable ç±»å‹æ•°æ®å’Œéæ‰˜ç®¡å†…å­˜å †ä¸Šçš„æ•°æ®ï¼ŒTransform å¹¶ä¸ç¬¦åˆè¦æ±‚\nBurstCompile: ä½¿ç”¨æ­¤æ ‡ç­¾çš„éƒ¨åˆ†ä»£ç å°†ä½¿ç”¨ Brust ç¼–è¯‘ï¼Œå¯ä»¥ç”¨äºä¸€ä¸‹å†…å®¹\nJobs: burst  å°†ä¼šç¼–è¯‘ jobs å†…çš„æ‰€æœ‰å†…å®¹\nClassesï¼š\nStructsï¼š\nStatic methodsï¼š\nAssembliesï¼š\n\n\n\n","categories":["Unity"],"tags":["DOTS"]},{"title":"Dotsä¹‹è·¯-æ ¸å¿ƒåŒ…_JobSystem_01","url":"/2025/09/27/Dots_Road_Core_Package_JobSystem_01/","content":"å‰è¨€æœ¬æ–‡ä¸º Metaverseå¤§è¡ç¥å› Dots ä¹‹è·¯çš„è®°å½•ã€‚ä»“åº“åœ°å€ RoadToDotsTutorials\nå¦‚ä½•å°†ä¸»çº¿ç¨‹é€»è¾‘è½¬ç§»åˆ° Jobs å·¥ä½œçº¿ç¨‹ä¸­æ‰§è¡ŒTODOï¼š\nUnity Jobs System æ˜¯ä»€ä¹ˆ\nåŒ…å« C# Jobs System ä¸ C++ Jobs System\nåˆ©ç”¨å¤šæ ¸è®¡ç®—å¹³å°æ¥ç®€å•å®‰å…¨çš„ç¼–å†™ä¸æ‰§è¡Œå¤šçº¿ç¨‹ä»£ç \n**æ—¢å¯ä»¥ä¸ ECS ç»“åˆä½¿ç”¨ä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨\nä¸éœ€è¦å…³å¿ƒå¹³å° CPU æ ¸å¿ƒèµ„æºæƒ…å†µ\n\nC# Jobs System\nNo Reac Condition\nåªè®¿é—®æ•°æ®çš„æ‹·è´\næˆ–è€…å¯ä»¥è½¬æ¢ä¸€æ®µ buffer çš„æ‰€æœ‰æƒç»™è¿™ä¸ª Jobï¼ˆNative Containerï¼‰\n\n\nä½¿ç”¨å’Œ Unity å¼•æ“å†… C++ JobSystem ç³»ç»Ÿçš„ä»£ç \nå¼•æ“å’Œæ¸¸æˆçº¿ç¨‹ä¹‹é—´æ²¡æœ‰ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€\n\n\n\nJob ç¨‹åºå¯ä½¿ç”¨æ•°æ®ç±»å‹Blittable Typså› ä¸º C# ä¸ C++ ä¸‹çš„å†…å­˜ç®¡ç†å’Œå€¼çš„ç±»å‹å®šä¹‰ä¸åŒã€‚![[Pasted image 20250925131124.png]]\nNativeContainer\néæ‰˜ç®¡å†…å­˜\næœ‰ DisposeSentinel æ¥é¿å…å†…å­˜æ³„æ¼é”™è¯¯\næœ‰ AtomicSafetyHandle æ¥è¿½è¸ªæ‰€æœ‰æƒä¸æƒé™\néœ€è¦æ‰‹åŠ¨ Dispose é‡Šæ”¾\næ²¡æœ‰å¼•ç”¨è¿”å›ï¼Œä¼šåœ¨ C# 7 ä¸­æ”¯æŒ\nAnnocation Types\nPersistent: é•¿ç”Ÿå‘½å‘¨æœŸå†…å­˜\nTempJobï¼šåªåœ¨ Job ä¸­å­˜åœ¨çš„çŸ­ç”Ÿå‘½å‘¨æœŸï¼Œ4 å¸§ä»¥ä¸Šä¼šå—åˆ°è­¦å‘Š\nTemp: ä¸€ä¸ªå‡½æ•°è¿”å›å‰çš„çŸ­ç”Ÿå‘½å‘¨æœŸ\n\n\n\nJob çš„è°ƒåº¦æ–¹å¼\nRunï¼šä¸»çº¿ç¨‹ç«‹å³é¡ºåºæ‰§è¡Œ\nScheduleï¼šå•ä¸ªå·¥ä½œçº¿ç¨‹æˆ–ä¸»çº¿ç¨‹ï¼Œå•ä¸ª Job é¡ºåºæ‰§è¡Œ\nScheduleParalledlï¼šåœ¨å¤šä¸ªå·¥ä½œçº¿ç¨‹ä¸ŠåŒæ—¶æ‰§è¡Œï¼Œæ€§èƒ½æœ€å¥½ï¼Œä½†å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€æ•°æ®æ—¶å¯èƒ½ä¼šå‘ç”Ÿå†²çª\n\n","categories":["Unity"],"tags":["DOTS"]},{"title":"MCPè¸©å‘è®°å½•-ServerMemory-æ— æ³•æŒ‡å®šjsonç›®å½•","url":"/2025/03/16/MCP_ServerMemory_NoToolFound/","content":"server-memory æ— æ³•æŒ‡å®š json ç›®å½•å®˜æ–¹ç¤ºä¾‹ä¸­ä½¿ç”¨äº† env å»è®¾ç½®è¿è¡Œç›®å½•ï¼Œä½†æ˜¯æˆ‘ä¸€ç›´æ²¡æˆåŠŸ\n&#123;  &quot;mcpServers&quot;: &#123;    &quot;memory&quot;: &#123;      &quot;command&quot;: &quot;npx&quot;,      &quot;args&quot;: [&quot;-y&quot;, &quot;@modelcontextprotocol/server-memory&quot;],      &quot;env&quot;: &#123;        &quot;MEMORY_FILE_PATH&quot;: &quot;/path/to/custom/memory.json&quot;      &#125;    &#125;  &#125;&#125;\n\nè§£å†³è®°å½•æ‰¾åˆ° index.js ä»£ç ï¼Œè®© ai ä¿®æ”¹ä»£ç ï¼ŒæŠŠ json ç›®å½•æ”¹ä¸ºå¯å®šä¹‰å‚æ•°ï¼Œä½¿ç”¨å‘½ä»¤è¡Œä¼ å…¥\ncmd /c npx @modelcontextprotocol/server-memory -p C:\\Q5\\Unity\\Q5.json\n","categories":["AI Code"],"tags":["MCP"]},{"title":"MCPè¸©å‘è®°å½•-å…³äºwindowsé…ç½®æŠ¥é”™-NoToolFound","url":"/2025/03/16/MCP_WIndows_NoToolFound/","content":"åœ¨windowsé…ç½®mcpå‡ºç°çš„é—®é¢˜è®°å½•\nNo tool  foundå®˜æ–¹ä½¿ç”¨æ–¹æ³•npx @modelcontextprotocol/server-memory\nè§£å†³æ–¹æ³•1æ‰¾åˆ°å¯¹åº”æœåŠ¡å™¨çš„index.js,ç›´æ¥ä½¿ç”¨nodeè¿è¡Œã€‚\nnode C:\\Users\\user\\AppData\\Roaming\\npm-cache\\_npx\\15b07286cbcc3329\\node_modules\\@modelcontextprotocol\\server-memory\\dist\\index.js\nè§£å†³æ–¹æ³•2ä½¿ç”¨cmdè°ƒç”¨åˆ°ç³»ç»Ÿçš„npxå‘½ä»¤ï¼Œè€Œä¸æ˜¯ç¼–è¾‘å™¨ä¸­çš„ç¯å¢ƒã€‚\ncmd /c npx @modelcontextprotocol/server-memory\n\n","categories":["AI Code"],"tags":["MCP"]},{"title":"UIæ¡†æ¶-è·å–å…¶ä»–ç•Œé¢","url":"/2025/09/27/UI_Framework_Get_Other_UI/","content":"åœ¨æœ€è¿‘çš„å¼€å‘ä¸­ï¼Œå› ä¸ºæœ€å¼€å§‹åœ¨è®¾å®šæ¡†æ¶çš„æ—¶å€™ï¼Œåœ¨ UIManager ä¸­å¼€æ”¾äº†è·å–æŒ‡å®š UI çš„æ¥å£ï¼Œå¯¼è‡´æœ€è¿‘é‡æ„å¼‚å¸¸ç—›è‹¦\nä¸ºä»€ä¹ˆä¸è¦æœ‰è·å–å…¶ä»–ç•Œé¢çš„æ¥å£å¦‚æœå¼€æ”¾äº†è¿™ç±»æ¥å£ä¼šè®©ä»£ç è€¦åˆåº¦ä¸Šå‡ã€‚  // Aç•Œé¢public class AView : BaseView&#123;    public void ShowAni()&#123;    &#125;&#125;public class ASubView : BaseView&#123;    public void GetReward()&#123;      ...      UIManger.Instance.Get&lt;AView&gt;().ShowAni();    // å¼ºçƒˆçš„è€¦åˆ        Close();    &#125;    &#125;\nè§£å†³æ–¹æ³•UI å› è¯¥æ˜¯å“åº”æ•°æ®å˜åŒ–çš„è€Œåˆ·æ–°çš„ï¼Œä¸Šé¢è¿™ç§ä»£ç çš„å‡ºç°ï¼Œæœ¬è´¨å…¶å®å°±æ˜¯å› ä¸ºæä¾›äº† Get ç•Œé¢çš„æ¥å£ï¼Œè®©ç¨‹åºå·æ‡’çš„å®ç°\npublic class AModel : BaseModel&#123;    public void ChangeValue(int value)&#123;        ...        EventSystem.Instance.Trigger(EventDefine.AViewShowAni)    &#125;&#125;public class AView: BaseView&#123;    public void BindEvent()&#123;        EventSystem.Instance.Bind(EventDefine.AViewShowAni,ShowAni);    &#125;        public void ShowAni&#123;            &#125;&#125;public class AsubView: BaseeView&#123;    public void GetReward()&#123;        ...        AModel.Instance.ChangeValue(x);    // View -&gt; Data -&gt; View                Close();    &#125;&#125;","categories":["Unity"],"tags":["UGUI"]},{"title":"GameFrameworkç”Ÿå‘½å‘¨æœŸ","url":"/2025/05/24/GameFramework_Lifecycle/","content":"æœ€è¿‘åˆåœ¨å†™ä¸€äº›æ¸¸æˆé¡¹ç›®ï¼Œæƒ³è¦çœ‹ä¸€äº›æœ‰ä»€ä¹ˆæ–¹ä¾¿å¼€å‘çš„æ¡†æ¶ï¼Œæ¥æ¥å›å›å‘ç° GameFramework ä¾ç„¶æ˜¯ç»•ä¸è¿‡å»çš„ä¸€ä¸ªæ¡†æ¶ã€‚æœ¬ç« ä¸»è¦æ˜¯åˆ†æä¸€ä¸‹ GameFramework çš„ç”Ÿå‘½å‘¨æœŸã€‚\nUnity ç”Ÿå‘½å‘¨æœŸå…ˆçœ‹ä¸€ä¸‹å¸¸è§çš„ Unity çš„ç”Ÿå‘½å‘¨æœŸ\nflowchart LR\n    A[\"Awake\"] --> B[\"Start\"]\n    B --> C[\"Update\"]\n    C --> C\n    C --> D[\"OnDestroy\"]\n\n    E[\"å…¶ä»–MonoBehaviour\"] --> F[\"ç‹¬ç«‹ç”Ÿå‘½å‘¨æœŸ\"]\n\nä¸»è¦æœ‰å‡ ä¸ªé—®é¢˜ï¼š\n\nå„ä¸ªæ¨¡å—ä¹‹é—´çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç‹¬ç«‹çš„ï¼Œæ‰§è¡Œé¡ºåºä¸ç¡®å®š\néš¾ä»¥æ§åˆ¶æ­£ç¡®çš„åˆå§‹åŒ–å’Œé”€æ¯é¡ºåº\næ— æ³•æ›´å¥½çš„å¤„ç†ä¾èµ–å…³ç³»\n\nGameFramework ç”Ÿå‘½å‘¨æœŸGameFrameworkModuleGameFramework é€šè¿‡ GameFrameworkModule æ¥ç®¡ç†æ¨¡å—çš„ç”Ÿå‘½å‘¨æœŸã€‚GameFrameworkModule æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸»è¦æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š\nflowchart TB\n    A[\"GameFrameworkEntry.GetModule\"] --> B[\"è‡ªåŠ¨åˆ›å»ºæ¨¡å—\"]\n    B --> C[\"æŒ‰ä¼˜å…ˆçº§æ’åº\"]\n    C --> D[\"ç»Ÿä¸€Updateå¾ªç¯\"]\n    D --> E[\"é€†åºShutdown\"]\n\n    F[\"é«˜ä¼˜å…ˆçº§æ¨¡å—\"] --> G[\"å…ˆæ‰§è¡ŒUpdate\"]\n    F --> H[\"åæ‰§è¡ŒShutdown\"]\n\nä»£ç æ˜¯è¿™æ ·çš„ï¼š\n/// &lt;summary&gt;/// æ¸¸æˆæ¡†æ¶æ¨¡å—æŠ½è±¡ç±»ã€‚/// &lt;/summary&gt;internal abstract class GameFrameworkModule&#123;    /// &lt;summary&gt;    /// è·å–æ¸¸æˆæ¡†æ¶æ¨¡å—ä¼˜å…ˆçº§ã€‚    /// &lt;/summary&gt;    /// &lt;remarks&gt;ä¼˜å…ˆçº§è¾ƒé«˜çš„æ¨¡å—ä¼šä¼˜å…ˆè½®è¯¢ï¼Œå¹¶ä¸”å…³é—­æ“ä½œä¼šåè¿›è¡Œã€‚&lt;/remarks&gt;    internal virtual int Priority    &#123;        get        &#123;            return 0;        &#125;    &#125;    /// &lt;summary&gt;    /// æ¸¸æˆæ¡†æ¶æ¨¡å—è½®è¯¢ã€‚    /// &lt;/summary&gt;    /// &lt;param name=&quot;elapseSeconds&quot;&gt;é€»è¾‘æµé€æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚&lt;/param&gt;    /// &lt;param name=&quot;realElapseSeconds&quot;&gt;çœŸå®æµé€æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚&lt;/param&gt;    internal abstract void Update(float elapseSeconds, float realElapseSeconds);    /// &lt;summary&gt;    /// å…³é—­å¹¶æ¸…ç†æ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚    /// &lt;/summary&gt;    internal abstract void Shutdown();&#125;\n\n\né€šè¿‡ Priority æ¥æ§åˆ¶æ¨¡å—çš„æ‰§è¡Œé¡ºåº\né€šè¿‡ Update æ¥æ§åˆ¶æ¨¡å—çš„æ›´æ–°\né€šè¿‡ Shutdown æ¥æ§åˆ¶æ¨¡å—çš„é”€æ¯\n\nGameFrameworkEntryçœ‹äº† GameFrameworkModule çš„å®ç°ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹ GameFrameworkEntry çš„å®ç°ã€‚GameFrameworkEntry ä¸­æ˜¯å¦‚ä½•ç®¡ç†é¡¹ç›®ä¸­æ‰€æœ‰çš„æ¨¡å—çš„ã€‚\n1. CreateModule\nä½¿ç”¨ System.Activator.CreateInstance æ¥åˆ›å»ºæ¨¡å—\né€šè¿‡ LinkedList æ¥ç®¡ç†æ¨¡å—çš„é¡ºåº,ä¿è¯åœ¨æ•°æ®ç»“æ„ä¸­æ¨¡å—æ˜¯æœ‰åºçš„\n\n/// &lt;summary&gt;/// åˆ›å»ºæ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚/// &lt;/summary&gt;/// &lt;param name=&quot;moduleType&quot;&gt;è¦åˆ›å»ºçš„æ¸¸æˆæ¡†æ¶æ¨¡å—ç±»å‹ã€‚&lt;/param&gt;/// &lt;returns&gt;è¦åˆ›å»ºçš„æ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚&lt;/returns&gt;private static GameFrameworkModule CreateModule(Type moduleType)&#123;    GameFrameworkModule module = (GameFrameworkModule)Activator.CreateInstance(moduleType);    if (module == null)    &#123;        throw new GameFrameworkException(Utility.Text.Format(&quot;Can not create module &#x27;&#123;0&#125;&#x27;.&quot;, moduleType.FullName));    &#125;    // æ ¹æ®ä¼˜å…ˆçº§æ’å…¥,é«˜ä¼˜å…ˆçº§åœ¨å‰    LinkedListNode&lt;GameFrameworkModule&gt; current = s_GameFrameworkModules.First;    while (current != null)    &#123;        if (module.Priority &gt; current.Value.Priority)        &#123;            break;        &#125;        current = current.Next;    &#125;    if (current != null)    &#123;        s_GameFrameworkModules.AddBefore(current, module);    &#125;    else    &#123;        s_GameFrameworkModules.AddLast(module);    &#125;    return module;&#125;\n\n2. GetModule\nå¼ºåˆ¶ä½¿ç”¨æ¥å£æ¥è·å–æ¨¡å—ï¼Œä¾èµ–å€’ç½®åŸåˆ™:\né«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–æŠ½è±¡\né€šè¿‡æ¥å£æ¥è·å–æ¨¡å—ï¼Œé¿å…äº†ç›´æ¥ä¾èµ–å®ç°ç±»\n\n\né€šè¿‡å‘½åçº¦å®šæ¥è·å–æ¨¡å—\nIXxxManager -&gt; XxxManager\né€šè¿‡åå°„æ¥è·å–æ¨¡å—çš„ç±»å‹\n\n\n\n/// &lt;summary&gt;/// è·å–æ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚/// &lt;/summary&gt;/// &lt;typeparam name=&quot;T&quot;&gt;è¦è·å–çš„æ¸¸æˆæ¡†æ¶æ¨¡å—ç±»å‹ã€‚&lt;/typeparam&gt;/// &lt;returns&gt;è¦è·å–çš„æ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚&lt;/returns&gt;/// &lt;remarks&gt;å¦‚æœè¦è·å–çš„æ¸¸æˆæ¡†æ¶æ¨¡å—ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨åˆ›å»ºè¯¥æ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚&lt;/remarks&gt;public static T GetModule&lt;T&gt;() where T : class&#123;    Type interfaceType = typeof(T);    // 1. å¿…é¡»æ˜¯æ¥å£ç±»å‹    if (!interfaceType.IsInterface)    &#123;        throw new GameFrameworkException(Utility.Text.Format(&quot;You must get module by interface, but &#x27;&#123;0&#125;&#x27; is not.&quot;, interfaceType.FullName));    &#125;    // 2. å¿…é¡»æ˜¯æ¸¸æˆæ¡†æ¶æ¨¡å—, å¿…é¡»æ˜¯ GameFramework å‘½åç©ºé—´ä¸‹çš„ç±»å‹    if (!interfaceType.FullName.StartsWith(&quot;GameFramework.&quot;, StringComparison.Ordinal))    &#123;        throw new GameFrameworkException(Utility.Text.Format(&quot;You must get a Game Framework module, but &#x27;&#123;0&#125;&#x27; is not.&quot;, interfaceType.FullName));    &#125;    // 3. å‘½åçº¦å®šï¼šIXxxManager -&gt; XxxManager    string moduleName = Utility.Text.Format(&quot;&#123;0&#125;.&#123;1&#125;&quot;,        interfaceType.Namespace,        interfaceType.Name.Substring(1));   // å»æ‰å‰ç¼€ I    Type moduleType = Type.GetType(moduleName);    if (moduleType == null)    &#123;        throw new GameFrameworkException(Utility.Text.Format(&quot;Can not find Game Framework module type &#x27;&#123;0&#125;&#x27;.&quot;, moduleName));    &#125;    return GetModule(moduleType) as T;&#125;/// &lt;summary&gt;/// è·å–æ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚/// &lt;/summary&gt;/// &lt;param name=&quot;moduleType&quot;&gt;è¦è·å–çš„æ¸¸æˆæ¡†æ¶æ¨¡å—ç±»å‹ã€‚&lt;/param&gt;/// &lt;returns&gt;è¦è·å–çš„æ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚&lt;/returns&gt;/// &lt;remarks&gt;å¦‚æœè¦è·å–çš„æ¸¸æˆæ¡†æ¶æ¨¡å—ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨åˆ›å»ºè¯¥æ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚&lt;/remarks&gt;private static GameFrameworkModule GetModule(Type moduleType)&#123;    foreach (GameFrameworkModule module in s_GameFrameworkModules)    &#123;        if (module.GetType() == moduleType)        &#123;            return module;        &#125;    &#125;    return CreateModule(moduleType);&#125;\n\n3. Update&#x2F;Shutdownè¿™éƒ¨åˆ†å°±æ²¡ä»€ä¹ˆç‰¹åˆ«éœ€è¦æ³¨æ„çš„åœ°æ–¹äº†ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ Shutdown çš„æ—¶å€™æ˜¯é€†åºçš„(ä¼˜å…ˆçº§ä½çš„æ¨¡å—å¯èƒ½ç”¨åˆ°äº†é«˜ä¼˜å…ˆçº§çš„æ¨¡å—)ã€‚\n/// &lt;summary&gt;/// æ‰€æœ‰æ¸¸æˆæ¡†æ¶æ¨¡å—è½®è¯¢ã€‚/// &lt;/summary&gt;/// &lt;param name=&quot;elapseSeconds&quot;&gt;é€»è¾‘æµé€æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚&lt;/param&gt;/// &lt;param name=&quot;realElapseSeconds&quot;&gt;çœŸå®æµé€æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚&lt;/param&gt;public static void Update(float elapseSeconds, float realElapseSeconds)&#123;    foreach (GameFrameworkModule module in s_GameFrameworkModules)    &#123;        module.Update(elapseSeconds, realElapseSeconds);    &#125;&#125;/// &lt;summary&gt;/// å…³é—­å¹¶æ¸…ç†æ‰€æœ‰æ¸¸æˆæ¡†æ¶æ¨¡å—ã€‚/// &lt;/summary&gt;public static void Shutdown()&#123;    for (LinkedListNode&lt;GameFrameworkModule&gt; current = s_GameFrameworkModules.Last; current != null; current = current.Previous)    &#123;        current.Value.Shutdown();    &#125;    s_GameFrameworkModules.Clear();    ReferencePool.ClearAll();    Utility.Marshal.FreeCachedHGlobal();    GameFrameworkLog.SetLogHelper(null);&#125;\n\nå…¶ä»–ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼\nå·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼\n\n// GameFrameworkEntry å……å½“äº†å·¥å‚å’Œå•ä¾‹ç®¡ç†å™¨public static class GameFrameworkEntry&#123;    // å•ä¾‹å®¹å™¨    private static readonly GameFrameworkLinkedList&lt;GameFrameworkModule&gt; s_GameFrameworkModules;    // å·¥å‚æ–¹æ³•    public static T GetModule&lt;T&gt;() where T : class    &#123;        // 1. æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨        GameFrameworkModule existingModule = GetModule(moduleType);        if (existingModule != null) return existingModule as T;        // 2. ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–°å®ä¾‹        return CreateModule(moduleType) as T;    &#125;&#125;\n\nå·¥å‚æ¨¡å¼:\nflowchart TB\nA[\"Client å®¢æˆ·ç«¯\"] --> B[\"Factory å·¥å‚ç±»\"]\nB --> C{äº§å“ç±»å‹åˆ¤æ–­}\nC -->|TypeA| D[\"ProductA äº§å“ A\"]\nC -->|TypeB| E[\"ProductB äº§å“ B\"]\nC -->|TypeC| F[\"ProductC äº§å“ C\"]\n\n    D --> G[\"IProductäº§å“æ¥å£\"]\n    E --> G\n    F --> G\n\n    G --> H[\"è¿”å›ç»™å®¢æˆ·ç«¯\"]\n\nå•ä¾‹æ¨¡å¼:\nflowchart TB\nA[\"Client å®¢æˆ·ç«¯\"] --> B[\"Singleton å•ä¾‹ç±»\"]\nB --> C{åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨}\nC -->|å·²å­˜åœ¨| D[\"è¿”å›å®ä¾‹\"]\nC -->|ä¸å­˜åœ¨| E[\"åˆ›å»ºæ–°å®ä¾‹\"]\n\n    E --> F[\"è¿”å›å®ä¾‹\"]\n\nLinkedListä½¿ç”¨äº† LinkedList æ¥ç®¡ç†æ¨¡å—çš„é¡ºåºï¼ŒLinkedList æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œæ”¯æŒåœ¨ O(1) çš„æ—¶é—´å¤æ‚åº¦å†…æ’å…¥å’Œåˆ é™¤èŠ‚ç‚¹ã€‚é€‚åˆé¢‘ç¹æ’å…¥å’Œåˆ é™¤çš„åœºæ™¯ã€‚\n","categories":["Unity"],"tags":["GameFramework"]},{"title":"Unityç»„ä»¶Canvas_CanvasScalerå‚æ•°è¯¦è§£","url":"/2025/05/13/Unity%20Component%20Canvas_CanvasScaler%20Parameter%20Explanation/","content":"\nCanvasRender Mode: ç”»å¸ƒä¸­æ¸²æŸ“æ¨¡å¼\n\nScreen Space - Overlay: è¿™ç§æ¸²æŸ“æ¨¡å¼å°† UI å…ƒç´ æ”¾åœ¨æœ€ä¸Šçº§æ¸²æŸ“ï¼Œä¸éœ€è¦ç›¸æœºä¹Ÿå¯ä»¥æ¸²æŸ“\n\nScreen Space - Camera: è¿™ç§æ¸²æŸ“æ¨¡å¼ä¸‹ï¼ŒCanvas ä¼šæ”¾ç½®åœ¨æŒ‡å®šçš„ UI ç›¸æœºå‰ã€‚UI å…ƒç´ ç”±è¿™ä¸ªç›¸æœºæ¸²æŸ“ã€‚ç›¸æœºçš„è®¾ç½®ä¼šå½±å“ UI çš„å¤–è§‚\n\nWorld Space: å°† UI è§†ä¸ºå¹³é¢æ¸²æŸ“ã€‚å…¶ä»–å¯¹è±¡å¯ä»¥ä½äº UI åé¢ã€ä¸­é—´ç©¿é€ã€å‰é¢ã€‚ç”»å¸ƒå¤§å°å–å†³äºä¸ç›¸æœºè§†è§’å’Œè·ç¦»ã€‚ä¾‹å¦‚æ˜¾ç¤ºåœ¨äººç‰©å¤´é¡¶çš„è¡€æ¡\n\n\nPixel Perfect: å¯ä»¥ä½¿å…ƒç´ çœ‹èµ·æ¥æ›´æ¸…æ™°ï¼Œé˜²æ­¢æ¨¡ç³Šã€‚ä½†æ˜¯ï¼Œå¦‚æœè®¸å¤šå…ƒç´ è¢«ç¼©æ”¾æˆ–æ—‹è½¬ï¼Œæˆ–è€…ä½¿ç”¨å¾®å¦™çš„åŠ¨ç”»ä½ç½®æˆ–ç¼©æ”¾ï¼Œåˆ™ç¦ç”¨ pixelPerfect å¯èƒ½æ›´æœ‰åˆ©ï¼Œå› ä¸ºè¿åŠ¨å°†æ›´å¹³æ»‘ã€‚Render Camera: æ¸²æŸ“ç›¸æœºPlane Distance: å¹³é¢è·ç¦»Resize Canvas: è°ƒæ•´ç”»å¸ƒå¤§å°Sorting Layer: æ’åºå±‚Order in Layer: å±‚çº§é¡ºåºAdditional Shader Channels: é™„åŠ ç€è‰²å™¨é€šé“Vertex Color Always In Gamma Color Space: é¡¶ç‚¹é¢œè‰²å§‹ç»ˆåœ¨ä¼½é©¬é¢œè‰²ç©ºé—´ä¸­\nCanvasScalerUI Scale Mode:\n\nConstant Pixel Size: æ— è®ºå±å¹•å¤§å° UI å…ƒç´ éƒ½ä»¥ç›¸åŒçš„åƒç´ å¤§å°æ˜¾ç¤º\n\nScale With Screen Size: å±å¹•è¶Šå¤§ UI å…ƒç´ è¶Šå¤§\n\nConstant Physical Size: ä¿æŒé»˜è®¤çš„ç‰©ç†å°ºå¯¸ï¼Œå¦‚æœå±å¹•å¤§å°æ”¹å˜ï¼ŒUI å…ƒç´ ä¸ä¼šæ”¹å˜\nReference Resolution: å‚è€ƒåˆ†è¾¨ç‡Screen Match Mode: å±å¹•åŒ¹é…æ¨¡å¼Match:Refreence Pixels Per Unit: å‚è€ƒæ¯å•ä½åƒç´ \n\n\n","categories":["Unity"],"tags":["ä¼˜åŒ–ï¼ŒUGUI"]},{"title":"Unityç½‘æ ¼é‡å»º","url":"/2025/04/30/Unity_Mesh_Rebuild/","content":"ä»€ä¹ˆæ˜¯ç½‘æ ¼é‡å»ºï¼ˆMesh Rebuildï¼‰åœ¨ UGUI ä¸­ï¼Œå¦‚æœè¦æ¸²æŸ“ä¸€ä¸ª UI å…ƒç´ ï¼ˆImageï¼ŒText ç­‰ï¼‰ï¼Œéœ€è¦ç»è¿‡ CPU é˜¶æ®µå°†æ¸²æŸ“æ‰€éœ€è¦æ•°æ®å¦‚ï¼šé¡¶ç‚¹ï¼Œä½ç½®ï¼Œçº¹ç†ç­‰ä¿¡æ¯ä¼ é€’ç»™ GPU è¿›è¡Œæ¸²æŸ“ã€‚åœ¨è¿è¡Œæ—¶ï¼ŒUI å…ƒç´ å¤–è§‚æˆ–å¸ƒå±€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒUGUI ä¼šé‡æ–°è®¡ç®—è¿™äº›æ•°æ®å¹¶ä¼ é€’ç»™ GPUï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºç½‘æ ¼é‡å»ºï¼ˆMesh Rebuildï¼‰ã€‚\nä¸ºä»€ä¹ˆä¼šé€ æˆç½‘æ ¼é‡å»ºæ¯ä¸ª UI å…ƒç´ ä¼šç»´æŠ¤è‡ªå·±çš„ Mesh ä¿¡æ¯ï¼Œä½†æ˜¯ Mesh ä¿¡æ¯å¹¶ä¸æ˜¯å®æ—¶æ›´æ–°çš„ï¼ŒUnity åœ¨ UI å…ƒç´ å‘ç”Ÿå¿…é¡»è¦é‡å»º Mesh ä¿¡æ¯çš„æƒ…å†µä¸‹æ‰ä¼šè¿›è¡Œç½‘æ ¼é‡å»ºã€‚æ¯”å¦‚ï¼š\n\næ–‡æœ¬å†…å®¹ä¿®æ”¹ï¼šText.text or TextMeshProUGUI.text å‘ç”Ÿå˜åŒ–\nå›¾åƒèµ„æºä¿®æ”¹ï¼šImage.sprite, RawImage.texture å‘ç”Ÿå˜åŒ–\né¢œè‰²ä¿®æ”¹ï¼šImage.color, Text.color å‘ç”Ÿå˜åŒ–\nâ€¦\n\nå¦‚ä½•é¿å…æˆ–å‡å°‘ç½‘æ ¼é‡å»º\næ‹†åˆ† Canvas - åŠ¨é™åˆ†ç¦»ä¾‹å¦‚ä¸€ä¸ª Image å…ƒç´ åœ¨ Simple æ¨¡å¼ä¸‹ä¼šåˆ›å»ºå››ä¸ªé¡¶ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ 100 ä¸ªç›¸åŒçš„è¿™æ ·çš„ Imageï¼ŒUGUI åº•å±‚(Native Code éƒ¨åˆ†)ä¼šå°†è¿™ 100 ä¸ª Image çš„ Mesh ä¿¡æ¯åˆå¹¶æˆä¸€ä¸ªå¤§çš„ Meshï¼Œç”¨åŒä¸€ä¸ª DrawCall å‘é€ç»™ CPUã€‚ä½†æ˜¯ï¼ŒUI çš„ Mesh ä¿¡æ¯ç›¸å¯¹äºæ™®é€šçš„ Mesh æ¥è¯´æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¸åŒï¼Œå°±æ˜¯ UI çš„ Mesh ä¿¡æ¯æ˜¯ä¼šå˜åŒ–çš„ï¼Œè€Œä¸€æ—¦æŸä¸ª UI å…ƒç´ çš„ Mesh ä¿¡æ¯å‘ç”Ÿä¿®æ”¹ï¼Œé‚£ä¹ˆå’Œè¿™ä¸ªå…ƒç´ åˆå¹¶åœ¨ä¸€æ‰¹çš„æ•´ä¸ª Mesh éƒ½ä¼šå˜æˆä¸å¯ç”¨ã€‚å¦‚æœå°†åŠ¨æ€çš„ UI å…ƒç´ å•ç‹¬åˆ†ç¦»åˆ°ä¸åŒçš„ Canvas ä¸­ï¼Œç”±äº UGUI æ¸²æŸ“æ—¶ä»¥ Canvas ä¸ºå•ä½çš„ï¼Œé‚£ä¹ˆè¿™äº›åŠ¨æ€çš„ UI å…ƒç´ å°±ä¸ä¼šå½±å“åˆ°é™æ€çš„ UI å…ƒç´ äº†ã€‚\n\nå‚è€ƒé“¾æ¥æµ…è°ˆUGUIä¼˜åŒ–-ç½‘æ ¼åˆå¹¶æµ…è°ˆUGUIä¼˜åŒ–-ç½‘æ ¼é‡å»ºUGUIç ”ç©¶é™¢ä¹‹æ‰¾åˆ°å…·ä½“æŸä¸ªå¼•èµ·äº†ç½‘æ ¼é‡å»ºçš„UIå…ƒç´ \n","categories":["Unity"],"tags":["UGUI"]},{"title":"Unity é¢„åŠ è½½ç³»ç»Ÿè®¾è®¡ä¸å®ç°","url":"/2025/07/14/Unity_Preload_System_Design_and_Implementation/","content":"æ¦‚è¿°æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªå¾®ä¿¡å°æ¸¸æˆï¼Œå› ä¸ºæ˜¯ 3D + å…³å¡åˆ¶çš„ï¼Œå¹¶ä¸”å¸Œæœ›ä¿è¯ä¸€ä¸ªæµç•…çš„æ¸¸æˆä½“éªŒï¼Œå¸Œæœ›åœ¨å…³å¡åˆ‡æ¢çš„æ—¶å€™æ²¡æœ‰ loading è¿‡ç¨‹ï¼Œå› æ­¤è®¾è®¡äº†ä¸€ä¸ªé¢„åŠ è½½ç³»ç»Ÿã€‚\nç³»ç»Ÿæ¶æ„è®¾è®¡æ ¸å¿ƒç»„ä»¶é¢„åŠ è½½ç³»ç»Ÿä¸»è¦ç”±ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶æ„æˆï¼š\n\nPreloadConfig - é¢„åŠ è½½é…ç½®ç±»\nPreloadPoolItem - é¢„åŠ è½½æ± é¡¹ç›®ç±»\nPreloadManager - é¢„åŠ è½½ç®¡ç†å™¨ï¼ˆæ ¸å¿ƒï¼‰\n\nè®¾è®¡åŸåˆ™\nä½ GC è®¾è®¡ï¼šé¿å…é¢‘ç¹çš„å†…å­˜åˆ†é…ï¼Œé‡‡ç”¨å¯¹è±¡æ± å¤ç”¨æœºåˆ¶\nå¼‚æ­¥åŠ è½½ï¼šä½¿ç”¨ UniTask å®ç°å¼‚æ­¥åŠ è½½ï¼Œé¿å…ä¸»çº¿ç¨‹å¡é¡¿\næŒ‰éœ€å¯åŠ¨ï¼šåç¨‹æŒ‰éœ€å¯åŠ¨ï¼Œé¿å…ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—\næ™ºèƒ½æ¸…ç†ï¼šè‡ªåŠ¨æ¸…ç†é•¿æ—¶é—´æœªä½¿ç”¨çš„å¯¹è±¡\n\næ ¸å¿ƒåŠŸèƒ½å®ç°1. é¢„åŠ è½½é…ç½®ç³»ç»Ÿ[System.Serializable]public class PreloadConfig&#123;    public string location;           // èµ„æºè·¯å¾„    public int preloadCount = 1;      // é¢„åŠ è½½æ•°é‡    public int priority = 0;          // ä¼˜å…ˆçº§    public bool autoExpand = false;   // è‡ªåŠ¨æ‰©å®¹    public int maxCount = 10;         // æœ€å¤§æ•°é‡é™åˆ¶&#125;\n\né…ç½®ç³»ç»Ÿæ”¯æŒï¼š\n\nçµæ´»çš„é¢„åŠ è½½æ•°é‡æ§åˆ¶\nä¼˜å…ˆçº§æ’åºæœºåˆ¶\nè‡ªåŠ¨æ‰©å®¹åŠŸèƒ½\næœ€å¤§æ•°é‡é™åˆ¶\n\n2. å¯¹è±¡æ± é¡¹ç›®ç®¡ç†public class PreloadPoolItem&#123;    public GameObject gameObject;    public bool isInUse;    public float createTime;    public float lastUseTime;    public int useCount;&#125;\n\næ¯ä¸ªæ± é¡¹ç›®åŒ…å«ï¼š\n\nå¯¹è±¡å¼•ç”¨å’Œä½¿ç”¨çŠ¶æ€\nåˆ›å»ºæ—¶é—´å’Œæœ€åä½¿ç”¨æ—¶é—´\nä½¿ç”¨æ¬¡æ•°ç»Ÿè®¡\n\n3. é¢„åŠ è½½æœºåˆ¶ç³»ç»Ÿé‡‡ç”¨é˜Ÿåˆ—å¼é¢„åŠ è½½ï¼Œæ”¯æŒï¼š\n// æ·»åŠ é¢„åŠ è½½é…ç½®public void AddPreloadConfig(PreloadConfig config)&#123;    _preloadQueue.Enqueue(config);    StartPreloadCoroutineIfNeeded();&#125;// æŒ‰éœ€å¯åŠ¨é¢„åŠ è½½åç¨‹private void StartPreloadCoroutineIfNeeded()&#123;    if (!_isPreloadCoroutineRunning &amp;&amp; _preloadQueue.Count &gt; 0)    &#123;        _isPreloadCoroutineRunning = true;        PreloadCoroutine().Forget();    &#125;&#125;\n\n4. å¯¹è±¡è·å–ä¸å½’è¿˜// ä»æ± ä¸­è·å–å¯¹è±¡public GameObject GetFromPool(string location, Transform parent = null)&#123;    if (!_preloadPools.TryGetValue(location, out var pool))        return null;    foreach (var item in pool)    &#123;        if (!item.isInUse)        &#123;            item.isInUse = true;            item.useCount++;            item.lastUseTime = Time.time;            var go = item.gameObject;            go.SetActive(true);            // é‡ç½®TransformçŠ¶æ€            go.transform.localPosition = Vector3.zero;            go.transform.localRotation = Quaternion.identity;            go.transform.localScale = Vector3.one;            return go;        &#125;    &#125;    return null;&#125;\n\næ€§èƒ½ä¼˜åŒ–ç­–ç•¥1. åˆ†å¸§åŠ è½½// æ¯åŠ è½½ä¸€å®šæ•°é‡åç­‰å¾…ä¸€å¸§if (i % maxLoadPerFrame == maxLoadPerFrame - 1)&#123;    await UniTask.Yield();&#125;\n\né€šè¿‡æ§åˆ¶æ¯å¸§æœ€å¤§åŠ è½½æ•°é‡ï¼Œé¿å…åŠ è½½è¿‡ç¨‹ä¸­çš„å¡é¡¿ã€‚\n2. è‡ªåŠ¨æ¸…ç†æœºåˆ¶private void CleanupIdleObjects()&#123;    var currentTime = Time.time;    foreach (var item in pool)    &#123;        if (!item.isInUse &amp;&amp; (currentTime - item.createTime) &gt; maxIdleTime)        &#123;            // æ¸…ç†é•¿æ—¶é—´æœªä½¿ç”¨çš„å¯¹è±¡            itemsToRemove.Add(item);        &#125;    &#125;&#125;\n\nå®šæœŸæ¸…ç†é•¿æ—¶é—´æœªä½¿ç”¨çš„å¯¹è±¡ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚\n3. åç¨‹çŠ¶æ€ç®¡ç†private bool _isPreloadCoroutineRunning = false;private bool _isCleanupCoroutineRunning = false;\n\né€šè¿‡çŠ¶æ€æ ‡è®°é¿å…é‡å¤å¯åŠ¨åç¨‹ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚\nè°ƒè¯•ä¸ç›‘æ§ç³»ç»Ÿæä¾›å®Œæ•´çš„è°ƒè¯•ä¿¡æ¯ï¼š\npublic class PreloadManagerDebugInfo&#123;    public int totalPoolCount;    public int totalObjectCount;    public int inUseCount;    public int queueCount;    public bool isPreloadCoroutineRunning;    public bool isCleanupCoroutineRunning;    public List&lt;PreloadPoolDebugInfo&gt; pools;&#125;\n\næ”¯æŒï¼š\n\nå®æ—¶æ± çŠ¶æ€ç›‘æ§\nå¯¹è±¡ä½¿ç”¨æƒ…å†µç»Ÿè®¡\nåç¨‹è¿è¡ŒçŠ¶æ€è·Ÿè¸ª\nè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯è¾“å‡º\n\nä½¿ç”¨ç¤ºä¾‹åŸºæœ¬ä½¿ç”¨// æ·»åŠ é¢„åŠ è½½é…ç½®var config = new PreloadConfig(&quot;UI/Button&quot;, 5, 1);PreloadManager.Instance.AddPreloadConfig(config);// è·å–é¢„åŠ è½½å¯¹è±¡var button = PreloadManager.Instance.GetFromPool(&quot;UI/Button&quot;, parent);if (button == null)&#123;    // å›é€€åˆ°ç›´æ¥åŠ è½½    button = await ResourceModule.Instance.LoadGameObjectAsync(&quot;UI/Button&quot;, parent);&#125;\n\næ‰¹é‡é¢„åŠ è½½var configs = new List&lt;PreloadConfig&gt;&#123;    new PreloadConfig(&quot;UI/Button&quot;, 10, 1),    new PreloadConfig(&quot;Effect/Explosion&quot;, 5, 2),    new PreloadConfig(&quot;Audio/BGM&quot;, 3, 0)&#125;;PreloadManager.Instance.AddPreloadConfigs(configs);\n\nç«‹å³é¢„åŠ è½½// ç«‹å³é¢„åŠ è½½æŒ‡å®šèµ„æºawait PreloadManager.Instance.PreloadImmediately(&quot;UI/Dialog&quot;, 3);\n\nå®Œæ•´ä»£ç å¹¶ä¸èƒ½å¤åˆ¶ç²˜è´´ç›´æ¥ä½¿ç”¨ï¼Œä»£ç åªåšç¤ºä¾‹\nusing System;using System.Collections.Generic;using System.Linq;using Cysharp.Threading.Tasks;using UnityEngine;namespace EF&#123;    /// &lt;summary&gt;    /// é¢„åŠ è½½é¡¹é…ç½®    /// &lt;/summary&gt;    [System.Serializable]    public class PreloadConfig    &#123;        public string location;           // èµ„æºè·¯å¾„        public int preloadCount = 1;      // é¢„åŠ è½½æ•°é‡        public int priority = 0;          // ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå¤§è¶Šä¼˜å…ˆ        public bool autoExpand = false;   // æ˜¯å¦è‡ªåŠ¨æ‰©å®¹        public int maxCount = 10;         // æœ€å¤§æ•°é‡é™åˆ¶        public PreloadConfig(string location, int preloadCount = 1, int priority = 0)        &#123;            this.location = location;            this.preloadCount = preloadCount;            this.priority = priority;        &#125;    &#125;    /// &lt;summary&gt;    /// é¢„åŠ è½½æ± é¡¹ç›®    /// &lt;/summary&gt;    public class PreloadPoolItem    &#123;        public GameObject gameObject;        public bool isInUse;        public float createTime;        public float lastUseTime;        public int useCount;        public PreloadPoolItem(GameObject go)        &#123;            gameObject = go;            isInUse = false;            createTime = Time.time;            lastUseTime = Time.time;            useCount = 0;        &#125;    &#125;    /// &lt;summary&gt;    /// é¢„åŠ è½½ç®¡ç†å™¨    /// &lt;/summary&gt;    public class PreloadManager : BehaviourSingleton&lt;PreloadManager&gt;    &#123;        [Header(&quot;é¢„åŠ è½½è®¾ç½®&quot;)]        [SerializeField] private int maxLoadPerFrame = 1;           // æ¯å¸§æœ€å¤§åŠ è½½æ•°é‡        [SerializeField] private float loadInterval = 0.016f;       // åŠ è½½é—´éš”ï¼ˆç§’ï¼‰        [SerializeField] private bool enableAutoCleanup = false;     // æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ¸…ç†        [SerializeField] private float cleanupInterval = 60f;       // æ¸…ç†é—´éš”ï¼ˆç§’ï¼‰        [SerializeField] private float maxIdleTime = 300f;          // æœ€å¤§ç©ºé—²æ—¶é—´ï¼ˆç§’ï¼‰        // é¢„åŠ è½½æ± å­—å…¸ location -&gt; List&lt;PreloadPoolItem&gt;        private Dictionary&lt;string, List&lt;PreloadPoolItem&gt;&gt; _preloadPools = new();        // é¢„åŠ è½½é˜Ÿåˆ—        private Queue&lt;PreloadConfig&gt; _preloadQueue = new();        // æ­£åœ¨é¢„åŠ è½½çš„ä½ç½®é›†åˆ        private HashSet&lt;string&gt; _loadingLocations = new();        // é¢„åŠ è½½æ ¹èŠ‚ç‚¹        private Transform _preloadRoot;        // åç¨‹çŠ¶æ€è·Ÿè¸ª        private bool _isPreloadCoroutineRunning = false;        private bool _isCleanupCoroutineRunning = false;        // æ€§èƒ½ç»Ÿè®¡        public int TotalPreloadedCount =&gt; GetTotalPreloadedCount();        public int InUseCount =&gt; GetInUseCount();        private void Awake()        &#123;            if (_instance == null)            &#123;                _instance = this;                InitializePreloadRoot();            &#125;            else if (_instance != this)            &#123;                Destroy(gameObject);            &#125;        &#125;        private void InitializePreloadRoot()        &#123;            var rootGO = new GameObject(&quot;PreloadPool&quot;);            rootGO.transform.SetParent(transform);            rootGO.SetActive(false); // éšè—é¢„åŠ è½½å¯¹è±¡            _preloadRoot = rootGO.transform;        &#125;        /// &lt;summary&gt;        /// å¯åŠ¨é¢„åŠ è½½åç¨‹ï¼ˆæŒ‰éœ€å¯åŠ¨ï¼‰        /// &lt;/summary&gt;        private void StartPreloadCoroutineIfNeeded()        &#123;            if (!_isPreloadCoroutineRunning &amp;&amp; _preloadQueue.Count &gt; 0)            &#123;                _isPreloadCoroutineRunning = true;                PreloadCoroutine().Forget();                Log.Info(&quot;Started PreloadCoroutine&quot;);            &#125;        &#125;        /// &lt;summary&gt;        /// å¯åŠ¨æ¸…ç†åç¨‹ï¼ˆæŒ‰éœ€å¯åŠ¨ï¼‰        /// &lt;/summary&gt;        private void StartCleanupCoroutineIfNeeded()        &#123;            if (enableAutoCleanup &amp;&amp; !_isCleanupCoroutineRunning &amp;&amp; HasObjectsToCleanup())            &#123;                _isCleanupCoroutineRunning = true;                CleanupCoroutine().Forget();                Log.Info(&quot;Started CleanupCoroutine&quot;);            &#125;        &#125;        /// &lt;summary&gt;        /// æ£€æŸ¥æ˜¯å¦æœ‰éœ€è¦æ¸…ç†çš„å¯¹è±¡        /// &lt;/summary&gt;        private bool HasObjectsToCleanup()        &#123;            return _preloadPools.Count &gt; 0 &amp;&amp; TotalPreloadedCount &gt; 0;        &#125;        #region å…¬å…±API        /// &lt;summary&gt;        /// æ·»åŠ é¢„åŠ è½½é…ç½®        /// &lt;/summary&gt;        public void AddPreloadConfig(PreloadConfig config)        &#123;            if (string.IsNullOrEmpty(config.location))            &#123;                Log.Warning(&quot;PreloadConfig location is null or empty&quot;);                return;            &#125;            // å¦‚æœå·²ç»åœ¨åŠ è½½é˜Ÿåˆ—ä¸­ï¼Œè·³è¿‡            if (_loadingLocations.Contains(config.location))            &#123;                return;            &#125;            _preloadQueue.Enqueue(config);            Log.Info($&quot;Added preload config for &#123;config.location&#125;, count: &#123;config.preloadCount&#125;&quot;);            // æ£€æŸ¥æ˜¯å¦éœ€è¦å¯åŠ¨é¢„åŠ è½½åç¨‹            StartPreloadCoroutineIfNeeded();        &#125;        /// &lt;summary&gt;        /// æ‰¹é‡æ·»åŠ é¢„åŠ è½½é…ç½®        /// &lt;/summary&gt;        public void AddPreloadConfigs(List&lt;PreloadConfig&gt; configs)        &#123;            foreach (var config in configs)            &#123;                AddPreloadConfig(config);            &#125;        &#125;        /// &lt;summary&gt;        /// å°è¯•ä»é¢„åŠ è½½æ± è·å–å¯¹è±¡        /// &lt;/summary&gt;        public GameObject GetFromPool(string location, Transform parent = null)        &#123;            if (!_preloadPools.TryGetValue(location, out var pool) || pool.Count == 0)            &#123;                return null;            &#125;            List&lt;PreloadPoolItem&gt; items = new List&lt;PreloadPoolItem&gt;();            // æŸ¥æ‰¾æœªä½¿ç”¨çš„å¯¹è±¡            foreach (var item in pool)            &#123;                if (!item.isInUse)                &#123;                    item.isInUse = true;                    item.useCount++;                    item.lastUseTime = Time.time;                    var go = item.gameObject;                    go.SetActive(true);                    if (parent != null)                    &#123;                        go.transform.SetParent(parent);                    &#125;                    else                    &#123;                        go.transform.SetParent(null);                    &#125;                    // é‡ç½®ä½ç½®å’Œæ—‹è½¬                    go.transform.localPosition = Vector3.zero;                    go.transform.localRotation = Quaternion.identity;                    go.transform.localScale = Vector3.one;                    Log.Info($&quot;ä»é¢„åŠ è½½æ± è·å–å¯¹è±¡: &#123;location&#125;&quot;);                    // æ£€æŸ¥æ˜¯å¦éœ€è¦å¯åŠ¨æ¸…ç†åç¨‹                    StartCleanupCoroutineIfNeeded();                    items.Add(item);                    return go;                &#125;            &#125;            // ä½¿ç”¨åç›´æ¥ç›´æ¥ä¸¢å¼ƒï¼Œä¸ä¿ç•™å¼•ç”¨ã€‚é˜²æ­¢å¤–éƒ¨destroyå¯¼è‡´æ— æ³•å›æ”¶            foreach (var item in items)            &#123;                _preloadPools[location].Remove(item);            &#125;            return null;        &#125;        /// &lt;summary&gt;        /// å½’è¿˜å¯¹è±¡åˆ°é¢„åŠ è½½æ±         /// &lt;/summary&gt;        public void ReturnToPool(string location, GameObject go)        &#123;            // å¦‚æœå½’è¿˜å¯¹è±¡ æ–°å¢åˆ°é¢„åŠ è½½æ±             if (_preloadPools.TryGetValue(location, out var pool))            &#123;                pool.Add(new PreloadPoolItem(go));            &#125;        &#125;        /// &lt;summary&gt;        /// ç«‹å³é¢„åŠ è½½æŒ‡å®šèµ„æº        /// &lt;/summary&gt;        public async UniTask PreloadImmediately(string location, int count = 1)        &#123;            var config = new PreloadConfig(location, count, int.MaxValue);            await PreloadAsset(config);            // é¢„åŠ è½½å®Œæˆåæ£€æŸ¥æ˜¯å¦éœ€è¦å¯åŠ¨æ¸…ç†åç¨‹            StartCleanupCoroutineIfNeeded();        &#125;        /// &lt;summary&gt;        /// æ¸…ç†æŒ‡å®šèµ„æºçš„é¢„åŠ è½½æ±         /// &lt;/summary&gt;        public void ClearPool(string location)        &#123;            if (_preloadPools.TryGetValue(location, out var pool))            &#123;                foreach (var item in pool)                &#123;                    if (item.gameObject != null)                    &#123;                        Destroy(item.gameObject);                    &#125;                &#125;                pool.Clear();                _preloadPools.Remove(location);                Log.Info($&quot;Cleared preload pool: &#123;location&#125;&quot;);            &#125;        &#125;        /// &lt;summary&gt;        /// æ¸…ç†æ‰€æœ‰é¢„åŠ è½½æ±         /// &lt;/summary&gt;        public void ClearAllPools()        &#123;            foreach (var kvp in _preloadPools)            &#123;                foreach (var item in kvp.Value)                &#123;                    if (item.gameObject != null)                    &#123;                        Destroy(item.gameObject);                    &#125;                &#125;            &#125;            _preloadPools.Clear();            _loadingLocations.Clear();            Log.Info(&quot;Cleared all preload pools&quot;);        &#125;        /// &lt;summary&gt;        /// è·å–æ± ä¸­å¯ç”¨å¯¹è±¡æ•°é‡        /// &lt;/summary&gt;        public int GetAvailableCount(string location)        &#123;            if (!_preloadPools.TryGetValue(location, out var pool))                return 0;            int count = 0;            foreach (var item in pool)            &#123;                if (!item.isInUse)                    count++;            &#125;            return count;        &#125;        /// &lt;summary&gt;        /// è·å–æ± ä¸­æ€»å¯¹è±¡æ•°é‡        /// &lt;/summary&gt;        public int GetTotalCount(string location)        &#123;            return _preloadPools.TryGetValue(location, out var pool) ? pool.Count : 0;        &#125;        #endregion        #region å†…éƒ¨é€»è¾‘        private async UniTaskVoid PreloadCoroutine()        &#123;            while (_preloadQueue.Count &gt; 0)            &#123;                var config = _preloadQueue.Dequeue();                await PreloadAsset(config);                // æ§åˆ¶åŠ è½½é¢‘ç‡                await UniTask.Delay((int)(loadInterval * 1000));            &#125;            // é˜Ÿåˆ—ä¸ºç©ºï¼Œåœæ­¢åç¨‹            _isPreloadCoroutineRunning = false;            Log.Info(&quot;PreloadCoroutine stopped - queue is empty&quot;);            // é¢„åŠ è½½å®Œæˆåæ£€æŸ¥æ˜¯å¦éœ€è¦å¯åŠ¨æ¸…ç†åç¨‹            StartCleanupCoroutineIfNeeded();        &#125;        private async UniTask PreloadAsset(PreloadConfig config)        &#123;            if (_loadingLocations.Contains(config.location))                return;            _loadingLocations.Add(config.location);            try            &#123;                if (!_preloadPools.ContainsKey(config.location))                &#123;                    _preloadPools[config.location] = new List&lt;PreloadPoolItem&gt;();                &#125;                var pool = _preloadPools[config.location];                int currentCount = pool.Count;                int targetCount = config.preloadCount;                // å¦‚æœå½“å‰æ•°é‡å·²ç»è¶³å¤Ÿï¼Œè·³è¿‡                if (currentCount &gt;= targetCount)                &#123;                    Log.Info($&quot;Preload pool already has enough objects: &#123;config.location&#125; (&#123;currentCount&#125;/&#123;targetCount&#125;)&quot;);                    return;                &#125;                int loadCount = targetCount - currentCount;                Log.Info($&quot;Start preloading &#123;config.location&#125;, count: &#123;loadCount&#125;&quot;);                for (int i = 0; i &lt; loadCount; i++)                &#123;                    try                    &#123;                        var go = await ResourceModule.Instance.LoadGameObjectAsync(config.location, _preloadRoot);                        if (go != null)                        &#123;                            go.SetActive(false);                            var poolItem = new PreloadPoolItem(go);                            pool.Add(poolItem);                        &#125;                    &#125;                    catch (Exception e)                    &#123;                        Log.Error($&quot;Failed to preload &#123;config.location&#125;: &#123;e.Message&#125;&quot;);                    &#125;                    // æ¯åŠ è½½ä¸€å®šæ•°é‡åç­‰å¾…ä¸€å¸§ï¼Œé¿å…å¡é¡¿                    if (i % maxLoadPerFrame == maxLoadPerFrame - 1)                    &#123;                        await UniTask.Yield();                    &#125;                &#125;                Log.Info($&quot;Preload completed: &#123;config.location&#125;, loaded: &#123;loadCount&#125;&quot;);            &#125;            finally            &#123;                _loadingLocations.Remove(config.location);            &#125;        &#125;        private async UniTaskVoid CleanupCoroutine()        &#123;            while (HasObjectsToCleanup())            &#123;                await UniTask.Delay((int)(cleanupInterval * 1000));                if (HasObjectsToCleanup())                &#123;                    CleanupIdleObjects();                &#125;            &#125;            // æ²¡æœ‰éœ€è¦æ¸…ç†çš„å¯¹è±¡ï¼Œåœæ­¢åç¨‹            _isCleanupCoroutineRunning = false;            Log.Info(&quot;CleanupCoroutine stopped - no objects to cleanup&quot;);        &#125;        private void CleanupIdleObjects()        &#123;            var currentTime = Time.time;            var locationsToRemove = new List&lt;string&gt;();            foreach (var kvp in _preloadPools)            &#123;                var location = kvp.Key;                var pool = kvp.Value;                var itemsToRemove = new List&lt;PreloadPoolItem&gt;();                foreach (var item in pool)                &#123;                    // æ¸…ç†é•¿æ—¶é—´æœªä½¿ç”¨çš„å¯¹è±¡                    if (!item.isInUse &amp;&amp; (currentTime - item.createTime) &gt; maxIdleTime)                    &#123;                        itemsToRemove.Add(item);                    &#125;                &#125;                foreach (var item in itemsToRemove)                &#123;                    pool.Remove(item);                    if (item.gameObject != null)                    &#123;                        Destroy(item.gameObject);                    &#125;                &#125;                if (pool.Count == 0)                &#123;                    locationsToRemove.Add(location);                &#125;            &#125;            foreach (var location in locationsToRemove)            &#123;                _preloadPools.Remove(location);            &#125;            if (locationsToRemove.Count &gt; 0)            &#123;                Log.Info($&quot;Cleanup completed, removed &#123;locationsToRemove.Count&#125; empty pools&quot;);            &#125;        &#125;        private int GetTotalPreloadedCount()        &#123;            int total = 0;            foreach (var pool in _preloadPools.Values)            &#123;                total += pool.Count;            &#125;            return total;        &#125;        private int GetInUseCount()        &#123;            int inUse = 0;            foreach (var pool in _preloadPools.Values)            &#123;                foreach (var item in pool)                &#123;                    if (item.isInUse)                        inUse++;                &#125;            &#125;            return inUse;        &#125;        #endregion        private void OnDestroy()        &#123;            _isPreloadCoroutineRunning = false;            _isCleanupCoroutineRunning = false;            ClearAllPools();        &#125;        #region Debugä¿¡æ¯        /// &lt;summary&gt;        /// é¢„åŠ è½½æ± è°ƒè¯•ä¿¡æ¯        /// &lt;/summary&gt;        public class PreloadPoolDebugInfo        &#123;            public string location;            public int totalCount;            public int availableCount;            public int inUseCount;            public List&lt;PreloadItemDebugInfo&gt; items;            public PreloadConfig config;        &#125;        /// &lt;summary&gt;        /// é¢„åŠ è½½é¡¹è°ƒè¯•ä¿¡æ¯        /// &lt;/summary&gt;        public class PreloadItemDebugInfo        &#123;            public bool isInUse;            public float createTime;            public float lastUseTime;            public int useCount;            public string gameObjectName;            public bool isGameObjectNull;        &#125;        /// &lt;summary&gt;        /// é¢„åŠ è½½ç®¡ç†å™¨è°ƒè¯•ä¿¡æ¯        /// &lt;/summary&gt;        public class PreloadManagerDebugInfo        &#123;            public int totalPoolCount;            public int totalObjectCount;            public int inUseCount;            public int queueCount;            public bool isPreloadCoroutineRunning;            public bool isCleanupCoroutineRunning;            public List&lt;PreloadPoolDebugInfo&gt; pools;            public List&lt;string&gt; loadingLocations;            public bool enableAutoCleanup;            public float cleanupInterval;            public float maxIdleTime;        &#125;        /// &lt;summary&gt;        /// è·å–è¯¦ç»†è°ƒè¯•ä¿¡æ¯        /// &lt;/summary&gt;        public PreloadManagerDebugInfo GetDetailedDebugInfo()        &#123;            var info = new PreloadManagerDebugInfo            &#123;                totalPoolCount = _preloadPools.Count,                totalObjectCount = TotalPreloadedCount,                inUseCount = InUseCount,                queueCount = _preloadQueue.Count,                isPreloadCoroutineRunning = _isPreloadCoroutineRunning,                isCleanupCoroutineRunning = _isCleanupCoroutineRunning,                pools = new List&lt;PreloadPoolDebugInfo&gt;(),                loadingLocations = _loadingLocations.ToList(),                enableAutoCleanup = enableAutoCleanup,                cleanupInterval = cleanupInterval,                maxIdleTime = maxIdleTime            &#125;;            foreach (var kvp in _preloadPools)            &#123;                var poolInfo = new PreloadPoolDebugInfo                &#123;                    location = kvp.Key,                    totalCount = kvp.Value.Count,                    availableCount = GetAvailableCount(kvp.Key),                    inUseCount = kvp.Value.Count(item =&gt; item.isInUse),                    items = new List&lt;PreloadItemDebugInfo&gt;()                &#125;;                foreach (var item in kvp.Value)                &#123;                    var itemInfo = new PreloadItemDebugInfo                    &#123;                        isInUse = item.isInUse,                        createTime = item.createTime,                        lastUseTime = item.lastUseTime,                        useCount = item.useCount,                        gameObjectName = item.gameObject != null ? item.gameObject.name : &quot;null&quot;,                        isGameObjectNull = item.gameObject == null                    &#125;;                    poolInfo.items.Add(itemInfo);                &#125;                info.pools.Add(poolInfo);            &#125;            return info;        &#125;        /// &lt;summary&gt;        /// è·å–ç®€å•è°ƒè¯•ä¿¡æ¯ï¼ˆå‘åå…¼å®¹ï¼‰        /// &lt;/summary&gt;        public string GetDebugInfo()        &#123;            var info = $&quot;é¢„åŠ è½½æ± ç»Ÿè®¡:\\n&quot;;            info += $&quot;æ€»æ± æ•°é‡: &#123;_preloadPools.Count&#125;\\n&quot;;            info += $&quot;æ€»å¯¹è±¡æ•°: &#123;TotalPreloadedCount&#125;\\n&quot;;            info += $&quot;ä½¿ç”¨ä¸­: &#123;InUseCount&#125;\\n&quot;;            info += $&quot;æ’é˜Ÿä¸­: &#123;_preloadQueue.Count&#125;\\n&quot;;            info += $&quot;é¢„åŠ è½½åç¨‹è¿è¡Œä¸­: &#123;_isPreloadCoroutineRunning&#125;\\n&quot;;            info += $&quot;æ¸…ç†åç¨‹è¿è¡Œä¸­: &#123;_isCleanupCoroutineRunning&#125;\\n\\n&quot;;            foreach (var kvp in _preloadPools)            &#123;                var available = GetAvailableCount(kvp.Key);                var total = kvp.Value.Count;                info += $&quot;&#123;kvp.Key&#125;: &#123;available&#125;/&#123;total&#125;\\n&quot;;            &#125;            return info;        &#125;        /// &lt;summary&gt;        /// è·å–æ‰€æœ‰æ± çš„åç§°åˆ—è¡¨        /// &lt;/summary&gt;        public List&lt;string&gt; GetAllPoolNames()        &#123;            return _preloadPools.Keys.ToList();        &#125;        /// &lt;summary&gt;        /// è·å–æŒ‡å®šæ± çš„è¯¦ç»†ä¿¡æ¯        /// &lt;/summary&gt;        public PreloadPoolDebugInfo GetPoolDebugInfo(string location)        &#123;            if (!_preloadPools.TryGetValue(location, out var pool))                return null;            var poolInfo = new PreloadPoolDebugInfo            &#123;                location = location,                totalCount = pool.Count,                availableCount = GetAvailableCount(location),                inUseCount = pool.Count(item =&gt; item.isInUse),                items = new List&lt;PreloadItemDebugInfo&gt;()            &#125;;            foreach (var item in pool)            &#123;                var itemInfo = new PreloadItemDebugInfo                &#123;                    isInUse = item.isInUse,                    createTime = item.createTime,                    lastUseTime = item.lastUseTime,                    useCount = item.useCount,                    gameObjectName = item.gameObject != null ? item.gameObject.name : &quot;null&quot;,                    isGameObjectNull = item.gameObject == null                &#125;;                poolInfo.items.Add(itemInfo);            &#125;            return poolInfo;        &#125;        #endregion    &#125;&#125;\n\næ€»ç»“è¿™ä¸ªé¢„åŠ è½½ç³»ç»Ÿé€šè¿‡ä»¥ä¸‹ç‰¹æ€§å®ç°äº†é«˜æ•ˆçš„èµ„æºç®¡ç†ï¼š\n\nä½ GC è®¾è®¡ï¼šå¯¹è±¡æ± å¤ç”¨æœºåˆ¶å‡å°‘å†…å­˜åˆ†é…\nå¼‚æ­¥åŠ è½½ï¼šUniTask ç¡®ä¿ä¸»çº¿ç¨‹æµç•…\næ™ºèƒ½ç®¡ç†ï¼šæŒ‰éœ€å¯åŠ¨åç¨‹ï¼Œè‡ªåŠ¨æ¸…ç†é—²ç½®å¯¹è±¡\nçµæ´»é…ç½®ï¼šæ”¯æŒä¼˜å…ˆçº§ã€æ•°é‡é™åˆ¶ç­‰å¤šç§é…ç½®\nå®Œæ•´ç›‘æ§ï¼šæä¾›è¯¦ç»†çš„è°ƒè¯•å’Œç›‘æ§ä¿¡æ¯\n\n","categories":["Unity"],"tags":["ä¼˜åŒ–","Unity"]},{"title":"YooAssetsæºç è§£è¯»-åˆå§‹åŒ–","url":"/2025/08/01/YooAssets_Source_Code_Reading_Initialization/","content":"YooAssetsæºç è§£è¯» - åˆå§‹åŒ–æœ€è¿‘æ‰“å®ŒåŒ…ï¼Œåˆšå¥½æœ‰ç©ºï¼Œçœ‹ä¸€ä¸‹é¡¹ç›®ä¸­ä½¿ç”¨çš„ YooAsset æºç ï¼Œè¿™éƒ¨åˆ†æ˜¯å…³äºåˆå§‹åŒ–çš„ä»£ç ã€‚\nYooAsset.Initialize()åˆå§‹åŒ–ï¼Œä¸»è¦è®°å½• YooAsset åœ¨åˆå§‹åŒ–æ—¶åšäº†ä»€ä¹ˆ\nå…³é”®ç±»\nYooAsset.cs\nYooAssetDriver.cs\nOperationSystem.cs\n\næµç¨‹å›¾flowchart TD\n    A[\"YooAsset\"] --> B[\"Initialize\"]\n    B --> YooAssetDriver[\"YooAssetDriver\"]\n    YooAssetDriver --> Update[\"Update\"]\n    Update --> A\n    A --> OperationSystemUpdate[\"OperationSystemUpdate\"]\n    B --> OperationSystem[\"OperationSystem\"]\n    OperationSystem --> Initialize[\"Initialize\"]\n    OperationSystem --> OperationSystemUpdate\n\n    %% æ ·å¼å®šä¹‰\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:2px,color:#000000\n    style YooAssetDriver fill:#45b7d1,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style Update fill:#f9ca24,stroke:#ffffff,stroke-width:2px,color:#000000\n    style OperationSystem fill:#6c5ce7,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style OperationSystemUpdate fill:#a29bfe,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style Initialize fill:#fd79a8,stroke:#ffffff,stroke-width:2px,color:#ffffff\n\nåˆå§‹åŒ–åŒ…YooAsset åœ¨åˆå§‹åŒ–æ—¶ä¼šåˆ›å»ºä¸€ä¸ªèµ„æºåŒ…ï¼ˆResourcePackageï¼‰ï¼Œå¹¶è®¾ç½®å…¶è¿è¡Œæ¨¡å¼ã€‚\nå…³é”®ç±»\nYooAsset.cs\nResourcePackage.cs\n\næµç¨‹å›¾flowchart TD\n    A[\"YooAsset.CreatePackage\"] -->|new| ResourcePackage[\"ResourcePackage\"]\n\n    %% æ ·å¼å®šä¹‰\n    style A fill:#00d2d3,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style ResourcePackage fill:#ff9ff3,stroke:#ffffff,stroke-width:2px,color:#000000\n\nåˆå§‹åŒ–èµ„æºè¿è¡Œæ¨¡å¼åˆå§‹åŒ–èµ„æºçš„è¿è¡Œæ¨¡å¼(OfflinePlayModeParameters, EditorSimulateModeParameters, HostPlayModeParameters, WebPlayModeParameters)ã€‚\nå…³é”®ç±»\nResourcePackage.cs\nPlayModeImpl.cs\nInitializeParameters.cs\n\næµç¨‹å›¾flowchart TD\n    F[\"FileSystemParameters\"]\n    A[\"ResourcePackage.InitializeAsync\"] --> AA[\"PlayModeImpl\"]\n\n    AA --> InitializationOperation[\"InitializationOperationåˆå§‹åŒ–æ“ä½œ\"]\n    InitializationOperation -.-> B[\"EditorSimulateModeParameters.InitializeAsync\"]\n    InitializationOperation -.-> C[\"OfflinePlayModeParameters.InitializeAsync\"]\n    InitializationOperation -.-> D[\"HostPlayModeParameters.InitializeAsync\"]\n    InitializationOperation -.-> E[\"WebPlayModeParameters.InitializeAsync\"]\n\n    %% æ ·å¼å®šä¹‰\n    style InitializationOperation fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style A fill:#ff3838,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style AA fill:#2ed573,stroke:#ffffff,stroke-width:2px,color:#000000\n    style B fill:#ffa502,stroke:#ffffff,stroke-width:2px,color:#000000\n    style C fill:#ffa502,stroke:#ffffff,stroke-width:2px,color:#000000\n    style D fill:#ffa502,stroke:#ffffff,stroke-width:2px,color:#000000\n    style E fill:#ffa502,stroke:#ffffff,stroke-width:2px,color:#000000\n\nç»§æ‰¿å…³ç³»å›¾flowchart LR\n    %% ç»§æ‰¿å…³ç³»æ¸…æ™°å±•ç¤º\n    InitializationOperation[\"InitializationOperationåˆå§‹åŒ–æ“ä½œ\"]\n    EditorSimulateModeParameters[\"EditorSimulateModeParametersç¼–è¾‘å™¨æ¨¡æ‹Ÿæ¨¡å¼å‚æ•°\"]\n    OfflinePlayModeParameters[\"OfflinePlayModeParametersç¦»çº¿è¿è¡Œæ¨¡å¼å‚æ•°\"]\n    HostPlayModeParameters[\"HostPlayModeParametersä¸»æœºè¿è¡Œæ¨¡å¼å‚æ•°\"]\n    WebPlayModeParameters[\"WebPlayModeParametersWebè¿è¡Œæ¨¡å¼å‚æ•°\"]\n\n    InitializationOperation -.->|æ´¾ç”Ÿ| EditorSimulateModeParameters\n    InitializationOperation -.->|æ´¾ç”Ÿ| OfflinePlayModeParameters\n    InitializationOperation -.->|æ´¾ç”Ÿ| HostPlayModeParameters\n    InitializationOperation -.->|æ´¾ç”Ÿ| WebPlayModeParameters\n\n    %% æ ·å¼å®šä¹‰\n    style InitializationOperation fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style EditorSimulateModeParameters fill:#ff6600,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style OfflinePlayModeParameters fill:#00ff88,stroke:#ffffff,stroke-width:2px,color:#000000\n    style HostPlayModeParameters fill:#ff4444,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style WebPlayModeParameters fill:#44ff44,stroke:#ffffff,stroke-width:2px,color:#000000\n\nè·å–èµ„æºç‰ˆæœ¬å…³é”®ç±»\nResourcePackage.cs\nOperationSystem.cs\nPlayModeImpl.cs\nRequestPackageVersionImplOperation.cs\nAsyncOperationBase.cs\nRequestPackageVersionOperation.cs\n\næµç¨‹å›¾éœ€è¦æ³¨æ„é»„è‰² YooAsset.Update æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åˆ†æ”¯,çœ‹åˆ°è¿™é‡Œç†è§£äº† AsyncOperationBase.Update å’Œ å„ä¸ªå¼‚æ­¥æ“ä½œçš„ InternalUpdate æ–¹æ³•çš„è°ƒç”¨å…³ç³»ã€‚åˆå§‹åŒ–ç›¸å…³ä»£ç å°±éç†è§£äº†ã€‚è¿™é‡Œç»™å‡ºä¸¤ç§è°ƒæ–¹å¼ã€‚\n\nOperationSystem.Update è°ƒç”¨ AsyncOperationBase.Update\n\n// OperationSystem.cspublic static void StartOperation(string packageName, AsyncOperationBase operation)&#123;    _newList.Add(operation); // æ³¨æ„è¿™ä¸ª_newList    operation.SetPackageName(packageName);    operation.StartOperation();&#125;/// &lt;summary&gt;/// æ›´æ–°å¼‚æ­¥æ“ä½œç³»ç»Ÿ/// &lt;/summary&gt;public static void Update()&#123;    // ç§»é™¤å·²ç»å®Œæˆçš„å¼‚æ­¥æ“ä½œ    // æ³¨æ„ï¼šç§»é™¤ä¸Šä¸€å¸§å®Œæˆçš„å¼‚æ­¥æ“ä½œï¼Œæ–¹ä¾¿è°ƒè¯•å™¨æ¥æ”¶åˆ°å®Œæ•´çš„ä¿¡æ¯ï¼    for (int i = _operations.Count - 1; i &gt;= 0; i--)    &#123;        AsyncOperationBase operation = _operations[i];        if (operation.IsFinish)            _operations.RemoveAt(i);    &#125;    // æ·»åŠ æ–°å¢çš„å¼‚æ­¥æ“ä½œ    if (_newList.Count &gt; 0)    &#123;        bool sorting = false;        foreach (AsyncOperationBase operation in _newList)        &#123;            if (operation.Priority &gt; 0)            &#123;                sorting = true;                break;            &#125;        &#125;        _operations.AddRange(_newList);        _newList.Clear();        // é‡æ–°æ’åºä¼˜å…ˆçº§        if (sorting)            _operations.Sort();    &#125;    // æ›´æ–°è¿›è¡Œä¸­çš„å¼‚æ­¥æ“ä½œ    _frameTime = _watch.ElapsedMilliseconds;    for (int i = 0; i &lt; _operations.Count; i++)    &#123;        if (IsBusy)            break;        var operation = _operations[i];        if (operation.IsFinish)            continue;        operation.UpdateOperation();    &#125;&#125;\n\n\nå­è¿›ç¨‹è°ƒç”¨\n\n// RequestPackageVersionOperation.cs è¿™ä¸ªUpdateç”± OperationSystem.Update è°ƒç”¨  internal override void InternalUpdate()        &#123;            if (_steps == ESteps.None || _steps == ESteps.Done)                return;            if (_steps == ESteps.RequestPackageVersion)            &#123;                if (_requestPackageVersionOp == null)                &#123;                    // è·å–ä¸»æ–‡ä»¶ç³»ç»Ÿ                    var mainFileSystem = _impl.GetMainFileSystem();                    // è¯·æ±‚åŒ…è£¹ç‰ˆæœ¬                    _requestPackageVersionOp = mainFileSystem.RequestPackageVersionAsync(_appendTimeTicks, _timeout);                    // å¼€å§‹æ“ä½œ                    _requestPackageVersionOp.StartOperation();                    AddChildOperation(_requestPackageVersionOp);                &#125;                // æ³¨æ„è¿™ä¸ª UpdateOperation è°ƒç”¨ å°±æ˜¯å­è¿›ç¨‹çš„ Update                _requestPackageVersionOp.UpdateOperation();                if (_requestPackageVersionOp.IsDone == false)                    return;                if (_requestPackageVersionOp.Status == EOperationStatus.Succeed)                &#123;                    _steps = ESteps.Done;                    PackageVersion = _requestPackageVersionOp.PackageVersion;                    Status = EOperationStatus.Succeed;                &#125;                else                &#123;                    _steps = ESteps.Done;                    Status = EOperationStatus.Failed;                    Error = _requestPackageVersionOp.Error;                &#125;            &#125;        &#125;\n\nflowchart TB\n    %% ========== è¯·æ±‚å‘èµ·å±‚ ==========\n    A[\"ResourcePackage.RequestPackageVersionAsync\"]\n\n    %% ========== ç³»ç»Ÿç®¡ç†å±‚ ==========\n    A --> B[\"PlayModeImpl.RequestPackageVersionAsync\"]\n    A --> C[\"OperationSystem.StartOperation\"]\n\n    %% ========== æ“ä½œåˆ›å»ºå±‚ ==========\n    B --> D[\"RequestPackageVersionImplOperation\"]\n    C --> EA[\"AsyncOperationBase.StartOperation\"]\n\n    %% ========== æ“ä½œæ‰§è¡Œå±‚ ==========\n    EA --> FA[\"RequestPackageVersionOperation.InternalStart\"]\n\n    %% ========== å¼‚æ­¥æ›´æ–°æµç¨‹ï¼ˆç‹¬ç«‹åˆ†æ”¯ï¼‰==========\n    G[\"YooAsset.Update\"] --> H[\"OperationSystem.Update\"]\n    H --> EB[\"AsyncOperationBase.Update\"]\n    EB --> FB[\"RequestPackageVersionOperation.InternalUpdate\"]\n    FB --> DA[\"RequestPackageVersionImplOperation.InternalUpdate\"]\n\n    %% æ ·å¼å®šä¹‰\n    classDef requestLayer fill:#ff4444,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    classDef systemLayer fill:#44ff44,stroke:#ffffff,stroke-width:2px,color:#000000\n    classDef operationLayer fill:#4444ff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    classDef updateLayer fill:#ffaa00,stroke:#ffffff,stroke-width:2px,color:#000000\n\n    class A requestLayer\n    class B,C systemLayer\n    class D,EA,FA operationLayer\n    class G,H,EB,FB,DA updateLayer\n\nç»§æ‰¿å…³ç³»å›¾flowchart LR\n    %% ç»§æ‰¿å…³ç³»æ¸…æ™°å±•ç¤º\n    AsyncOperationBase[\"AsyncOperationBaseå¼‚æ­¥æ“ä½œåŸºç±»\"]\n    RequestPackageVersionOperation[\"RequestPackageVersionOperationè¯·æ±‚åŒ…ç‰ˆæœ¬æ“ä½œ\"]\n    RequestPackageVersionImplOperation[\"RequestPackageVersionImplOperationè¯·æ±‚åŒ…ç‰ˆæœ¬å®ç°æ“ä½œ\"]\n\n    AsyncOperationBase -.->|æ´¾ç”Ÿ| RequestPackageVersionOperation\n    RequestPackageVersionOperation -.->|æ´¾ç”Ÿ| RequestPackageVersionImplOperation\n\n    %% æ ·å¼å®šä¹‰\n    style AsyncOperationBase fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style RequestPackageVersionOperation fill:#ff6600,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style RequestPackageVersionImplOperation fill:#00ff88,stroke:#ffffff,stroke-width:2px,color:#000000\n\næ›´æ–°èµ„æºæ¸…å•åŸºæœ¬ä¸Šå’Œè·å–èµ„æºç‰ˆæœ¬å·®ä¸å¤šçš„é€»è¾‘ã€‚ï¼ˆæ‡’äº†ï¼Œä¸å†™äº†ï¼‰ã€‚\n","categories":["Unity"],"tags":["YooAssets"]},{"title":"YooAssetæºç é˜…è¯»-Download","url":"/2025/08/25/YooAsset_Code_Reading_Download/","content":"ç»§ç»­ YooAsset çš„ä¸‹è½½ç³»ç»Ÿä»£ç ç ”ç©¶ï¼Œæœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åˆ›å»ºä¸‹è½½å™¨ç›¸å…³ä»£ç \nCreateResourceDownloaderByAllå…³é”®ç±»\nPlayModeImpl.cs  \nResourceDownloaderOperation.cs\nDownloaderOperation.cs\nBundleInfo.cs\n\nCreateResourceDownloaderByAll æ–¹æ³•ç”¨äºåˆ›å»ºä¸‹è½½æ‰€æœ‰éœ€è¦æ›´æ–°èµ„æºçš„ä¸‹è½½å™¨ã€‚\nå…³é”®æºä»£ç // PlayModeImpl.cs Line 110-115ResourceDownloaderOperation IPlayMode.CreateResourceDownloaderByAll(int downloadingMaxNumber, int failedTryAgain)&#123;    List&lt;BundleInfo&gt; downloadList = GetDownloadListByAll(ActiveManifest);    var operation = new ResourceDownloaderOperation(PackageName, downloadList, downloadingMaxNumber, failedTryAgain);    return operation;&#125;// PlayModeImpl.cs Line 245-264public List&lt;BundleInfo&gt; GetDownloadListByAll(PackageManifest manifest)&#123;    if (manifest == null)        return new List&lt;BundleInfo&gt;();    List&lt;BundleInfo&gt; result = new List&lt;BundleInfo&gt;(1000);    foreach (var packageBundle in manifest.BundleList)    &#123;        var fileSystem = GetBelongFileSystem(packageBundle);        if (fileSystem == null)            continue;        if (fileSystem.NeedDownload(packageBundle))        &#123;            var bundleInfo = new BundleInfo(fileSystem, packageBundle);            result.Add(bundleInfo);        &#125;    &#125;    return result;&#125;\n\næµç¨‹å›¾flowchart TD\n    A[\"CreateResourceDownloaderByAll\"] -->|è°ƒç”¨| B[\"GetDownloadListByAll\"]\n    B -->|éå†| C[\"manifest.BundleList\"]\n    C -->|æ¯ä¸ªBundle| D[\"GetBelongFileSystem\"]\n    D -->|æ£€æŸ¥| E[\"fileSystem.NeedDownload\"]\n    E -->|æ˜¯| F[\"åˆ›å»ºBundleInfo\"]\n    E -->|å¦| G[\"è·³è¿‡è¯¥Bundle\"]\n    F --> H[\"æ·»åŠ åˆ°ä¸‹è½½åˆ—è¡¨\"]\n    G --> I[\"ç»§ç»­ä¸‹ä¸€ä¸ªBundle\"]\n    H --> I\n    I -->|æ‰€æœ‰Bundleå¤„ç†å®Œ| J[\"è¿”å›ä¸‹è½½åˆ—è¡¨\"]\n    J --> K[\"åˆ›å»ºResourceDownloaderOperation\"]\n    K --> L[\"è¿”å›ä¸‹è½½å™¨\"]\n\n    %% æ ·å¼å®šä¹‰\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:2px,color:#000000\n    style C fill:#45b7d1,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style D fill:#f9ca24,stroke:#ffffff,stroke-width:2px,color:#000000\n    style E fill:#6c5ce7,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style F fill:#a29bfe,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style G fill:#fd79a8,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style H fill:#00d2d3,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style I fill:#ff9ff3,stroke:#ffffff,stroke-width:2px,color:#000000\n    style J fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style K fill:#ff3838,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style L fill:#2ed573,stroke:#ffffff,stroke-width:2px,color:#000000\n\nCreateResourceDownloaderByTagså…³é”®ç±»\nPlayModeImpl.cs\nResourceDownloaderOperation.cs\nPackageBundle.cs\n\nCreateResourceDownloaderByTags æ–¹æ³•ç”¨äºåˆ›å»ºä¸‹è½½æŒ‡å®šæ ‡ç­¾èµ„æºçš„ä¸‹è½½å™¨ï¼Œæ”¯æŒDLCï¼ˆå¯ä¸‹è½½å†…å®¹ï¼‰åœºæ™¯ã€‚\nå…³é”®æºä»£ç // PlayModeImpl.cs Line 116-121ResourceDownloaderOperation IPlayMode.CreateResourceDownloaderByTags(string[] tags, int downloadingMaxNumber, int failedTryAgain)&#123;    List&lt;BundleInfo&gt; downloadList = GetDownloadListByTags(ActiveManifest, tags);    var operation = new ResourceDownloaderOperation(PackageName, downloadList, downloadingMaxNumber, failedTryAgain);    return operation;&#125;// PlayModeImpl.cs Line 265-297public List&lt;BundleInfo&gt; GetDownloadListByTags(PackageManifest manifest, string[] tags)&#123;    if (manifest == null)        return new List&lt;BundleInfo&gt;();    List&lt;BundleInfo&gt; result = new List&lt;BundleInfo&gt;(1000);    foreach (var packageBundle in manifest.BundleList)    &#123;        var fileSystem = GetBelongFileSystem(packageBundle);        if (fileSystem == null)            continue;        if (fileSystem.NeedDownload(packageBundle))        &#123;            // å¦‚æœæœªå¸¦ä»»ä½•æ ‡è®°ï¼Œåˆ™ç»Ÿä¸€ä¸‹è½½            if (packageBundle.HasAnyTags() == false)            &#123;                var bundleInfo = new BundleInfo(fileSystem, packageBundle);                result.Add(bundleInfo);            &#125;            else            &#123;                // æŸ¥è¯¢DLCèµ„æº                if (packageBundle.HasTag(tags))                &#123;                    var bundleInfo = new BundleInfo(fileSystem, packageBundle);                    result.Add(bundleInfo);                &#125;            &#125;        &#125;    &#125;    return result;&#125;\n\næµç¨‹å›¾flowchart TD\n    A[\"CreateResourceDownloaderByTags\"] -->|ä¼ å…¥tagsæ•°ç»„| B[\"GetDownloadListByTags\"]\n    B -->|éå†| C[\"manifest.BundleList\"]\n    C -->|æ¯ä¸ªBundle| D[\"GetBelongFileSystem\"]\n    D -->|æ£€æŸ¥| E[\"fileSystem.NeedDownload\"]\n    E -->|å¦| F[\"è·³è¿‡è¯¥Bundle\"]\n    E -->|æ˜¯| G[\"æ£€æŸ¥Bundleæ ‡ç­¾\"]\n    G -->|HasAnyTags = false| H[\"æ— æ ‡ç­¾Bundleç»Ÿä¸€ä¸‹è½½\"]\n    G -->|HasAnyTags = true| I[\"æ£€æŸ¥HasTagåŒ¹é…\"]\n    I -->|åŒ¹é…| J[\"DLCèµ„æºæ·»åŠ åˆ°ä¸‹è½½åˆ—è¡¨\"]\n    I -->|ä¸åŒ¹é…| K[\"è·³è¿‡è¯¥Bundle\"]\n    H --> L[\"åˆ›å»ºBundleInfo\"]\n    J --> L\n    L --> M[\"æ·»åŠ åˆ°ç»“æœåˆ—è¡¨\"]\n    F --> N[\"ç»§ç»­ä¸‹ä¸€ä¸ªBundle\"]\n    K --> N\n    M --> N\n    N -->|å¤„ç†å®Œæˆ| O[\"è¿”å›ä¸‹è½½åˆ—è¡¨\"]\n    O --> P[\"åˆ›å»ºResourceDownloaderOperation\"]\n\n    %% æ ·å¼å®šä¹‰\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:2px,color:#000000\n    style C fill:#45b7d1,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style D fill:#f9ca24,stroke:#ffffff,stroke-width:2px,color:#000000\n    style E fill:#6c5ce7,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style F fill:#fd79a8,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style G fill:#00d2d3,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style H fill:#ff9ff3,stroke:#ffffff,stroke-width:2px,color:#000000\n    style I fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style J fill:#ff3838,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style K fill:#2ed573,stroke:#ffffff,stroke-width:2px,color:#000000\n    style L fill:#ffa502,stroke:#ffffff,stroke-width:2px,color:#000000\n    style M fill:#a29bfe,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style N fill:#74b9ff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style O fill:#e17055,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style P fill:#81ecec,stroke:#ffffff,stroke-width:2px,color:#000000\n\nCreateResourceDownloaderByPathså…³é”®ç±»\nPlayModeImpl.cs\nResourceDownloaderOperation.cs  \nAssetInfo.cs\nPackageManifest.cs\n\nCreateResourceDownloaderByPaths æ–¹æ³•ç”¨äºåˆ›å»ºä¸‹è½½æŒ‡å®šèµ„æºè·¯å¾„åŠå…¶ä¾èµ–çš„ä¸‹è½½å™¨ï¼Œæ”¯æŒé€’å½’ä¸‹è½½é€‰é¡¹ã€‚\nå…³é”®æºä»£ç // PlayModeImpl.cs Line 122-127ResourceDownloaderOperation IPlayMode.CreateResourceDownloaderByPaths(AssetInfo[] assetInfos, bool recursiveDownload, int downloadingMaxNumber, int failedTryAgain)&#123;    List&lt;BundleInfo&gt; downloadList = GetDownloadListByPaths(ActiveManifest, assetInfos, recursiveDownload);    var operation = new ResourceDownloaderOperation(PackageName, downloadList, downloadingMaxNumber, failedTryAgain);    return operation;&#125;// PlayModeImpl.cs Line 298-359 (æ ¸å¿ƒé€»è¾‘)public List&lt;BundleInfo&gt; GetDownloadListByPaths(PackageManifest manifest, AssetInfo[] assetInfos, bool recursiveDownload)&#123;    if (manifest == null)        return new List&lt;BundleInfo&gt;();    // è·å–èµ„æºå¯¹è±¡çš„èµ„æºåŒ…å’Œæ‰€æœ‰ä¾èµ–èµ„æºåŒ…    List&lt;PackageBundle&gt; checkList = new List&lt;PackageBundle&gt;();    foreach (var assetInfo in assetInfos)    &#123;        if (assetInfo.IsInvalid)        &#123;            YooLogger.Warning(assetInfo.Error);            continue;        &#125;        // è·å–ä¸»èµ„æºåŒ…        PackageBundle mainBundle = manifest.GetMainPackageBundle(assetInfo.Asset);        if (checkList.Contains(mainBundle) == false)            checkList.Add(mainBundle);        // è·å–ä¾èµ–èµ„æºåŒ…        List&lt;PackageBundle&gt; mainDependBundles = manifest.GetAssetAllDependencies(assetInfo.Asset);        foreach (var dependBundle in mainDependBundles)        &#123;            if (checkList.Contains(dependBundle) == false)                checkList.Add(dependBundle);        &#125;        // é€’å½’ä¸‹è½½ä¸»èµ„æºåŒ…å†…æ‰€æœ‰èµ„æºå¯¹è±¡ä¾èµ–çš„èµ„æºåŒ…        if (recursiveDownload)        &#123;            foreach (var otherMainAsset in mainBundle.IncludeMainAssets)            &#123;                var otherMainBundle = manifest.GetMainPackageBundle(otherMainAsset.BundleID);                if (checkList.Contains(otherMainBundle) == false)                    checkList.Add(otherMainBundle);                List&lt;PackageBundle&gt; otherDependBundles = manifest.GetAssetAllDependencies(otherMainAsset);                foreach (var dependBundle in otherDependBundles)                &#123;                    if (checkList.Contains(dependBundle) == false)                        checkList.Add(dependBundle);                &#125;            &#125;        &#125;    &#125;    // ç­›é€‰éœ€è¦ä¸‹è½½çš„èµ„æºåŒ…    List&lt;BundleInfo&gt; result = new List&lt;BundleInfo&gt;(1000);    foreach (var packageBundle in checkList)    &#123;        var fileSystem = GetBelongFileSystem(packageBundle);        if (fileSystem == null)            continue;        if (fileSystem.NeedDownload(packageBundle))        &#123;            var bundleInfo = new BundleInfo(fileSystem, packageBundle);            result.Add(bundleInfo);        &#125;    &#125;    return result;&#125;\n\næµç¨‹å›¾flowchart TD\n    A[\"CreateResourceDownloaderByPaths\"] -->|AssetInfoæ•°ç»„| B[\"GetDownloadListByPaths\"]\n    B -->|éå†| C[\"AssetInfoæ•°ç»„\"]\n    C -->|æ¯ä¸ªAssetInfo| D{AssetInfo.IsInvalid?}\n    D -->|æ˜¯| E[\"è®°å½•è­¦å‘Šè·³è¿‡è¯¥èµ„æº\"]\n    D -->|å¦| F[\"è·å–ä¸»èµ„æºåŒ…\"]\n    F --> G[\"æ·»åŠ åˆ°checkList\"]\n    G --> H[\"è·å–ä¾èµ–èµ„æºåŒ…\"]\n    H --> I[\"æ·»åŠ ä¾èµ–åˆ°checkList\"]\n    I --> J{recursiveDownload?}\n    J -->|å¦| K[\"å¤„ç†ä¸‹ä¸€ä¸ªAssetInfo\"]\n    J -->|æ˜¯| L[\"é€’å½’å¤„ç†ä¸»èµ„æºåŒ…å†…æ‰€æœ‰èµ„æºçš„ä¾èµ–\"]\n    L --> M[\"è·å–å…¶ä»–ä¸»èµ„æºåŒ…\"]\n    M --> N[\"è·å–å…¶ä»–ä¾èµ–èµ„æºåŒ…\"]\n    N --> O[\"æ·»åŠ åˆ°checkList\"]\n    O --> K\n    E --> K\n    K -->|æ‰€æœ‰AssetInfoå¤„ç†å®Œ| P[\"éå†checkList\"]\n    P -->|æ¯ä¸ªPackageBundle| Q[\"GetBelongFileSystem\"]\n    Q --> R{fileSystem.NeedDownload?}\n    R -->|æ˜¯| S[\"åˆ›å»ºBundleInfoæ·»åŠ åˆ°ç»“æœ\"]\n    R -->|å¦| T[\"è·³è¿‡è¯¥Bundle\"]\n    S --> U[\"ç»§ç»­ä¸‹ä¸€ä¸ªBundle\"]\n    T --> U\n    U -->|å¤„ç†å®Œæˆ| V[\"è¿”å›ä¸‹è½½åˆ—è¡¨\"]\n    V --> W[\"åˆ›å»ºResourceDownloaderOperation\"]\n\n    %% æ ·å¼å®šä¹‰\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:2px,color:#000000\n    style C fill:#45b7d1,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style D fill:#f9ca24,stroke:#ffffff,stroke-width:2px,color:#000000\n    style E fill:#fd79a8,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style F fill:#6c5ce7,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style G fill:#a29bfe,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style H fill:#00d2d3,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style I fill:#ff9ff3,stroke:#ffffff,stroke-width:2px,color:#000000\n    style J fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style K fill:#ff3838,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style L fill:#2ed573,stroke:#ffffff,stroke-width:2px,color:#000000\n    style M fill:#ffa502,stroke:#ffffff,stroke-width:2px,color:#000000\n    style N fill:#74b9ff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style O fill:#e17055,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style P fill:#81ecec,stroke:#ffffff,stroke-width:2px,color:#000000\n    style Q fill:#55a3ff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style R fill:#fd79a8,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style S fill:#00d2d3,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style T fill:#dda0dd,stroke:#ffffff,stroke-width:2px,color:#000000\n    style U fill:#98fb98,stroke:#ffffff,stroke-width:2px,color:#000000\n    style V fill:#ffd700,stroke:#ffffff,stroke-width:2px,color:#000000\n    style W fill:#ff69b4,stroke:#ffffff,stroke-width:2px,color:#ffffff\n\nä¸‹è½½å™¨æ ¸å¿ƒæœºåˆ¶ResourceDownloaderOperation ç»§æ‰¿å…³ç³»flowchart LR\n    AsyncOperationBase[\"AsyncOperationBaseå¼‚æ­¥æ“ä½œåŸºç±»\"] \n    DownloaderOperation[\"DownloaderOperationä¸‹è½½å™¨æ“ä½œåŸºç±»\"]\n    ResourceDownloaderOperation[\"ResourceDownloaderOperationèµ„æºä¸‹è½½å™¨\"]\n    ResourceUnpackerOperation[\"ResourceUnpackerOperationèµ„æºè§£å‹å™¨\"]\n    ResourceImporterOperation[\"ResourceImporterOperationèµ„æºå¯¼å…¥å™¨\"]\n\n    AsyncOperationBase -.->|ç»§æ‰¿| DownloaderOperation\n    DownloaderOperation -.->|ç»§æ‰¿| ResourceDownloaderOperation\n    DownloaderOperation -.->|ç»§æ‰¿| ResourceUnpackerOperation\n    DownloaderOperation -.->|ç»§æ‰¿| ResourceImporterOperation\n\n    %% æ ·å¼å®šä¹‰\n    style AsyncOperationBase fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style DownloaderOperation fill:#ff6600,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style ResourceDownloaderOperation fill:#00ff88,stroke:#ffffff,stroke-width:2px,color:#000000\n    style ResourceUnpackerOperation fill:#ff4444,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style ResourceImporterOperation fill:#44ff44,stroke:#ffffff,stroke-width:2px,color:#000000\n\nä¸‹è½½å™¨çŠ¶æ€æœºflowchart TD\n    A[\"DownloaderOperation.BeginDownloadå¤–éƒ¨ä½¿ç”¨\"] -->|InternalStart| B[\"Check\"]\n    B -->|éªŒè¯ä¸‹è½½åˆ—è¡¨| C{ä¸‹è½½åˆ—è¡¨æœ‰æ•ˆ?}\n    C -->|æ— æ•ˆ| D[\"DoneStatus=Failed\"]\n    C -->|æœ‰æ•ˆ| E[\"Loading\"]\n    E -->|åˆ›å»ºä¸‹è½½å™¨| F[\"åŠ¨æ€ç®¡ç†ä¸‹è½½å™¨æ± \"]\n    F -->|æ£€æŸ¥ä¸‹è½½ç»“æœ| G{æœ‰å¤±è´¥çš„ä¸‹è½½?}\n    G -->|æœ‰| H[\"DoneStatus=Failed\"]\n    G -->|æ— | I{æ‰€æœ‰ä¸‹è½½å®Œæˆ?}\n    I -->|å¦| J[\"ç»§ç»­ä¸‹è½½\"]\n    I -->|æ˜¯| K[\"DoneStatus=Succeed\"]\n    J --> F\n\n    %% æ ·å¼å®šä¹‰\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:2px,color:#000000\n    style C fill:#f9ca24,stroke:#ffffff,stroke-width:2px,color:#000000\n    style D fill:#fd79a8,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style E fill:#6c5ce7,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style F fill:#a29bfe,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style G fill:#00d2d3,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style H fill:#ff9ff3,stroke:#ffffff,stroke-width:2px,color:#000000\n    style I fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style J fill:#ff3838,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style K fill:#2ed573,stroke:#ffffff,stroke-width:2px,color:#000000\n\nä¸‹è½½å™¨æ± ç®¡ç†æœºåˆ¶DownloaderOperation é‡‡ç”¨åŠ¨æ€ä¸‹è½½å™¨æ± æ¥ä¼˜åŒ–ä¸‹è½½æ€§èƒ½ï¼Œä¸»è¦ç‰¹æ€§ï¼š\n\næœ€å¤§å¹¶å‘é™åˆ¶ï¼šé€šè¿‡ MAX_LOADER_COUNT = 64 å’Œ _downloadingMaxNumber æ§åˆ¶åŒæ—¶ä¸‹è½½çš„æ–‡ä»¶æ•°é‡\nå¤±è´¥é‡è¯•æœºåˆ¶ï¼šæ”¯æŒ _failedTryAgain å‚æ•°æ§åˆ¶å¤±è´¥é‡è¯•æ¬¡æ•°  \nåŠ¨æ€è°ƒåº¦ï¼šå½“æœ‰ä¸‹è½½å™¨å®Œæˆæ—¶ï¼Œè‡ªåŠ¨ä»å¾…ä¸‹è½½åˆ—è¡¨ä¸­é€‰æ‹©æ–°çš„æ–‡ä»¶å¼€å§‹ä¸‹è½½\næš‚åœ&#x2F;æ¢å¤ï¼šæ”¯æŒ PauseDownload() å’Œ ResumeDownload() æ§åˆ¶ä¸‹è½½çŠ¶æ€\nè¿›åº¦å›è°ƒï¼šæä¾›è¯¦ç»†çš„ä¸‹è½½è¿›åº¦ã€é”™è¯¯ã€å¼€å§‹ç­‰äº‹ä»¶å›è°ƒ\n\néœ€è¦æ³¨æ„ DownloaderOperation.InternalUpdate æ–¹æ³•ä¸­çš„å…³é”®é€»è¾‘ï¼š\n// åŠ¨æ€åˆ›å»ºæ–°çš„ä¸‹è½½å™¨åˆ°æœ€å¤§æ•°é‡é™åˆ¶// æ³¨æ„ï¼šå¦‚æœæœŸé—´æœ‰ä¸‹è½½å¤±è´¥çš„æ–‡ä»¶ï¼Œæš‚åœåŠ¨æ€åˆ›å»ºä¸‹è½½å™¨if (_bundleInfoList.Count &gt; 0 &amp;&amp; _failedList.Count == 0)&#123;    if (_isPause)        return;    if (_downloaders.Count &lt; _downloadingMaxNumber)    &#123;        int index = _bundleInfoList.Count - 1;        var bundleInfo = _bundleInfoList[index];        var downloader = bundleInfo.CreateDownloader(_failedTryAgain);        downloader.StartOperation();        this.AddChildOperation(downloader);        _downloaders.Add(downloader);        _bundleInfoList.RemoveAt(index);    &#125;&#125;\n\nä»ç”¨æˆ·è°ƒç”¨åˆ°UnityWebRequestçš„å®Œæ•´è°ƒç”¨é“¾çœ‹å®Œä¸Šé¢çš„åˆ†æï¼Œæˆ‘è§‰å¾—è¿˜éœ€è¦æŠŠæ•´ä¸ªè°ƒç”¨é“¾æ¢³ç†æ¸…æ¥šï¼Œè¿™æ ·æ›´å®¹æ˜“ç†è§£æ•´ä¸ªä¸‹è½½æµç¨‹ã€‚\nè°ƒç”¨é“¾æ¦‚è¿°ç”¨æˆ·è°ƒç”¨ä¸‹è½½å™¨åˆ°æœ€ç»ˆå‘èµ·UnityWebRequestçš„å®Œæ•´è°ƒç”¨é“¾æ˜¯è¿™æ ·çš„ï¼š\ngraph TD\n    A[ç”¨æˆ·ä»£ç ] -->|downloader.BeginDownload| B[DownloaderOperation]\n    B -->|OperationSystem.Update| C[InternalUpdateå¾ªç¯]\n    C -->|bundleInfo.CreateDownloader| D[BundleInfo]\n    D -->|_fileSystem.DownloadFileAsync| E[DefaultCacheFileSystem]\n    E -->|new DownloadPackageBundleOperation| F[DownloadPackageBundleOperation]\n    F -->|DownloadCenter.DownloadFileAsync| G[DownloadCenterOperation]\n    G -->|åˆ›å»ºå…·ä½“ä¸‹è½½å™¨| H[UnityDownloadFileOperation]\n    H -->|CreateWebRequest| I[UnityWebFileRequestOperation]\n    I -->|_webRequest.SendWebRequest| J[UnityWebRequest]\n    \n    %% è¯¦ç»†æ­¥éª¤è¯´æ˜\n    K[å…³é”®æ­¥éª¤è¯´æ˜]\n    K --> L[ç”¨æˆ·è°ƒç”¨BeginDownloadå¯åŠ¨ä¸‹è½½]\n    K --> M[OperationSystemæ¯å¸§Updateé©±åŠ¨]\n    K --> N[BundleInfoé€‚é…ä¸åŒFileSystem]\n    K --> O[FileSystemåˆ›å»ºå…·ä½“ä¸‹è½½æ“ä½œ]\n    K --> P[DownloadCenterç®¡ç†å¹¶å‘æ§åˆ¶]\n    K --> Q[UnityWebRequestæ‰§è¡Œå®é™…ç½‘ç»œè¯·æ±‚]\n\n    %% æš—è‰²ä¸»é¢˜æ ·å¼\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:3px,color:#000000\n    style C fill:#45b7d1,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style D fill:#f9ca24,stroke:#ffffff,stroke-width:3px,color:#000000\n    style E fill:#6c5ce7,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style F fill:#a29bfe,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style G fill:#fd79a8,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style H fill:#00d2d3,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style I fill:#ff9ff3,stroke:#ffffff,stroke-width:3px,color:#000000\n    style J fill:#00aaff,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style K fill:#2ed573,stroke:#ffffff,stroke-width:3px,color:#000000\n    style L fill:#ffa502,stroke:#ffffff,stroke-width:3px,color:#000000\n    style M fill:#74b9ff,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style N fill:#e17055,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style O fill:#81ecec,stroke:#ffffff,stroke-width:3px,color:#000000\n    style P fill:#55a3ff,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style Q fill:#dda0dd,stroke:#ffffff,stroke-width:3px,color:#000000\n\nå…³é”®è°ƒç”¨ç‚¹è§£æ1. è´£ä»»åˆ†ç¦»è®¾è®¡\nDownloaderOperationï¼šç®¡ç†ä¸‹è½½å™¨æ± å’Œå¹¶å‘æ§åˆ¶\nBundleInfoï¼šé€‚é…å™¨ï¼Œç»Ÿä¸€ä¸åŒFileSystemçš„æ¥å£\nDefaultCacheFileSystemï¼šå¤„ç†URLè·å–å’Œå‚æ•°é…ç½®\nDownloadPackageBundleOperationï¼šçŠ¶æ€æœºç®¡ç†ï¼Œé‡è¯•é€»è¾‘\nDownloadCenterï¼šå¹¶å‘é™åˆ¶å’Œä¸‹è½½å™¨å¤ç”¨\nUnityDownloadFileOperationï¼šUnityç½‘ç»œè¯·æ±‚çš„å…·ä½“å®ç°\n\n2. å¼‚æ­¥è°ƒç”¨é“¾æ•´ä¸ªè°ƒç”¨é“¾æ˜¯å¼‚æ­¥çš„ï¼Œé€šè¿‡ OperationSystem çš„ Update å¾ªç¯é©±åŠ¨ï¼š\n// ä¸»è¦æ›´æ–°å¾ªç¯YooAsset.Update() â†’ OperationSystem.Update() â†’ AsyncOperationBase.Update() â†’ InternalUpdate()\n\n3. é”™è¯¯å¤„ç†å’Œé‡è¯•åœ¨è°ƒç”¨é“¾çš„æ¯ä¸€å±‚éƒ½æœ‰ç›¸åº”çš„é”™è¯¯å¤„ç†ï¼š\n\nDownloaderOperationï¼šå¤±è´¥éš”ç¦»ç­–ç•¥\nDownloadPackageBundleOperationï¼šé‡è¯•é€»è¾‘å’Œè¶…æ—¶å¤„ç†\nUnityWebRequestï¼šç½‘ç»œå±‚é”™è¯¯å¤„ç†\n\n","categories":["Unity"],"tags":["YooAssets"]},{"title":"YooAssetæºç é˜…è¯»-èµ„æºåŠ è½½ä¸å¸è½½","url":"/2025/08/25/YooAsset_Code_Reading_Resource_Loading_and_Unloading/","content":"YooAssetæºç é˜…è¯»-èµ„æºåŠ è½½å¸è½½ç»§ç»­ YooAsset çš„æºç ç ”ç©¶ï¼Œæœ¬æ–‡å°†è¯¦ç»†åˆ†æèµ„æºåŠ è½½ç³»ç»Ÿçš„æ ¸å¿ƒæœºåˆ¶ï¼ŒåŒ…æ‹¬ResourcePackageã€ResourceManagerä»¥åŠå„ç§èµ„æºåŠ è½½Providerçš„å·¥ä½œåŸç†ã€‚\nèµ„æºåŠ è½½ç³»ç»Ÿæ¶æ„æ¦‚è¿°YooAssetçš„èµ„æºåŠ è½½ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š\næ ¸å¿ƒç»„ä»¶å…³ç³»å›¾flowchart TB\n    A[\"ResourcePackageèµ„æºåŒ…è£¹å…¥å£\"] --> B[\"ResourceManagerèµ„æºç®¡ç†å™¨\"]\n    B --> C[\"ProviderOperationæä¾›è€…åŸºç±»\"]\n    C --> D[\"AssetProviderå•èµ„æºæä¾›è€…\"]\n    C --> E[\"SubAssetsProviderå­èµ„æºæä¾›è€…\"]\n    C --> F[\"AllAssetsProvideræ‰€æœ‰èµ„æºæä¾›è€…\"]\n    C --> G[\"RawFileProvideråŸç”Ÿæ–‡ä»¶æä¾›è€…\"]\n    C --> H[\"SceneProvideråœºæ™¯æä¾›è€…\"]\n    \n    B --> I[\"LoadBundleFileOperation BundleåŠ è½½å™¨\"]\n    I --> J[\"BundleInfo Bundleä¿¡æ¯\"]\n    J --> K[\"FileSystemæ–‡ä»¶ç³»ç»Ÿ\"]\n    \n    D --> L[\"AssetHandleèµ„æºå¥æŸ„\"]\n    E --> M[\"SubAssetsHandleå­èµ„æºå¥æŸ„\"]\n    F --> N[\"AllAssetsHandleæ‰€æœ‰èµ„æºå¥æŸ„\"]\n    G --> O[\"RawFileHandleåŸç”Ÿæ–‡ä»¶å¥æŸ„\"]\n    H --> P[\"SceneHandleåœºæ™¯å¥æŸ„\"]\n\n    %% æ ·å¼å®šä¹‰\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:2px,color:#000000\n    style C fill:#45b7d1,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style D fill:#f9ca24,stroke:#ffffff,stroke-width:2px,color:#000000\n    style E fill:#6c5ce7,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style F fill:#a29bfe,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style G fill:#fd79a8,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style H fill:#00d2d3,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style I fill:#ff9ff3,stroke:#ffffff,stroke-width:2px,color:#000000\n    style J fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style K fill:#ff3838,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style L fill:#2ed573,stroke:#ffffff,stroke-width:2px,color:#000000\n    style M fill:#ffa502,stroke:#ffffff,stroke-width:2px,color:#000000\n    style N fill:#74b9ff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style O fill:#e17055,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style P fill:#81ecec,stroke:#ffffff,stroke-width:2px,color:#000000\n\nResourcePackage - èµ„æºåŒ…è£¹å…¥å£ResourcePackage æ˜¯ç”¨æˆ·æ¥è§¦èµ„æºåŠ è½½çš„ä¸»è¦å…¥å£ç‚¹ï¼Œå®ƒæä¾›äº†ç»Ÿä¸€çš„èµ„æºåŠ è½½æ¥å£ã€‚\nå…³é”®ç±»\nResourcePackage.cs (Line 8-1209)\nResourceManager.cs\nAssetInfo.cs\n\næ ¸å¿ƒåŠ è½½æ–¹æ³•åˆ†æResourcePackage æä¾›äº†å››ç§ä¸»è¦çš„èµ„æºåŠ è½½æ–¹å¼ï¼š\n1. LoadAssetAsync - å•èµ„æºåŠ è½½// ResourcePackage.cs Line 689-732public AssetHandle LoadAssetAsync(AssetInfo assetInfo, uint priority = 0)&#123;    DebugCheckInitialize();    return LoadAssetInternal(assetInfo, false, priority);&#125;private AssetHandle LoadAssetInternal(AssetInfo assetInfo, bool waitForAsyncComplete, uint priority)&#123;    DebugCheckAssetLoadType(assetInfo.AssetType);    assetInfo.LoadMethod = AssetInfo.ELoadMethod.LoadAsset;    var handle = _resourceManager.LoadAssetAsync(assetInfo, priority);    if (waitForAsyncComplete)        handle.WaitForAsyncComplete();    return handle;&#125;\n\n2. LoadSubAssetsAsync - å­èµ„æºåŠ è½½// ResourcePackage.cs Line 799-853public SubAssetsHandle LoadSubAssetsAsync(AssetInfo assetInfo, uint priority = 0)&#123;    DebugCheckInitialize();    return LoadSubAssetsInternal(assetInfo, false, priority);&#125;private SubAssetsHandle LoadSubAssetsInternal(AssetInfo assetInfo, bool waitForAsyncComplete, uint priority)&#123;    DebugCheckAssetLoadType(assetInfo.AssetType);    assetInfo.LoadMethod = AssetInfo.ELoadMethod.LoadSubAssets;    var handle = _resourceManager.LoadSubAssetsAsync(assetInfo, priority);    if (waitForAsyncComplete)        handle.WaitForAsyncComplete();    return handle;&#125;\n\n3. LoadAllAssetsAsync - åŠ è½½åŒ…å†…æ‰€æœ‰èµ„æº// ResourcePackage.cs Line 909-963public AllAssetsHandle LoadAllAssetsAsync(AssetInfo assetInfo, uint priority = 0)&#123;    DebugCheckInitialize();    return LoadAllAssetsInternal(assetInfo, false, priority);&#125;private AllAssetsHandle LoadAllAssetsInternal(AssetInfo assetInfo, bool waitForAsyncComplete, uint priority)&#123;    DebugCheckAssetLoadType(assetInfo.AssetType);    assetInfo.LoadMethod = AssetInfo.ELoadMethod.LoadAllAssets;    var handle = _resourceManager.LoadAllAssetsAsync(assetInfo, priority);    if (waitForAsyncComplete)        handle.WaitForAsyncComplete();    return handle;&#125;\n\n4. LoadRawFileAsync - åŸç”Ÿæ–‡ä»¶åŠ è½½// ResourcePackage.cs Line 540-566public RawFileHandle LoadRawFileAsync(AssetInfo assetInfo, uint priority = 0)&#123;    DebugCheckInitialize();    return LoadRawFileInternal(assetInfo, false, priority);&#125;private RawFileHandle LoadRawFileInternal(AssetInfo assetInfo, bool waitForAsyncComplete, uint priority)&#123;    assetInfo.LoadMethod = AssetInfo.ELoadMethod.LoadRawFile;    var handle = _resourceManager.LoadRawFileAsync(assetInfo, priority);    if (waitForAsyncComplete)        handle.WaitForAsyncComplete();    return handle;&#125;\n\nèµ„æºåŠ è½½æ–¹æ³•å¯¹æ¯”\n\n\nåŠ è½½æ–¹æ³•\nç”¨é€”\nè¿”å›ç±»å‹\nå…¸å‹åœºæ™¯\n\n\n\nLoadAssetAsync\nåŠ è½½å•ä¸ªä¸»èµ„æº\nAssetHandle\nçº¹ç†ã€éŸ³é¢‘ã€Prefabç­‰\n\n\nLoadSubAssetsAsync\nåŠ è½½å­èµ„æº\nSubAssetsHandle\nAtlasä¸­çš„Spriteã€FBXä¸­çš„ç½‘æ ¼ç­‰\n\n\nLoadAllAssetsAsync\nåŠ è½½åŒ…å†…æ‰€æœ‰èµ„æº\nAllAssetsHandle\næ‰¹é‡åŠ è½½æ•´ä¸ªèµ„æºåŒ…\n\n\nLoadRawFileAsync\nåŠ è½½åŸç”Ÿæ–‡ä»¶\nRawFileHandle\né…ç½®æ–‡ä»¶ã€äºŒè¿›åˆ¶æ•°æ®ç­‰\n\n\nResourceManager - èµ„æºç®¡ç†æ ¸å¿ƒResourceManager æ˜¯èµ„æºåŠ è½½ç³»ç»Ÿçš„æ ¸å¿ƒç®¡ç†å™¨ï¼Œè´Ÿè´£Providerçš„åˆ›å»ºã€ç®¡ç†å’ŒBundleåŠ è½½å™¨çš„åè°ƒã€‚\nå…³é”®æ•°æ®ç»“æ„// ResourceManager.cs Line 12-21internal readonly Dictionary&lt;string, ProviderOperation&gt; ProviderDic = new Dictionary&lt;string, ProviderOperation&gt;(5000);internal readonly Dictionary&lt;string, LoadBundleFileOperation&gt; LoaderDic = new Dictionary&lt;string, LoadBundleFileOperation&gt;(5000);internal readonly List&lt;SceneHandle&gt; SceneHandles = new List&lt;SceneHandle&gt;(100);// BundleåŠ è½½çš„æœ€å¤§å¹¶å‘æ•°private int _bundleLoadingMaxConcurrency;   // WebGLå¹³å°å¼ºåˆ¶åŒæ­¥åŠ è½½èµ„æºprivate bool _webGLForceSyncLoadAsset;\n\nProvideråˆ›å»ºæœºåˆ¶ResourceManagerä¸ºæ¯ç§èµ„æºç±»å‹åˆ›å»ºå¯¹åº”çš„Providerï¼š\n// ResourceManager.cs Line 157-187 (AssetProvideråˆ›å»º)public AssetHandle LoadAssetAsync(AssetInfo assetInfo, uint priority)&#123;    // æ£€æŸ¥åŠ è½½æ“ä½œæ˜¯å¦è¢«é”å®š    if (LockLoadOperation) &#123; /* é”™è¯¯å¤„ç† */ &#125;        // æ£€æŸ¥AssetInfoæœ‰æ•ˆæ€§    if (assetInfo.IsInvalid) &#123; /* é”™è¯¯å¤„ç† */ &#125;    // ç”ŸæˆProviderçš„å”¯ä¸€æ ‡è¯†ç¬¦    string providerGUID = nameof(LoadAssetAsync) + assetInfo.GUID;        // å°è¯•è·å–å·²å­˜åœ¨çš„Providerï¼ˆå¤ç”¨æœºåˆ¶ï¼‰    ProviderOperation provider = TryGetAssetProvider(providerGUID);    if (provider == null)    &#123;        // åˆ›å»ºæ–°çš„AssetProvider        provider = new AssetProvider(this, providerGUID, assetInfo);        provider.InitProviderDebugInfo();        ProviderDic.Add(providerGUID, provider);        OperationSystem.StartOperation(PackageName, provider);    &#125;    provider.Priority = priority;    return provider.CreateHandle&lt;AssetHandle&gt;();&#125;\n\nBundleåŠ è½½å™¨ç®¡ç†ResourceManager é€šè¿‡BundleåŠ è½½å™¨ç®¡ç†èµ„æºåŒ…çš„åŠ è½½ï¼š\n// ResourceManager.cs Line 298-313internal LoadBundleFileOperation CreateMainBundleFileLoader(AssetInfo assetInfo)&#123;    BundleInfo bundleInfo = _bundleQuery.GetMainBundleInfo(assetInfo);    return CreateBundleFileLoaderInternal(bundleInfo);&#125;internal List&lt;LoadBundleFileOperation&gt; CreateDependBundleFileLoaders(AssetInfo assetInfo)&#123;    List&lt;BundleInfo&gt; bundleInfos = _bundleQuery.GetDependBundleInfos(assetInfo);    List&lt;LoadBundleFileOperation&gt; result = new List&lt;LoadBundleFileOperation&gt;(bundleInfos.Count);    foreach (var bundleInfo in bundleInfos)    &#123;        var bundleLoader = CreateBundleFileLoaderInternal(bundleInfo);        result.Add(bundleLoader);    &#125;    return result;&#125;\n\nProviderç³»ç»Ÿ - èµ„æºæä¾›è€…Provideræ˜¯èµ„æºåŠ è½½çš„å…·ä½“æ‰§è¡Œè€…ï¼Œæ¯ç§èµ„æºç±»å‹éƒ½æœ‰å¯¹åº”çš„Providerå®ç°ã€‚\nAssetProvider - å•èµ„æºæä¾›è€…AssetProvider è´Ÿè´£åŠ è½½å•ä¸ªèµ„æºå¯¹è±¡ï¼š\n// AssetProvider.cs Line 11-42protected override void ProcessBundleResult()&#123;    if (_loadAssetOp == null)    &#123;        // é€šè¿‡Bundleç»“æœå¯¹è±¡åŠ è½½èµ„æº        _loadAssetOp = BundleResultObject.LoadAssetAsync(MainAssetInfo);        _loadAssetOp.StartOperation();        AddChildOperation(_loadAssetOp);#if UNITY_WEBGL        // WebGLå¹³å°å¼ºåˆ¶åŒæ­¥åŠ è½½        if (_resManager.WebGLForceSyncLoadAsset())            _loadAssetOp.WaitForAsyncComplete();#endif    &#125;    if (IsWaitForAsyncComplete)        _loadAssetOp.WaitForAsyncComplete();    _loadAssetOp.UpdateOperation();    Progress = _loadAssetOp.Progress;    if (_loadAssetOp.IsDone == false)        return;    if (_loadAssetOp.Status != EOperationStatus.Succeed)    &#123;        InvokeCompletion(_loadAssetOp.Error, EOperationStatus.Failed);    &#125;    else    &#123;        AssetObject = _loadAssetOp.Result;        InvokeCompletion(string.Empty, EOperationStatus.Succeed);    &#125;&#125;\n\nHandleç³»ç»Ÿ - èµ„æºå¥æŸ„Handleæ˜¯ç”¨æˆ·ä¸åŠ è½½èµ„æºäº¤äº’çš„æ¥å£ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼š\n// AssetHandle.cs å…³é”®åŠŸèƒ½public sealed class AssetHandle : HandleBase&#123;    // è·å–èµ„æºå¯¹è±¡    public UnityEngine.Object AssetObject &#123; get; &#125;        // æ³›å‹è·å–èµ„æºå¯¹è±¡    public TAsset GetAssetObject&lt;TAsset&gt;() where TAsset : UnityEngine.Object        // åŒæ­¥å®ä¾‹åŒ–GameObject    public GameObject InstantiateSync()        // å¼‚æ­¥å®ä¾‹åŒ–GameObject    public InstantiateOperation InstantiateAsync(bool actived = true)        // ç­‰å¾…å¼‚æ­¥å®Œæˆ    public void WaitForAsyncComplete()        // å®Œæˆäº‹ä»¶    public event System.Action&lt;AssetHandle&gt; Completed&#125;\n\nèµ„æºåŠ è½½å®Œæ•´æµç¨‹ä»ç”¨æˆ·è°ƒç”¨åˆ°èµ„æºåŠ è½½å®Œæˆçš„è°ƒç”¨é“¾flowchart TD\n    A[\"ç”¨æˆ·ä»£ç \"] -->|package.LoadAssetAsync| B[\"ResourcePackage.LoadAssetAsync\"]\n    B -->|LoadAssetInternal| C[\"ResourceManager.LoadAssetAsync\"]\n    C -->|åˆ›å»ºæˆ–å¤ç”¨| D[\"AssetProvider\"]\n    D -->|OperationSystem.StartOperation| E[\"Provider.InternalUpdate\"]\n    E -->|æ£€æŸ¥BundleçŠ¶æ€| F[\"ProcessBundleResult\"]\n    F -->|BundleResultObject.LoadAssetAsync| G[\"FSLoadAssetOperation\"]\n    G -->|Unity AssetBundle.LoadAssetAsync| H[\"UnityEngine.AssetBundle\"]\n    H -->|åŠ è½½å®Œæˆ| I[\"AssetProvider.AssetObject\"]\n    I -->|CreateHandle| J[\"AssetHandle\"]\n    J -->|è¿”å›ç»™ç”¨æˆ·| K[\"ç”¨æˆ·è·å¾—èµ„æº\"]\n\n    %% è¯¦ç»†è¯´æ˜\n    L[\"å…³é”®æ­¥éª¤è¯´æ˜\"]\n    L --> M[\"ResourcePackageç»Ÿä¸€å…¥å£\"]\n    L --> N[\"ResourceManagerç®¡ç†Provider\"]\n    L --> O[\"AssetProvideræ‰§è¡Œå…·ä½“åŠ è½½\"]\n    L --> P[\"Handleæä¾›ç”¨æˆ·æ¥å£\"]\n\n    %% æ ·å¼å®šä¹‰\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:2px,color:#000000\n    style C fill:#45b7d1,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style D fill:#f9ca24,stroke:#ffffff,stroke-width:2px,color:#000000\n    style E fill:#6c5ce7,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style F fill:#a29bfe,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style G fill:#fd79a8,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style H fill:#00d2d3,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style I fill:#ff9ff3,stroke:#ffffff,stroke-width:2px,color:#000000\n    style J fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style K fill:#ff3838,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style L fill:#2ed573,stroke:#ffffff,stroke-width:2px,color:#000000\n    style M fill:#ffa502,stroke:#ffffff,stroke-width:2px,color:#000000\n    style N fill:#74b9ff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style O fill:#e17055,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style P fill:#81ecec,stroke:#ffffff,stroke-width:2px,color:#000000\n\nè¯¦ç»†è°ƒç”¨æ­¥éª¤è§£æ1. ç”¨æˆ·å…¥å£ - ResourcePackage// ç”¨æˆ·ä»£ç var handle = package.LoadAssetAsync&lt;Texture2D&gt;(&quot;UITextures/Background&quot;);\n\n2. ResourcePackageç»Ÿä¸€å¤„ç†// ResourcePackage.cspublic AssetHandle LoadAssetAsync&lt;TObject&gt;(string location, uint priority = 0)&#123;    DebugCheckInitialize();    AssetInfo assetInfo = ConvertLocationToAssetInfo(location, typeof(TObject));    return LoadAssetInternal(assetInfo, false, priority);&#125;\n\n3. ResourceManageråˆ›å»ºProvider// ResourceManager.cspublic AssetHandle LoadAssetAsync(AssetInfo assetInfo, uint priority)&#123;    string providerGUID = nameof(LoadAssetAsync) + assetInfo.GUID;    ProviderOperation provider = TryGetAssetProvider(providerGUID);    if (provider == null)    &#123;        provider = new AssetProvider(this, providerGUID, assetInfo);        ProviderDic.Add(providerGUID, provider);        OperationSystem.StartOperation(PackageName, provider);    &#125;    return provider.CreateHandle&lt;AssetHandle&gt;();&#125;\n\n4. AssetProvideræ‰§è¡ŒåŠ è½½// AssetProvider.csprotected override void ProcessBundleResult()&#123;    _loadAssetOp = BundleResultObject.LoadAssetAsync(MainAssetInfo);    // ... å¤„ç†åŠ è½½ç»“æœ    AssetObject = _loadAssetOp.Result;&#125;\n\nåœºæ™¯åŠ è½½ç‰¹æ®Šå¤„ç†åœºæ™¯åŠ è½½ä¸æ™®é€šèµ„æºåŠ è½½æœ‰æ‰€ä¸åŒï¼Œæ¯æ¬¡åŠ è½½éƒ½ä¼šåˆ›å»ºæ–°çš„Providerï¼š\n// ResourceManager.cs Line 118-151public SceneHandle LoadSceneAsync(AssetInfo assetInfo, LoadSceneParameters loadSceneParams, bool suspendLoad, uint priority)&#123;    // åœºæ™¯çš„ProviderGUIDæ¯æ¬¡åŠ è½½éƒ½ä¼šå˜åŒ–ï¼ˆæ”¯æŒåŒåœºæ™¯å¤šæ¬¡åŠ è½½ï¼‰    string providerGUID = $&quot;&#123;assetInfo.GUID&#125;-&#123;++_sceneCreateIndex&#125;&quot;;    ProviderOperation provider;    &#123;        provider = new SceneProvider(this, providerGUID, assetInfo, loadSceneParams, suspendLoad);        provider.InitProviderDebugInfo();        ProviderDic.Add(providerGUID, provider);        OperationSystem.StartOperation(PackageName, provider);    &#125;    provider.Priority = priority;    var handle = provider.CreateHandle&lt;SceneHandle&gt;();    handle.PackageName = PackageName;    SceneHandles.Add(handle);    return handle;&#125;\n\nåœºæ™¯åŠ è½½æµç¨‹å›¾flowchart TD\n    A[\"LoadSceneAsync\"] -->|ç”Ÿæˆå”¯ä¸€GUID| B[\"åˆ›å»ºSceneProvider\"]\n    B -->|ä¸å¤ç”¨Provider| C[\"æ¯æ¬¡éƒ½æ˜¯æ–°Provider\"]\n    C -->|LoadSceneParameters| D[\"Unity SceneManager\"]\n    D -->|æ”¯æŒæš‚åœåŠ è½½| E[\"suspendLoad=true\"]\n    D -->|æ­£å¸¸åŠ è½½| F[\"suspendLoad=false\"]\n    E --> G[\"åŠ è½½åˆ°90%æš‚åœ\"]\n    F --> H[\"å®Œæ•´åŠ è½½åœºæ™¯\"]\n    G --> I[\"ç”¨æˆ·è°ƒç”¨ActivateScene\"]\n    H --> J[\"SceneHandleè¿”å›\"]\n    I --> J\n\n    %% æ ·å¼å®šä¹‰\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:2px,color:#000000\n    style C fill:#45b7d1,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style D fill:#f9ca24,stroke:#ffffff,stroke-width:2px,color:#000000\n    style E fill:#6c5ce7,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style F fill:#a29bfe,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style G fill:#fd79a8,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style H fill:#00d2d3,stroke:#ffffff,stroke-width:2px,color:#ffffff\n    style I fill:#ff9ff3,stroke:#ffffff,stroke-width:2px,color:#000000\n    style J fill:#00aaff,stroke:#ffffff,stroke-width:2px,color:#ffffff\n\nAssetInfoè½¬æ¢å’ŒæŸ¥è¯¢æœºåˆ¶Locationåˆ°AssetInfoçš„è½¬æ¢// ResourcePackage.cs Line 1153-1160private AssetInfo ConvertLocationToAssetInfo(string location, System.Type assetType)&#123;    return _playModeImpl.ActiveManifest.ConvertLocationToAssetInfo(location, assetType);&#125;private AssetInfo ConvertAssetGUIDToAssetInfo(string assetGUID, System.Type assetType)&#123;    return _playModeImpl.ActiveManifest.ConvertAssetGUIDToAssetInfo(assetGUID, assetType);&#125;\n\nAssetInfoåŒ…å«çš„å…³é”®ä¿¡æ¯public class AssetInfo&#123;    public string AssetPath;        // èµ„æºè·¯å¾„    public string GUID;            // èµ„æºGUID    public System.Type AssetType;  // èµ„æºç±»å‹    public PackageAsset Asset;     // åŒ…èµ„æºä¿¡æ¯    public ELoadMethod LoadMethod; // åŠ è½½æ–¹æ³•    public bool IsInvalid;         // æ˜¯å¦æ— æ•ˆ    public string Error;           // é”™è¯¯ä¿¡æ¯&#125;\n\nèµ„æºå›æ”¶å’Œç¼“å­˜æœºåˆ¶èµ„æºå›æ”¶ç­–ç•¥YooAssetæä¾›äº†å¤šç§èµ„æºå›æ”¶æ–¹å¼ï¼š\n1. å¼ºåˆ¶å›æ”¶æ‰€æœ‰èµ„æº// ResourcePackage.cs Line 332-347public UnloadAllAssetsOperation UnloadAllAssetsAsync(UnloadAllAssetsOptions options)&#123;    DebugCheckInitialize();    var operation = new UnloadAllAssetsOperation(_resourceManager, options);    OperationSystem.StartOperation(PackageName, operation);    return operation;&#125;\n\n2. å›æ”¶æœªä½¿ç”¨çš„èµ„æº// ResourcePackage.cs Line 355-361public UnloadUnusedAssetsOperation UnloadUnusedAssetsAsync(int loopCount = 10)&#123;    DebugCheckInitialize();    var operation = new UnloadUnusedAssetsOperation(_resourceManager, loopCount);    OperationSystem.StartOperation(PackageName, operation);    return operation;&#125;\n\n3. å°è¯•å¸è½½æŒ‡å®šèµ„æº// ResourcePackage.cs Line 367-382public void TryUnloadUnusedAsset(AssetInfo assetInfo, int loopCount = 10)&#123;    DebugCheckInitialize();    _resourceManager.TryUnloadUnusedAsset(assetInfo, loopCount);&#125;\n\nèµ„æºå›æ”¶æœºåˆ¶è¯¦è§£ResourceManagerä¸­çš„å›æ”¶é€»è¾‘ï¼š\n// ResourceManager.cs Line 66-111public void TryUnloadUnusedAsset(AssetInfo assetInfo, int loopCount)&#123;    while (loopCount &gt; 0)    &#123;        loopCount--;        // å¸è½½ä¸»èµ„æºåŒ…åŠ è½½å™¨        string mainBundleName = _bundleQuery.GetMainBundleName(assetInfo.Asset.BundleID);        var mainLoader = TryGetBundleFileLoader(mainBundleName);        if (mainLoader != null)        &#123;            mainLoader.TryDestroyProviders();            if (mainLoader.CanDestroyLoader())            &#123;                mainLoader.DestroyLoader();                LoaderDic.Remove(mainBundleName);            &#125;        &#125;        // å¸è½½ä¾èµ–èµ„æºåŒ…åŠ è½½å™¨        foreach (var dependID in assetInfo.Asset.DependBundleIDs)        &#123;            string dependBundleName = _bundleQuery.GetMainBundleName(dependID);            var dependLoader = TryGetBundleFileLoader(dependBundleName);            if (dependLoader != null)            &#123;                if (dependLoader.CanDestroyLoader())                &#123;                    dependLoader.DestroyLoader();                    LoaderDic.Remove(dependBundleName);                &#125;            &#125;        &#125;    &#125;&#125;\n\næ€§èƒ½ä¼˜åŒ–ç‰¹æ€§1. Providerå¤ç”¨æœºåˆ¶ResourceManager é€šè¿‡ ProviderGUID å®ç°Providerå¤ç”¨ï¼Œé¿å…é‡å¤åŠ è½½ï¼š\nstring providerGUID = nameof(LoadAssetAsync) + assetInfo.GUID;ProviderOperation provider = TryGetAssetProvider(providerGUID);if (provider == null)&#123;    // åªæœ‰ä¸å­˜åœ¨æ—¶æ‰åˆ›å»ºæ–°çš„Provider    provider = new AssetProvider(this, providerGUID, assetInfo);&#125;\n\n2. BundleåŠ è½½å¹¶å‘æ§åˆ¶// ResourceManager.csprivate int _bundleLoadingMaxConcurrency;   // æœ€å¤§å¹¶å‘æ•°public int BundleLoadingCounter = 0;        // å½“å‰åŠ è½½è®¡æ•°internal bool BundleLoadingIsBusy()&#123;    return BundleLoadingCounter &gt;= _bundleLoadingMaxConcurrency;&#125;\n\n3. WebGLå¹³å°åŒæ­¥åŠ è½½ä¼˜åŒ–#if UNITY_WEBGLif (_resManager.WebGLForceSyncLoadAsset())    _loadAssetOp.WaitForAsyncComplete();#endif\n\n4. åœºæ™¯è‡ªåŠ¨æ¸…ç†æœºåˆ¶// ResourceManager.cs Line 369-387private void OnSceneUnloaded(Scene scene)&#123;    List&lt;SceneHandle&gt; removeList = new List&lt;SceneHandle&gt;();    foreach (var sceneHandle in SceneHandles)    &#123;        if (sceneHandle.IsValid &amp;&amp; sceneHandle.SceneObject == scene)        &#123;            sceneHandle.Release();            removeList.Add(sceneHandle);        &#125;    &#125;    foreach (var sceneHandle in removeList)    &#123;        SceneHandles.Remove(sceneHandle);    &#125;&#125;\n\né”™è¯¯å¤„ç†å’Œè°ƒè¯•æ”¯æŒ1. åˆå§‹åŒ–çŠ¶æ€æ£€æŸ¥[Conditional(&quot;DEBUG&quot;)]private void DebugCheckInitialize(bool checkActiveManifest = true)&#123;    if (_initializeStatus == EOperationStatus.None)        throw new Exception(&quot;Package initialize not completed !&quot;);    else if (_initializeStatus == EOperationStatus.Failed)        throw new Exception($&quot;Package initialize failed ! &#123;_initializeError&#125;&quot;);    if (checkActiveManifest &amp;&amp; _playModeImpl.ActiveManifest == null)        throw new Exception(&quot;Can not found active package manifest !&quot;);&#125;\n\n2. èµ„æºç±»å‹æœ‰æ•ˆæ€§æ£€æŸ¥[Conditional(&quot;DEBUG&quot;)]private void DebugCheckAssetLoadType(System.Type type)&#123;    if (type == null) return;    if (typeof(UnityEngine.Behaviour).IsAssignableFrom(type))        throw new Exception($&quot;Load asset type is invalid : &#123;type.FullName&#125; !&quot;);    if (typeof(UnityEngine.Object).IsAssignableFrom(type) == false)        throw new Exception($&quot;Load asset type is invalid : &#123;type.FullName&#125; !&quot;);&#125;\n\n3. è°ƒè¯•ä¿¡æ¯æ”¯æŒResourceManager æä¾›äº†ä¸°å¯Œçš„è°ƒè¯•æ¥å£ï¼š\n// ResourceManager.cs Line 390-433internal List&lt;DebugProviderInfo&gt; GetDebugProviderInfos()internal List&lt;DebugBundleInfo&gt; GetDebugBundleInfos()internal DebugPackageData GetDebugPackageData()\n\nèµ„æºæœªä¸‹è½½æ—¶çš„æŒ‰éœ€ä¸‹è½½æœºåˆ¶YooAssetçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯æŒ‰éœ€ä¸‹è½½ï¼ˆOn-Demand Downloadï¼‰æœºåˆ¶ã€‚å½“ç”¨æˆ·åŠ è½½èµ„æºæ—¶å‘ç°èµ„æºå°šæœªä¸‹è½½åˆ°æœ¬åœ°ï¼Œç³»ç»Ÿä¼šæ ¹æ®é…ç½®è‡ªåŠ¨è¿›è¡Œä¸‹è½½ï¼Œæ•´ä¸ªè¿‡ç¨‹å¯¹ç”¨æˆ·é€æ˜ã€‚\nèµ„æºä¸‹è½½éœ€æ±‚æ£€æŸ¥åœ¨èµ„æºåŠ è½½å‰ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ¥å£æ£€æŸ¥èµ„æºæ˜¯å¦éœ€è¦ä¸‹è½½ï¼š\n// ResourcePackage.cs Line 390-410public bool IsNeedDownloadFromRemote(string location)&#123;    DebugCheckInitialize();    AssetInfo assetInfo = ConvertLocationToAssetInfo(location, null);    return IsNeedDownloadFromRemoteInternal(assetInfo);&#125;private bool IsNeedDownloadFromRemoteInternal(AssetInfo assetInfo)&#123;    if (assetInfo.IsInvalid)    &#123;        YooLogger.Warning(assetInfo.Error);        return false;    &#125;    // æ£€æŸ¥ä¸»Bundleæ˜¯å¦éœ€è¦ä¸‹è½½    BundleInfo bundleInfo = _bundleQuery.GetMainBundleInfo(assetInfo);    if (bundleInfo.IsNeedDownloadFromRemote())        return true;    // æ£€æŸ¥ä¾èµ–Bundleæ˜¯å¦éœ€è¦ä¸‹è½½    List&lt;BundleInfo&gt; depends = _bundleQuery.GetDependBundleInfos(assetInfo);    foreach (var depend in depends)    &#123;        if (depend.IsNeedDownloadFromRemote())            return true;    &#125;    return false;&#125;\n\næŒ‰éœ€ä¸‹è½½çš„æ ¸å¿ƒé€»è¾‘å½“èµ„æºåŠ è½½æ—¶å‘ç°æ–‡ä»¶ä¸å­˜åœ¨ï¼ŒDCFSLoadAssetBundleOperationä¼šè‡ªåŠ¨å¤„ç†ä¸‹è½½ï¼š\n// DCFSLoadAssetBundleOperation.cså…³é”®ä»£ç æ®µif (_steps == ESteps.CheckExist)&#123;    if (_fileSystem.Exists(_bundle))    &#123;        // æ–‡ä»¶å·²å­˜åœ¨ï¼Œç›´æ¥åŠ è½½        DownloadProgress = 1f;        DownloadedBytes = _bundle.FileSize;        _steps = ESteps.LoadAssetBundle;    &#125;    else    &#123;        // æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ£€æŸ¥æ˜¯å¦å…è®¸æŒ‰éœ€ä¸‹è½½        if (_fileSystem.DisableOnDemandDownload)        &#123;            // ç¦ç”¨æŒ‰éœ€ä¸‹è½½ï¼Œç›´æ¥å¤±è´¥            _steps = ESteps.Done;            Status = EOperationStatus.Failed;            Error = $&quot;The bundle not cached : &#123;_bundle.BundleName&#125;&quot;;            YooLogger.Warning(Error);        &#125;        else        &#123;            // å…è®¸æŒ‰éœ€ä¸‹è½½ï¼Œè½¬å…¥ä¸‹è½½æ­¥éª¤            _steps = ESteps.DownloadFile;        &#125;    &#125;&#125;if (_steps == ESteps.DownloadFile)&#123;    if (_downloadFileOp == null)    &#123;        // åˆ›å»ºä¸‹è½½æ“ä½œ        DownloadFileOptions options = new DownloadFileOptions(int.MaxValue);        _downloadFileOp = _fileSystem.DownloadFileAsync(_bundle, options);        _downloadFileOp.StartOperation();        AddChildOperation(_downloadFileOp);    &#125;    // æ›´æ–°ä¸‹è½½è¿›åº¦    _downloadFileOp.UpdateOperation();    DownloadProgress = _downloadFileOp.DownloadProgress;    DownloadedBytes = _downloadFileOp.DownloadedBytes;        if (_downloadFileOp.IsDone)    &#123;        if (_downloadFileOp.Status == EOperationStatus.Succeed)        &#123;            _steps = ESteps.LoadAssetBundle;  // ä¸‹è½½æˆåŠŸï¼Œç»§ç»­åŠ è½½        &#125;        else        &#123;            _steps = ESteps.Done;            Status = EOperationStatus.Failed;            Error = _downloadFileOp.Error;   // ä¸‹è½½å¤±è´¥        &#125;    &#125;&#125;\n\næŒ‰éœ€ä¸‹è½½æµç¨‹å›¾graph TD\n    A[å¼€å§‹åŠ è½½èµ„æº] --> B[CheckExistæ£€æŸ¥æ–‡ä»¶]\n    B --> C{æ–‡ä»¶æ˜¯å¦å­˜åœ¨?}\n    C -->|å­˜åœ¨| D[LoadAssetBundleç›´æ¥åŠ è½½]\n    C -->|ä¸å­˜åœ¨| E{æ˜¯å¦ç¦ç”¨æŒ‰éœ€ä¸‹è½½?}\n    E -->|æ˜¯| F[åŠ è½½å¤±è´¥è¿”å›é”™è¯¯]\n    E -->|å¦| G[DownloadFileå¼€å§‹ä¸‹è½½]\n    G --> H[åˆ›å»ºä¸‹è½½æ“ä½œ]\n    H --> I[æ›´æ–°ä¸‹è½½è¿›åº¦]\n    I --> J{ä¸‹è½½æ˜¯å¦å®Œæˆ?}\n    J -->|å¦| I\n    J -->|æ˜¯| K{ä¸‹è½½æ˜¯å¦æˆåŠŸ?}\n    K -->|æˆåŠŸ| D\n    K -->|å¤±è´¥| L[åŠ è½½å¤±è´¥è¿”å›ä¸‹è½½é”™è¯¯]\n    D --> M[CheckResultæ£€æŸ¥åŠ è½½ç»“æœ]\n    M --> N[åŠ è½½å®Œæˆ]\n    F --> O[ç»“æŸ]\n    L --> O\n    N --> O\n\n    %% æš—è‰²ä¸»é¢˜æ ·å¼\n    style A fill:#ff6b6b,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style B fill:#4ecdc4,stroke:#ffffff,stroke-width:3px,color:#000000\n    style C fill:#f9ca24,stroke:#ffffff,stroke-width:3px,color:#000000\n    style D fill:#6c5ce7,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style E fill:#a29bfe,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style F fill:#fd79a8,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style G fill:#00d2d3,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style H fill:#ff9ff3,stroke:#ffffff,stroke-width:3px,color:#000000\n    style I fill:#00aaff,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style J fill:#ff3838,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style K fill:#2ed573,stroke:#ffffff,stroke-width:3px,color:#000000\n    style L fill:#ffa502,stroke:#ffffff,stroke-width:3px,color:#000000\n    style M fill:#74b9ff,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style N fill:#e17055,stroke:#ffffff,stroke-width:3px,color:#ffffff\n    style O fill:#81ecec,stroke:#ffffff,stroke-width:3px,color:#000000\n\né…ç½®æ§åˆ¶é€‰é¡¹YooAssetæä¾›äº†DisableOnDemandDownloadé…ç½®é¡¹æ¥æ§åˆ¶æŒ‰éœ€ä¸‹è½½è¡Œä¸ºï¼š\n// åœ¨åˆå§‹åŒ–å‚æ•°ä¸­é…ç½®var initParameters = new HostPlayModeParameters()&#123;    // å…¶ä»–é…ç½®...    DisableOnDemandDownload = false  // å…è®¸æŒ‰éœ€ä¸‹è½½ï¼ˆé»˜è®¤ï¼‰&#125;;\n\né…ç½®é€‰é¡¹å¯¹æ¯”ï¼š\n\n\n\nåœºæ™¯\nDisableOnDemandDownload\nè¡Œä¸º\né€‚ç”¨æƒ…å†µ\n\n\n\nåœ¨çº¿æ¸¸æˆ\nfalse\nè‡ªåŠ¨ä¸‹è½½æœªç¼“å­˜èµ„æº\nç½‘ç»œç¯å¢ƒè‰¯å¥½ï¼Œå…è®¸åŠ¨æ€ä¸‹è½½\n\n\nç¦»çº¿æ¨¡å¼\ntrue\nåªåŠ è½½å·²ç¼“å­˜èµ„æº\nç½‘ç»œå—é™æˆ–è¦æ±‚å®Œå…¨ç¦»çº¿è¿è¡Œ\n\n\né¢„ä¸‹è½½éªŒè¯\ntrue\nç¡®ä¿èµ„æºå®Œæ•´æ€§\nå‘å¸ƒå‰éªŒè¯æ‰€æœ‰èµ„æºå·²å°±ç»ª\n\n\nç”¨æˆ·ä»£ç çš„æœ€ä½³å®è·µ1. é¢„æ£€æŸ¥æ¨¡å¼// æ£€æŸ¥èµ„æºæ˜¯å¦éœ€è¦ä¸‹è½½bool needDownload = package.IsNeedDownloadFromRemote(&quot;UI/MainPanel&quot;);if (needDownload)&#123;    // æç¤ºç”¨æˆ·èµ„æºéœ€è¦ä¸‹è½½    ShowDownloadTip(&quot;èµ„æºéœ€è¦ä¸‹è½½ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ&quot;);        // åˆ›å»ºä¸“é—¨çš„ä¸‹è½½å™¨è¿›è¡Œä¸‹è½½    var downloader = package.CreateBundleDownloader(&quot;UI/MainPanel&quot;, 3, 3);    downloader.BeginDownload();        // ç­‰å¾…ä¸‹è½½å®Œæˆåå†åŠ è½½    yield return downloader;    if (downloader.Status == EOperationStatus.Succeed)    &#123;        var handle = package.LoadAssetAsync&lt;GameObject&gt;(&quot;UI/MainPanel&quot;);        yield return handle;    &#125;&#125;else&#123;    // èµ„æºå·²å­˜åœ¨ï¼Œç›´æ¥åŠ è½½    var handle = package.LoadAssetAsync&lt;GameObject&gt;(&quot;UI/MainPanel&quot;);    yield return handle;&#125;\n\n2. é€æ˜åŠ è½½æ¨¡å¼// ç›´æ¥åŠ è½½ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†æœªä¸‹è½½çš„æƒ…å†µvar handle = package.LoadAssetAsync&lt;GameObject&gt;(&quot;UI/MainPanel&quot;);// ç›‘å¬åŠ è½½è¿›åº¦ï¼ˆåŒ…å«ä¸‹è½½è¿›åº¦ï¼‰while (!handle.IsDone)&#123;    // è¿™é‡Œçš„è¿›åº¦åŒ…å«äº†å¯èƒ½çš„ä¸‹è½½è¿›åº¦    Debug.Log($&quot;Loading Progress: &#123;handle.Progress&#125;&quot;);    yield return null;&#125;if (handle.Status == EOperationStatus.Succeed)&#123;    var gameObject = handle.InstantiateSync();    // ä½¿ç”¨èµ„æº...&#125;else&#123;    Debug.LogError($&quot;Failed to load asset: &#123;handle.Error&#125;&quot;);&#125;\n\n3. æ‰¹é‡é¢„ä¸‹è½½æ¨¡å¼// åœ¨é€‚å½“çš„æ—¶æœºï¼ˆå¦‚åœºæ™¯åŠ è½½å‰ï¼‰æ‰¹é‡ä¸‹è½½public IEnumerator PredownloadSceneAssets(string sceneTag)&#123;    // åˆ›å»ºåŸºäºTagçš„ä¸‹è½½å™¨    var downloader = package.CreateResourceDownloader(sceneTag, 5, 3);        if (downloader.TotalDownloadCount &gt; 0)    &#123;        // æ˜¾ç¤ºä¸‹è½½UI        ShowDownloadProgress();                downloader.BeginDownload();        while (!downloader.IsDone)        &#123;            // æ›´æ–°ä¸‹è½½è¿›åº¦UI            UpdateDownloadProgress(downloader.Progress,                                  downloader.DownloadedBytes,                                  downloader.TotalDownloadBytes);            yield return null;        &#125;                // éšè—ä¸‹è½½UI        HideDownloadProgress();                if (downloader.Status != EOperationStatus.Succeed)        &#123;            Debug.LogError(&quot;Predownload failed!&quot;);            yield break;        &#125;    &#125;        // ç°åœ¨å¯ä»¥ç›´æ¥åŠ è½½åœºæ™¯èµ„æºï¼Œæ— éœ€æ‹…å¿ƒä¸‹è½½é—®é¢˜    LoadSceneAssets();&#125;\n\næ€»ç»“YooAssetçš„èµ„æºåŠ è½½ç³»ç»Ÿé‡‡ç”¨äº†é«˜åº¦æ¨¡å—åŒ–çš„è®¾è®¡ï¼š\n\nåˆ†å±‚æ¶æ„ï¼šResourcePackage â†’ ResourceManager â†’ Provider â†’ Handle çš„æ¸…æ™°åˆ†å±‚\nç±»å‹å®‰å…¨ï¼šé€šè¿‡æ³›å‹å’ŒAssetInfoç¡®ä¿ç±»å‹å®‰å…¨\næŒ‰éœ€ä¸‹è½½ï¼šé€æ˜çš„æŒ‰éœ€ä¸‹è½½æœºåˆ¶ï¼Œæ”¯æŒåœ¨çº¿å’Œç¦»çº¿æ¨¡å¼\næ€§èƒ½ä¼˜åŒ–ï¼šProviderå¤ç”¨ã€å¹¶å‘æ§åˆ¶ã€å¹³å°ç‰¹å®šä¼˜åŒ–\né”™è¯¯å¤„ç†ï¼šå®Œå–„çš„éªŒè¯å’Œé”™è¯¯å¤„ç†æœºåˆ¶\nè°ƒè¯•æ”¯æŒï¼šä¸°å¯Œçš„è°ƒè¯•æ¥å£å’ŒçŠ¶æ€ç›‘æ§\nçµæ´»é…ç½®ï¼šæ”¯æŒå¤šç§ä¸‹è½½ç­–ç•¥å’Œé…ç½®æ¨¡å¼\n\næŒ‰éœ€ä¸‹è½½æœºåˆ¶çš„æ ¸å¿ƒç‰¹æ€§ï¼š\n\né€æ˜æ€§ï¼šç”¨æˆ·è°ƒç”¨åŠ è½½æ¥å£æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨æ£€æŸ¥å¹¶å¤„ç†æœªä¸‹è½½èµ„æº\nå¯é…ç½®æ€§ï¼šé€šè¿‡DisableOnDemandDownloadæ§åˆ¶æŒ‰éœ€ä¸‹è½½è¡Œä¸º\nçŠ¶æ€ç›‘æ§ï¼šæä¾›å®Œæ•´çš„ä¸‹è½½è¿›åº¦å’ŒçŠ¶æ€åé¦ˆ\né”™è¯¯å¤„ç†ï¼šè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¤±è´¥å¤„ç†æœºåˆ¶\nä¾èµ–å¤„ç†ï¼šè‡ªåŠ¨å¤„ç†èµ„æºä¾èµ–çš„ä¸‹è½½éœ€æ±‚\n\nè¿™ç§è®¾è®¡æ—¢ä¿è¯äº†é«˜æ€§èƒ½ï¼Œåˆæä¾›äº†è‰¯å¥½çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ï¼ŒåŒæ—¶é€šè¿‡æŒ‰éœ€ä¸‹è½½æœºåˆ¶å®ç°äº†åœ¨çº¿å’Œç¦»çº¿æ¨¡å¼çš„å®Œç¾ç»“åˆï¼Œæ˜¯ä¸€ä¸ªä¼˜ç§€çš„èµ„æºç®¡ç†ç³»ç»Ÿå®ç°ã€‚\n","categories":["Unity"],"tags":["YooAssets"]},{"title":"vimè¸©å‘è®°å½•-E117","url":"/2024/10/30/vim_E117/","content":"æœ€è¿‘åˆšæ¢äº†æ–°çš„ç”µè„‘ï¼Œåœ¨æœ€åˆä½¿ç”¨çš„æ—¶å€™ä¹Ÿæ²¡æœ‰è®°å½•ä¸€ä¸‹é…ç½®æµç¨‹ï¼Œæ‰€ä»¥é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè¿™æ¬¡ç»Ÿä¸€è®°å½•ä¸€ä¸‹ã€‚\nE117é—®é¢˜ï¼šåœ¨ä»£ç ä¸­æœ‰æ’ä»¶ç®¡ç†ä¸‹è½½ï¼Œä½†æ˜¯ è¿è¡Œæ—¶æŠ¥é”™â€E117â€\n&quot; å®‰è£… vim-plug æ’ä»¶ç®¡ç†å™¨if empty(glob(&#x27;~/.vim/autoload/plug.vim&#x27;))c  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim  autocmd VimEnter * PlugInstall --sync | source $MYVIMRCendif\nåŸå› ï¼šç½‘ç»œé—®é¢˜ï¼Œcurlæ— æ³•è¿æ¥ç½‘ç»œä¸‹è½½æ’ä»¶è§£å†³æ–¹æ¡ˆï¼šä¸ºcurlæ·»åŠ ç½‘ç»œä»£ç†ï¼Œç¤ºä¾‹ï¼š\ncurl -x http://localhost:8080(ä»£ç†åœ°å€) -fLo  ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\n","categories":["Vim"],"tags":["éƒ¨ç½²"]},{"title":"wslä¸­é…ç½®clashä»£ç†","url":"/2025/06/17/Configuring_Clash_Proxy_in_WSL/","content":"æ¦‚è¿°æœ€è¿‘åœ¨æœ¬åœ°éƒ¨ç½² Claude Codeï¼Œå› ä¸ºè¦ä¸‹è½½éœ€è¦ä»£ç†ï¼Œæ‰€ä»¥æœ¬æ•™ç¨‹è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨ WSL (Windows Subsystem for Linux) ä¸­é…ç½® Clash for Windows ä»£ç†ï¼Œå®ç° WSL ç¯å¢ƒä¸‹çš„ç½‘ç»œä»£ç†è®¿é—®ã€‚\nå‰ææ¡ä»¶\nå·²å®‰è£… WSL\nå·²å®‰è£…å¹¶è¿è¡Œ Clash for Windows\nClash for Windows ä½¿ç”¨é»˜è®¤ç«¯å£ 7890\n\né…ç½®æ­¥éª¤ç¬¬ä¸€æ­¥ï¼šç¡®è®¤ Clash for Windows è®¾ç½®\næ‰“å¼€ Clash for Windows\nåœ¨ General æ ‡ç­¾é¡µä¸­ï¼š\nç¡®ä¿ Allow LAN é€‰é¡¹å·²å¼€å¯ï¼ˆè¿™æ˜¯å…³é”®æ­¥éª¤ï¼ï¼‰\nç¡®è®¤ HTTP Port ä¸º 7890\nç¡®è®¤ Socks Port ä¸º 7891\n\n\n\nç¬¬äºŒæ­¥ï¼šè·å– Windows ä¸»æœº IP åœ°å€åœ¨ WSL ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è·å– Windows ä¸»æœº IPï¼š\n# æ–¹æ³•ä¸€ï¼šé€šè¿‡ resolv.conf è·å–cat /etc/resolv.conf | grep nameserver | awk &#x27;&#123;print $2&#125;&#x27;# æ–¹æ³•äºŒï¼šé€šè¿‡è·¯ç”±è¡¨è·å–ï¼ˆæ¨èï¼‰ip route show | grep default | awk &#x27;&#123;print $3&#125;&#x27;\n\næ³¨æ„ï¼šé€šå¸¸æ–¹æ³•äºŒå¾—åˆ°çš„ IP åœ°å€æ›´å‡†ç¡®ï¼Œå¦‚æœ¬ä¾‹ä¸­å¾—åˆ°çš„ 172.28.176.1ã€‚\nç¬¬ä¸‰æ­¥ï¼šè®¾ç½®ä¸´æ—¶ä»£ç†ç¯å¢ƒå˜é‡ä½¿ç”¨è·å¾—çš„ IP åœ°å€è®¾ç½®ä»£ç†ï¼ˆä»¥ 172.28.176.1 ä¸ºä¾‹ï¼‰ï¼š\n# æ¸…é™¤ä¹‹å‰çš„ä»£ç†è®¾ç½®unset http_proxyunset https_proxyunset all_proxy# è®¾ç½®æ–°çš„ä»£ç†export http_proxy=http://172.28.176.1:7890export https_proxy=http://172.28.176.1:7890export all_proxy=socks5://172.28.176.1:7891\n\nç¬¬å››æ­¥ï¼šæµ‹è¯•ä»£ç†è¿æ¥# æµ‹è¯•ä»£ç†æ˜¯å¦å·¥ä½œcurl -I https://www.google.com\n\næˆåŠŸçš„å“åº”ç¤ºä¾‹ï¼š\nHTTP/1.1 200 Connection establishedHTTP/2 200content-type: text/html; charset=ISO-8859-1...\n\nç¬¬äº”æ­¥ï¼šé…ç½®æ°¸ä¹…ä»£ç†è®¾ç½®1. åˆ›å»ºä»£ç†è®¾ç½®è„šæœ¬# åˆ›å»ºä»£ç†é…ç½®è„šæœ¬cat &gt; ~/.proxy_setup.sh &lt;&lt; &#x27;EOF&#x27;#!/bin/bash# WSL Clash ä»£ç†é…ç½®è„šæœ¬# è·å– Windows ä¸»æœº IPWINDOWS_IP=$(ip route show | grep default | awk &#x27;&#123;print $3&#125;&#x27;)# è®¾ç½®ä»£ç†ç¯å¢ƒå˜é‡export http_proxy=http://$WINDOWS_IP:7890export https_proxy=http://$WINDOWS_IP:7890export all_proxy=socks5://$WINDOWS_IP:7891echo &quot;ä»£ç†å·²è®¾ç½®: $WINDOWS_IP&quot;echo &quot;HTTP/HTTPS ä»£ç†ç«¯å£: 7890&quot;echo &quot;SOCKS5 ä»£ç†ç«¯å£: 7891&quot;EOF# èµ‹äºˆæ‰§è¡Œæƒé™chmod +x ~/.proxy_setup.sh\n\n2. å°†ä»£ç†è®¾ç½®æ·»åŠ åˆ° shell é…ç½®æ–‡ä»¶# æ·»åŠ åˆ° .bashrc æ–‡ä»¶æœ«å°¾echo &quot;&quot; &gt;&gt; ~/.bashrcecho &quot;# WSL Clash ä»£ç†è®¾ç½®&quot; &gt;&gt; ~/.bashrcecho &quot;source ~/.proxy_setup.sh&quot; &gt;&gt; ~/.bashrc\n\n3. åˆ›å»ºå¿«æ·å‘½ä»¤# åˆ›å»ºå¯ç”¨/ç¦ç”¨ä»£ç†çš„å¿«æ·å‘½ä»¤echo &#x27;alias proxy-on=&quot;source ~/.proxy_setup.sh&quot;&#x27; &gt;&gt; ~/.bashrcecho &#x27;alias proxy-off=&quot;unset http_proxy https_proxy all_proxy &amp;&amp; echo \\&quot;ä»£ç†å·²å…³é—­\\&quot;&quot;&#x27; &gt;&gt; ~/.bashrcecho &#x27;alias proxy-status=&quot;echo \\&quot;HTTPä»£ç†: \\$http_proxy\\&quot; &amp;&amp; echo \\&quot;HTTPSä»£ç†: \\$https_proxy\\&quot; &amp;&amp; echo \\&quot;SOCKSä»£ç†: \\$all_proxy\\&quot;&quot;&#x27; &gt;&gt; ~/.bashrc\n\n4. é‡æ–°åŠ è½½é…ç½®source ~/.bashrc\n\nå®‰è£… npmä»£ç†é…ç½®æˆåŠŸåï¼Œå¯ä»¥æ­£å¸¸å®‰è£… npmï¼š\n# æ›´æ–°åŒ…åˆ—è¡¨sudo apt update# å®‰è£… Node.js å’Œ npmsudo apt install -y nodejs npm# éªŒè¯å®‰è£…node --versionnpm --version\n\nå®ç”¨å‘½ä»¤é…ç½®å®Œæˆåï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç®¡ç†ä»£ç†ï¼š\n\nproxy-on - å¯ç”¨ä»£ç†\nproxy-off - å…³é—­ä»£ç†\nproxy-status - æŸ¥çœ‹å½“å‰ä»£ç†çŠ¶æ€\n\næ•…éšœæ’é™¤å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ\nè¿æ¥è¢«æ‹’ç» (Connection refused)\n\næ£€æŸ¥ Clash for Windows æ˜¯å¦æ­£åœ¨è¿è¡Œ\nç¡®è®¤ Allow LAN é€‰é¡¹å·²å¼€å¯\néªŒè¯ç«¯å£å·æ˜¯å¦æ­£ç¡®\n\n\nIP åœ°å€é—®é¢˜\n\nå°è¯•ä½¿ç”¨ä¸åŒçš„æ–¹æ³•è·å– Windows ä¸»æœº IP\næœ‰æ—¶ /etc/resolv.conf ä¸­çš„ IP å¯èƒ½ä¸å‡†ç¡®\n\n\næƒé™é—®é¢˜\n\nç¡®ä¿æœ‰è¶³å¤Ÿæƒé™æ‰§è¡Œ sudo å‘½ä»¤\næ£€æŸ¥è„šæœ¬æ–‡ä»¶çš„æ‰§è¡Œæƒé™\n\n\né˜²ç«å¢™é—®é¢˜\n\nWindows é˜²ç«å¢™å¯èƒ½é˜»æ­¢ WSL è®¿é—® Windows ä¸Šçš„ç«¯å£\nè€ƒè™‘åœ¨ Windows é˜²ç«å¢™ä¸­æ·»åŠ ä¾‹å¤–è§„åˆ™\n\n\n\né…ç½®éªŒè¯æˆåŠŸé…ç½®åï¼Œåº”è¯¥èƒ½å¤Ÿï¼š\n\nâœ… è®¿é—® Google ç­‰è¢«å¢™ç½‘ç«™\nâœ… æ­£å¸¸ä½¿ç”¨ npm install\nâœ… ä½¿ç”¨ git clone ä» GitHub å…‹éš†ä»“åº“\nâœ… ä½¿ç”¨ wget&#x2F;curl ä¸‹è½½æ–‡ä»¶\n\næ³¨æ„äº‹é¡¹\næ¯æ¬¡é‡å¯ WSL åä»£ç†ä¼šé‡æ–°è‡ªåŠ¨é…ç½®ï¼ˆå¦‚æœæŒ‰ç…§æ°¸ä¹…é…ç½®æ­¥éª¤è®¾ç½®ï¼‰\nClash for Windows å¿…é¡»ä¿æŒè¿è¡ŒçŠ¶æ€\nAllow LAN é€‰é¡¹æ˜¯å…³é”®è®¾ç½®ï¼Œå¿…é¡»å¼€å¯\n\n\né€‚ç”¨ç¯å¢ƒ: Windows 11 + WSL + Clash for Windowsæµ‹è¯•çŠ¶æ€: âœ… å·²éªŒè¯å¯ç”¨\n","categories":["AI Code"],"tags":["WSL"]},{"title":"å…³äºOOPåˆ°ç»„ä»¶å¼åˆ°ECSçš„æ€è€ƒ","url":"/2025/11/02/Thoughts_on_OOP_to_Component-Based_to_ECS/","content":"æœ¬æ–‡ä¸»è¦æ€»ç»“æœ€è¿‘åœ¨å­¦ä¹ ECSæ¶æ„æ—¶çš„ä¸€äº›å¿ƒå¾—ä½“ä¼šã€‚ä¸»è¦å…³äºOOPã€ç»„ä»¶å¼å¼€å‘å’ŒECSæ¶æ„ä¸‰è€…ä¹‹é—´çš„è”ç³»ã€‚\né¢å‘å¯¹è±¡åœ¨é¢å‘å¯¹è±¡çš„å¼€å‘ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å¤ç”¨ä¸€äº›ä»£ç ï¼Œé€šå¸¸ä¼šç”¨åˆ°ç±»çš„é›†æˆå’Œå¤šæ€ã€‚ç¤ºä¾‹ï¼š\nclassDiagram\n    class WorldTarget {\n        +position()\n        +render()\n    }\n\n    class Player {\n        +position()\n        +render()\n        +attack()\n    }\n\n    class Enemy {\n        +position()\n        +render()\n        +chasePlayer()\n    }\n\n    class EnemyX {\n        +position()\n        +render()\n        +chasePlayer()\n        +specialAttack()\n    }\n\n    class EnemyY {\n        +position()\n        +render()\n        +chasePlayer()\n        +defend()\n    }\n    \n\n    WorldTarget  Entities\n    Scheduler --> Render --> Entities\n    Physics --> Components\n    Position --> Components\n    Render --> Components\n    Entities -.å¼•ç”¨.-> Components","categories":["Unity"],"tags":["ECS","OOP","ç»„ä»¶å¼"]},{"title":"å…³äºæ¸¸æˆç¨‹åºå‘å±•æ–¹å‘çš„æµ…æµ…æ€è€ƒ","url":"/2025/11/02/A_Simple_Reflection_on_the_Development_Direction_of_Game_Programming/","content":"ä½œä¸ºæ¸¸æˆå¼€å‘è¡Œä¸šçš„æ–°äººï¼ˆè¿˜ç®—å§ï¼‰ï¼Œç»å¸¸ä¼šæ€è€ƒè‡ªå·±çš„å‘å±•æ–¹å‘æ˜¯ä»€ä¹ˆï¼Œä»¥å‰ç»å¸¸ä¼šçœ‹ boss æˆ–è€…å…¶ä»–æ‹›è˜å¹³å°å¯¹äººå‘˜çš„éœ€æ±‚ï¼Œçœ‹åˆ°å„ç§ GamePlay å‘ï¼Œå·¥å…·å‘ï¼ŒTA å‘ç­‰ç­‰ç±»çš„å²—ä½ï¼Œä½†æ˜¯ä»æ¥æ²¡æœ‰æ€»ç»“è¿‡ã€‚è¿™ç¯‡æ–‡ç« å°±æ˜¯æ€»ç»“æˆ‘å¯¹æ¸¸æˆç¨‹åºå‘å±•æ–¹å‘çš„æ€è€ƒ~\nå››å¤§æ–¹å‘æˆ‘æ‰€è®¤ä¸ºçš„æ¸¸æˆç¨‹åºçš„å‘å±•æ–¹å‘å¤§ä½“åˆ†ä¸ºå››ä¸ªå¤§æ–¹å‘ï¼Œåˆ†åˆ«æ˜¯ GamePlayã€ç®¡ç†ã€å›¾å½¢ã€ä¼˜åŒ–\nç©æ³•ï¼ˆGamePlayï¼‰æ ¸å¿ƒèŒè´£ï¼šä¸»è¦è´Ÿè´£æ¸¸æˆç©æ³•ç›¸å…³çš„ä»£ç å®ç°ï¼ŒåŒ…å«ä½†ä¸é™äºè§’è‰²æ§åˆ¶ã€æˆ˜æ–—ç³»ç»Ÿã€ä»»åŠ¡ç³»ç»Ÿã€UI äº¤äº’ç­‰\nGamePlay ç¨‹åºå‘˜æ˜¯æ¸¸æˆå¼€å‘ä¸­æœ€å¸¸è§çš„è§’è‰²ï¼Œä»–ä»¬è´Ÿè´£å®ç°æ¸¸æˆçš„æ ¸å¿ƒç©æ³•å’ŒåŠŸèƒ½ã€‚è¿™ä¸ªæ–¹å‘çš„ç¨‹åºå‘˜éœ€è¦å…·å¤‡è‰¯å¥½çš„ç¼–ç¨‹èƒ½åŠ›å’Œå¯¹æ¸¸æˆè®¾è®¡çš„ç†è§£ï¼Œèƒ½å¤Ÿå°†è®¾è®¡å¸ˆçš„æƒ³æ³•è½¬åŒ–ä¸ºå®é™…çš„ä»£ç å®ç°ã€‚ä½†ä¼˜ç§€çš„ GamePlay ç¨‹åºå‘˜éå¸¸å°‘è§ï¼Œæˆ‘æ‰€ç†è§£çš„ä¼˜ç§€ GamePlay ç¨‹åºå‘˜åº”è¯¥å…·å¤‡ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š\n\nè‰¯å¥½çš„ç¼–ç¨‹èƒ½åŠ›ï¼šèƒ½å¤Ÿç¼–å†™é«˜æ•ˆã€å¯ç»´æŠ¤çš„çš„ä»£ç ã€‚\nå¯¹æ¸¸æˆè®¾è®¡çš„ç†è§£ï¼šèƒ½å¤Ÿç†è§£æ¸¸æˆè®¾è®¡å¸ˆçš„æ„å›¾ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºä»£ç å®ç°ã€‚å¾€å¾€èƒ½å¤Ÿæå‡ºå»ºè®¾æ€§çš„æ„è§ï¼Œå¸®åŠ©ä¼˜åŒ–æ¸¸æˆè®¾è®¡ã€‚æ­£å¦‚å¾ˆå¤šæ¸¸æˆè€æ¿æ‰€æƒ³è¦çš„æ¯æ¬¡åšéœ€æ±‚éƒ½èƒ½ä¸€éåšå®Œç”šè‡³æƒŠè‰³çš„å®ç°ã€‚\n\nç®¡ç†æ ¸å¿ƒèŒè´£: ä¸»è¦è´Ÿè´£å›¢é˜Ÿç®¡ç†ã€é¡¹ç›®è¿›åº¦æŠŠæ§ã€èµ„æºåè°ƒã€å‘ä¸Šå’Œæ¨ªå‘æ²Ÿé€šèƒ½åŠ›ç­‰\né€šå¸¸æ˜¯é¡¹ç›®ç®¡ç†æˆ–æŠ€æœ¯ç®¡ç†çš„è§’è‰²ï¼Œè´Ÿè´£åè°ƒå›¢é˜Ÿæˆå‘˜ã€åˆ¶å®šé¡¹ç›®è®¡åˆ’ã€ç¡®ä¿é¡¹ç›®æŒ‰æ—¶äº¤ä»˜ç­‰ã€‚ä»–ä»¬éœ€è¦å…·å¤‡è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œé¢†å¯¼èƒ½åŠ›ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°ç®¡ç†å›¢é˜Ÿèµ„æºå’Œæ—¶é—´ã€‚\nå›¾å½¢æ ¸å¿ƒèŒè´£: ä¸»è¦è´Ÿè´£å›¾å½¢æ¸²æŸ“ã€è§†è§‰æ•ˆæœå®ç°ã€å›¾å½¢å¼•æ“å¼€å‘æˆ–ç›¸å…³å·¥å…·çš„å¼€å‘ç­‰\näº†è§£æ¸¸æˆä¸­æ¯ä¸€ä¸ªåƒç´ æ˜¯å¦‚ä½•è¢«æ¸²æŸ“å‡ºæ¥çš„ï¼Œç†Ÿæ‚‰å›¾å½¢å­¦ç›¸å…³çŸ¥è¯†ï¼Œèƒ½å¤Ÿä¼˜åŒ–æ¸²æŸ“ç®¡çº¿ï¼Œæé«˜æ¸¸æˆçš„è§†è§‰æ•ˆæœå’Œæ€§èƒ½ã€‚å›¾å½¢ç¨‹åºå‘˜é€šå¸¸éœ€è¦å…·å¤‡è¾ƒå¼ºçš„æ•°å­¦å’Œç‰©ç†åŸºç¡€ï¼Œèƒ½å¤Ÿç†è§£å’Œå®ç°å¤æ‚çš„å›¾å½¢ç®—æ³•ã€‚é€šå¸¸èƒ½é€šè¿‡ä»£ç å®ç°å„ç§ç‚«é…·çš„è§†è§‰æ•ˆæœã€‚\nä¼˜åŒ–&#x2F;åº•å±‚æ ¸å¿ƒèŒè´£: ä¸»è¦è´Ÿè´£æ¸¸æˆæ€§èƒ½ä¼˜åŒ–ã€åº•å±‚ç³»ç»Ÿå¼€å‘ã€å†…å­˜ç®¡ç†ã€æ ¸å¿ƒæŠ€æœ¯æ–¹å‘æŠŠæ§ç­‰\nä¸“æ³¨äºæå‡æ¸¸æˆçš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œè´Ÿè´£åˆ†æå’Œè§£å†³æ€§èƒ½ç“¶é¢ˆï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨å’ŒåŠ è½½æ—¶é—´ç­‰ã€‚ä»–ä»¬éœ€è¦å…·å¤‡æ·±å…¥çš„ç³»ç»ŸçŸ¥è¯†å’Œè°ƒè¯•èƒ½åŠ›ï¼Œèƒ½å¤Ÿç†è§£åº•å±‚æ¶æ„å’Œæ“ä½œç³»ç»ŸåŸç†ã€‚é€šå¸¸èƒ½é€šè¿‡å„ç§æ‰‹æ®µè®©æ¸¸æˆè·‘å¾—æ›´æµç•…ã€‚\nç»„åˆå¤§éƒ¨åˆ†æ¸¸æˆç¨‹åºå…¶å®éƒ½æ˜¯åœ¨è¿™å››ä¸ªå¤§æ–¹å‘ä¸­è¿›è¡Œç»„åˆå‘å±•ï¼Œä¸€èˆ¬å¦‚æœå¯ä»¥æ·±å…¥ä¸¤ä¸ªæ–¹å‘å°±å·²ç»æ˜¯å¾ˆä¼˜ç§€çš„æ¸¸æˆå¼€å‘è€…äº†ã€‚ç¤ºä¾‹ï¼š\n\nGamePlay + ä¼˜åŒ–ï¼šæ¸¸æˆå¤§å¤´å…µï¼Œé¡¹ç›®ä¸­æ ¸å¿ƒç©æ³•çš„å®ç°è€…ï¼ŒåŒæ—¶è´Ÿè´£æ€§èƒ½ä¼˜åŒ–ï¼Œç¡®ä¿æ¸¸æˆè¿è¡Œæµç•…ã€‚\nç®¡ç† + GamePlayï¼šæŠ€æœ¯ä¸»ç®¡ï¼Œæ—¢è´Ÿè´£å›¢é˜Ÿç®¡ç†ï¼Œåˆèƒ½æ·±å…¥å‚ä¸æ ¸å¿ƒç©æ³•çš„å¼€å‘ã€‚\nä¼˜åŒ– + ç®¡ç†ï¼šæŠ€æœ¯ä¸»ç®¡ï¼Œä¸€èˆ¬ä¸å‚ä¸æ¸¸æˆçš„å…·ä½“ç©æ³•å¼€å‘ï¼Œä½†è´Ÿè´£æ•´ä½“æŠ€æœ¯æ–¹å‘å’Œæ€§èƒ½ä¼˜åŒ–ã€‚\nå›¾å½¢ + ä¼˜åŒ–ï¼šå›¾å½¢ä¼˜åŒ–ä¸“å®¶ã€‚\nâ€¦\n\nåè®°æœ¬ç¯‡åªæ˜¯ä½œè€…å¯¹æ¸¸æˆç¨‹åºå‘å±•æ–¹å‘çš„æµ…æ˜¾æ€è€ƒï¼Œæ¬¢è¿å„ä½å¤§ä½¬æŒ‡æ­£è¡¥å……~ä¸€ä¸ªå¥½çš„æ–¹å‘æ˜¯å‰è¿›çš„å¼€å§‹ï¼Œç¥å„ä½æ¸¸æˆå¼€å‘è€…éƒ½èƒ½æ‰¾åˆ°é€‚åˆè‡ªå·±çš„å‘å±•æ–¹å‘~\n","categories":["Unity"],"tags":["æ¸¸æˆå¼€å‘","ç¨‹åºå‘˜å‘å±•"]},{"title":"å†…ç½‘ç©¿é€â€”åŸºäºfrpå®ç°è¿œç¨‹æ¡Œé¢","url":"/2024/10/30/frp_remote_desktop/","content":"è¦åšå¥½ä¿æŠ¤å·¥ä½œï¼Œæœ‰è¢«å…¥ä¾µé£é™©ï¼ï¼ï¼ï¼è¦åšå¥½ä¿æŠ¤å·¥ä½œï¼Œæœ‰è¢«å…¥ä¾µé£é™©ï¼ï¼ï¼ï¼è¦åšå¥½ä¿æŠ¤å·¥ä½œï¼Œæœ‰è¢«å…¥ä¾µé£é™©ï¼ï¼ï¼ï¼  \nä½¿ç”¨frpé…ç½®è¿œç¨‹æ¡Œé¢ç”¨æˆ·è´¦æˆ·é™åˆ¶é˜»æ­¢ç™»å½•è§£å†³ä¿®å¤ä½ çš„å‡­æ®ä¸å·¥ä½œ\nè¿æ¥æ—¶çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯ ç”µè„‘ç”¨æˆ·å’Œé”å±å¯†ç ã€‚å¦‚æœä½¿ç”¨äº†å¾®è½¯è´¦å·ç™»å½•ï¼Œè€Œéæœ¬åœ°è´¦æˆ·ï¼Œä½¿ç”¨ç”µè„‘ç”¨æˆ·åå’Œå¾®è½¯è´¦å·å¯†ç \n","categories":["ä¾¿æ·å·¥ä½œ"],"tags":["è¿œç¨‹æ¡Œé¢"]},{"title":"æ€§èƒ½ä¼˜åŒ–-é™æ€èµ„æºä¼˜åŒ–-éŸ³ä¹éŸ³æ•ˆèµ„æº","url":"/2025/05/12/Performance%20Optimization%20-%20Static%20Resource%20Optimization%20-%20Music%20and%20Sound%20Effect%20Resources/","content":"éŸ³é¢‘å£°é“å¦‚æœéŸ³é¢‘ä¸ºåŒå£°é“éŸ³é¢‘ä¸”å·¦å³å£°é“éŸ³é¢‘å®Œå…¨ç›¸åŒï¼Œå¯ä»¥å¯ç”¨ Force To Mono å¼ºè¡Œå°†éŸ³é¢‘æ”¹ä¸ºå•å£°é“éŸ³é¢‘\néŸ³é¢‘é‡‡æ ·ç‡ç§»åŠ¨å¹³å°å»ºè®® 22050 Hz\nåŠ è½½æ–¹å¼Decompress On Loadï¼šå»ºè®®å‹ç¼©åå¤§å°ä½äº 200 kb çš„éŸ³æ•ˆæ–‡ä»¶Compressed In Memoryï¼šå¤§äº 200kbStreamingï¼šè¾ƒå¤§æ–‡ä»¶ï¼Œå¦‚èƒŒæ™¯éŸ³ä¹æ–‡ä»¶\néŸ³é¢‘æºæºæ–‡ä»¶ä¿¡æ¯éŸ³é¢‘åŸå§‹èµ„æºå¤§å°ï¼šå¯¼å…¥å‹ç¼©åçš„å¤§å°ï¼šå‹ç¼©æ¯”ï¼šå°½å¯èƒ½ä½¿ç”¨æœªå‹ç¼©çš„ wav éŸ³é¢‘æºæ–‡ä»¶\nå‹ç¼©æ–¹å¼&#x2F;Pasted%20image%2020250520130914.pngPasted%20image%2020250520131255- PCMï¼šï¼ˆPulse-Code Modulationï¼‰å±äºè„‰å†²è°ƒåˆ¶ç¼–ç ï¼Œå®ƒå°†æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºæ•°å­—ä¿¡å·ï¼Œå®è´¨ä¸Šæ²¡æœ‰ç»è¿‡ç¼–ç ï¼Œæ²¡æœ‰è¿›è¡Œå‹ç¼©ï¼Œæ‰€ä»¥éŸ³è´¨ä¸Šå±äºå®Œå…¨æ— æŸçš„åŸå§‹éŸ³é¢‘ã€‚è€Œä¸”ç›¸è¾ƒäºåŸç”Ÿçš„æ¨¡æ‹Ÿä¿¡å·ï¼Œå®ƒçš„æŠ—å¹²æ‰°èƒ½åŠ›&#x2F;Pasted%20image%2020250520130914.pngPasted%20image%2020250520131255å¼ºï¼Œä¿çœŸæ•ˆæœæ›´å¥½ã€‚- Vorbisï¼šï¼ˆOGG Vorbisï¼‰ ç±»ä¼¼äº MP3 æ ¼å¼ï¼Œä½†è¿™æ˜¯ä¸€ç§å…è´¹å¼€å‘çš„éå•†ä¸šå‹ç¼©æ ¼å¼ã€‚å±äºæœ‰æŸå‹ç¼©- ADPCMï¼šï¼ˆAdaptive Differential Pulse Code Modulationï¼‰ è‡ªé€‚åº”å·®åˆ†è„‰å†²ç¼–ç è°ƒåˆ¶ã€‚æ˜¯ä¸€ç§åŸºäº PCM çš„ä¼˜åŒ–å‹ç¼©æ–¹å¼ï¼Œä½†ä¹Ÿå±äºæœ‰æŸå‹ç¼©ã€‚\nå®‰å“ç§»åŠ¨å¹³å°ä¸€èˆ¬ä½¿ç”¨ Vorbis æ¨¡å¼\nIos å¯¹ MP3 æ ¼å¼æœ‰ä¼˜åŒ–\n\nåŠ è½½ç±»å‹\n\nDecompress On Load: éŸ³é¢‘æ–‡ä»¶ä»¥å‹ç¼©å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼ŒåŠ è½½æ—¶ç›´æ¥è§£å‹æ”¾åœ¨å†…å­˜ä¸­ã€‚è¿™ç§æ–¹å¼åœ¨å†…å­˜å ç”¨ä¸Šæ²¡æœ‰ä¼˜åŠ¿ï¼Œä½†åœ¨åç»­æ’­æ”¾æ—¶å¯¹ CPU çš„è®¡ç®—éœ€æ±‚æ˜¯æœ€å°çš„ã€‚ä¸€èˆ¬æ¥è¯´è¿™ç§æ–¹å¼æ›´é€‚åˆçŸ­å°çš„éŸ³é¢‘\nCompressed In Memory:éŸ³é¢‘æ–‡ä»¶ä»¥å‹ç¼©å½¢å¼å­˜æ”¾åœ¨å†…å­˜é‡Œï¼Œä½¿ç”¨æ—¶å†è§£å‹ã€‚è¿™æ„å‘³ç€ä¼šæœ‰æ›´å¤šçš„ CPU å¼€é”€ï¼Œä½†æ˜¯åœ¨åŠ è½½é€Ÿåº¦å’Œå†…å­˜å ç”¨ä¸Šå…·æœ‰ä¼˜åŠ¿ã€‚é€‚ç”¨äº\nStreaming:éŸ³é¢‘æ–‡ä»¶å­˜åœ¨æ”¾ç£ç›˜ä¸­ï¼ŒåŠ è½½æ—¶å¾ªç¯ä»¥ä¸‹æ“ä½œï¼šâ€œä»ç£ç›˜è¯»å–ä¸€éƒ¨åˆ† -ã€‹ è§£å‹ åˆ°å†…å­˜ä¸­ -ã€‹ æ’­æ”¾ -ã€‹ å¸è½½â€ã€‚è¿™ç§æ–¹å¼åœ¨å†…å­˜å ç”¨ä¸Šç›¸å¯¹è€Œè¨€æ˜¯è¾ƒå°çš„ï¼Œåˆ°é‚£æ—¶åœ¨ CPU æ¶ˆè€—ä¸Šä¸å ä¼˜åŠ¿åœ¨éŸ³é¢‘çš„å®é™…è¿ç”¨ä¸­ï¼ŒèƒŒæ™¯éŸ³ä¹çš„ä½¿ç”¨æ˜¯æ™®éå­˜åœ¨çš„ã€‚å‡ ä¹æ‰€æœ‰æ¸¸æˆéƒ½ä¼šä½¿ç”¨ BGM ä»¥å¢å¼ºå¯¹æ¸¸æˆæ°›å›´å’Œç¯å¢ƒçš„æ¸²æŸ“ã€‚ç»“åˆä»¥ä¸Šå…³äºéŸ³é¢‘åŠ è½½æ–¹å¼çš„æè¿°å¯ä»¥çœ‹å‡ºï¼Œé‡‡ç”¨ Streaming æ–¹å¼å»åŠ è½½èƒŒæ™¯éŸ³ä¹ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘å†…å­˜å ç”¨å’ŒåŠ è½½æ—¶é—´ï¼Œä»è€Œé™ä½ Audio èµ„æºå¯¹é¡¹ç›®æ€»ä½“å†…å­˜å’ŒåŠ è½½æ—¶é—´çš„å½±å“ã€‚\n\næ€»ç»“éŸ³ä¹ä¸ºæ€§èƒ½ç“¶é¢ˆï¼Œä¼˜åŒ–éŸ³ä¹éŸ³æ•ˆå¯ä»¥è¾ƒå°‘å†…å­˜çš„ä½¿ç”¨å’Œå®‰è£…åŒ…å¤§å°ã€‚\nå…¶ä»–æ¸¸æˆéœ€è¦é™éŸ³æ—¶ï¼Œå»ºè®®å°† AudioSource ç»„ä»¶å¸è½½ï¼Œè€Œä¸æ˜¯æŠŠéŸ³é‡é™ä½ä¸º 0\n","categories":["Unity"],"tags":["æ€§èƒ½ä¼˜åŒ–"]},{"title":"Test Mermaid Chart Functionality","url":"/2025/08/01/undefined/","content":"This is a test post to verify Mermaid diagram rendering.\nFlowchartgraph TD;    A--&gt;B;    A--&gt;C;    B--&gt;D;    C--&gt;D;\n\nSequence DiagramsequenceDiagram    participant Alice    participant Bob    Alice-&gt;&gt;John: Hello John, how are you?    loop Healthcheck        John-&gt;&gt;John: Fight against hypochondria    end    Note right of John: Rational thoughts &lt;br/&gt;prevail!    John--&gt;&gt;Alice: Great!    John-&gt;&gt;Bob: How about you?    Bob--&gt;&gt;John: Jolly good!\n","categories":["Test"],"tags":["Mermaid","Test"]},{"title":"æµ‹è¯•ä»£ç é«˜äº®åŠŸèƒ½","url":"/2025/08/01/Test_Code_Highlight_Functionality/","content":"ä»£ç é«˜äº®æµ‹è¯•æµ‹è¯•ä¸åŒç¼–ç¨‹è¯­è¨€çš„ä»£ç é«˜äº®æ•ˆæœã€‚\nC# ä»£ç æµ‹è¯•using System;using System.Collections.Generic;using System.Linq;namespace TestNamespace&#123;    public class TestClass    &#123;        private string _name;        private int _value;                public TestClass(string name, int value)        &#123;            _name = name;            _value = value;        &#125;                public void PrintInfo()        &#123;            Console.WriteLine($&quot;Name: &#123;_name&#125;, Value: &#123;_value&#125;&quot;);        &#125;                public async Task&lt;string&gt; GetDataAsync()        &#123;            await Task.Delay(1000);            return &quot;Data loaded&quot;;        &#125;                // LINQ ç¤ºä¾‹        public List&lt;int&gt; GetEvenNumbers(List&lt;int&gt; numbers)        &#123;            return numbers.Where(n =&gt; n % 2 == 0).ToList();        &#125;    &#125;&#125;\n\nC# Unity ä»£ç æµ‹è¯•using UnityEngine;using System.Collections;public class PlayerController : MonoBehaviour&#123;    [SerializeField] private float speed = 5.0f;    [SerializeField] private Rigidbody rb;        private Vector3 movement;        void Start()    &#123;        rb = GetComponent&lt;Rigidbody&gt;();    &#125;        void Update()    &#123;        float horizontal = Input.GetAxis(&quot;Horizontal&quot;);        float vertical = Input.GetAxis(&quot;Vertical&quot;);                movement = new Vector3(horizontal, 0, vertical);    &#125;        void FixedUpdate()    &#123;        rb.MovePosition(transform.position + movement * speed * Time.fixedDeltaTime);    &#125;&#125;\n\nJavaScript ä»£ç æµ‹è¯•class GameManager &#123;    constructor() &#123;        this.score = 0;        this.players = [];    &#125;        addPlayer(name) &#123;        const player = &#123;            id: Date.now(),            name: name,            score: 0        &#125;;        this.players.push(player);        return player;    &#125;        async loadData() &#123;        try &#123;            const response = await fetch(&#x27;/api/gamedata&#x27;);            const data = await response.json();            this.processData(data);        &#125; catch (error) &#123;            console.error(&#x27;Failed to load data:&#x27;, error);        &#125;    &#125;        updateScore(playerId, points) &#123;        const player = this.players.find(p =&gt; p.id === playerId);        if (player) &#123;            player.score += points;            this.score += points;        &#125;    &#125;&#125;\n\nPython ä»£ç æµ‹è¯•import asyncioimport jsonfrom typing import List, Dict, Optionalclass DataProcessor:    def __init__(self, config: Dict):        self.config = config        self.data = []        async def process_data(self, items: List[Dict]) -&gt; List[Dict]:        &quot;&quot;&quot;å¤„ç†æ•°æ®çš„å¼‚æ­¥æ–¹æ³•&quot;&quot;&quot;        processed = []                for item in items:            # æ•°æ®æ¸…æ´—            cleaned_item = self._clean_item(item)                        # æ•°æ®éªŒè¯            if self._validate_item(cleaned_item):                processed.append(cleaned_item)                return processed        def _clean_item(self, item: Dict) -&gt; Dict:        &quot;&quot;&quot;æ¸…ç†å•ä¸ªæ•°æ®é¡¹&quot;&quot;&quot;        return &#123;k: v.strip() if isinstance(v, str) else v                 for k, v in item.items()&#125;        def _validate_item(self, item: Dict) -&gt; bool:        &quot;&quot;&quot;éªŒè¯æ•°æ®é¡¹&quot;&quot;&quot;        required_fields = self.config.get(&#x27;required_fields&#x27;, [])        return all(field in item for field in required_fields)# ä½¿ç”¨ç¤ºä¾‹async def main():    config = &#123;&quot;required_fields&quot;: [&quot;name&quot;, &quot;email&quot;]&#125;    processor = DataProcessor(config)        data = [        &#123;&quot;name&quot;: &quot;Alice&quot;, &quot;email&quot;: &quot;alice@example.com&quot;&#125;,        &#123;&quot;name&quot;: &quot;Bob&quot;, &quot;email&quot;: &quot;bob@example.com&quot;&#125;    ]        result = await processor.process_data(data)    print(json.dumps(result, indent=2))if __name__ == &quot;__main__&quot;:    asyncio.run(main())\n\nJava ä»£ç æµ‹è¯•import java.util.*;import java.util.stream.Collectors;public class GameEngine &#123;    private Map&lt;String, Player&gt; players;    private GameState currentState;        public GameEngine() &#123;        this.players = new HashMap&lt;&gt;();        this.currentState = GameState.WAITING;    &#125;        public void addPlayer(String id, String name) &#123;        Player player = new Player(id, name);        players.put(id, player);                if (players.size() &gt;= 2) &#123;            currentState = GameState.READY;        &#125;    &#125;        public List&lt;Player&gt; getTopPlayers(int count) &#123;        return players.values().stream()                .sorted(Comparator.comparingInt(Player::getScore).reversed())                .limit(count)                .collect(Collectors.toList());    &#125;        public Optional&lt;Player&gt; findPlayer(String id) &#123;        return Optional.ofNullable(players.get(id));    &#125;        private enum GameState &#123;        WAITING, READY, PLAYING, FINISHED    &#125;        private static class Player &#123;        private final String id;        private final String name;        private int score;                public Player(String id, String name) &#123;            this.id = id;            this.name = name;            this.score = 0;        &#125;                public int getScore() &#123; return score; &#125;        public void addScore(int points) &#123; this.score += points; &#125;    &#125;&#125;\n\næµ‹è¯•ç»“æœå¦‚æœä½ çœ‹åˆ°ï¼š\n\næ­£ç¡®é«˜äº®ï¼šè¯­æ³•å…³é”®å­—æœ‰é¢œè‰²ï¼Œå­—ç¬¦ä¸²ã€æ³¨é‡Šç­‰æœ‰ä¸åŒé¢œè‰²\næ— é«˜äº®ï¼šæ‰€æœ‰ä»£ç éƒ½æ˜¯åŒä¸€ç§é¢œè‰²\n\nè¯·å‘Šè¯‰æˆ‘å“ªäº›è¯­è¨€æœ‰é«˜äº®é—®é¢˜ï¼Œæˆ‘ä¼šè¿›è¡Œä¿®å¤ã€‚\n","categories":["æŠ€æœ¯"],"tags":["æµ‹è¯•","ä»£ç é«˜äº®"]},{"title":"çŸ­è®°-å¦‚ä½•ä½¿ç”¨ClaudeCode","url":"/2025/07/21/Short%20Note%20-%20How%20to%20Use%20ClaudeCode/","content":"èµ·å› æœ€è¿‘ç»å¸¸å¬åˆ°å…³äº Claude Code ç¼–ç é€Ÿåº¦æ…¢çš„é—®é¢˜ã€‚æœ¬æ–‡å°†ç®€çŸ­è®°å½•ä¸€ä¸‹æˆ‘æ˜¯å¦‚ä½•ä½¿ç”¨ claude codeã€‚\nå…¶ä¸€ï¼Œâ€œå¤šçª—å£â€æ€»ä½“åŠ é€Ÿç»ˆç«¯çš„å¤šçª—å£å…¶å®æ˜¯ä¸€ä¸ªè¢«å¾ˆå¤šäººå¿½ç•¥çš„ä¸œè¥¿ï¼Œå› ä¸ºä»¥å‰éƒ½åœ¨ç¼–è¾‘å™¨å†…åµŒçš„ UI ä¸­è·Ÿ AI å¯¹è¯ã€‚ä¹ æƒ¯äºåœ¨åŒä¸€ä¸ªå¯¹è¯æ¡†ä¸­è¿›è¡Œäº¤æµã€‚ä»¥ä¸‹æ˜¯æˆ‘æ—¥å¸¸å¼€å‘çš„çª—å£æˆ‘å¯¹çª—å£çš„ç†è§£æ˜¯å°†è‡ªå·±ä»£å…¥ä»»åŠ¡åˆ†é…è€…çš„è§†è§’ï¼Œå¦‚æœä¸€ä¸ªçª—å£å·²ç»æœ‰ä»»åŠ¡ï¼Œå¹¶ä¸”æ²¡æ³•å¿«é€Ÿè…¾å‡ºæ—¶é—´ï¼Œé‚£å°±æ–°åŠ çª—å£ã€‚\nå…¶äºŒï¼Œâ€œMCPâ€å•ä¸ªåŠ é€Ÿæˆ‘å¯¹ MCP çš„ç†è§£æ˜¯ AI åœ¨å¯¹è¯ä¸­çš„ä¸Šä¸‹æ–‡è¡¥å…¨ï¼ŒClaude Code å¯¹ MCP çš„è°ƒç”¨ç§¯ææ€§æ˜¯æˆ‘ä½¿ç”¨è¿‡çš„ AI ç¼–ç å·¥å…·ä¸­æœ€ç§¯æçš„ã€‚å¦‚æœä½¿ç”¨åˆé€‚çš„ MCP æ˜¯å¯ä»¥åŠ å¿«å•ä¸ªå¯¹è¯çš„å®Œæˆæ—¶é—´çš„ï¼Œå› ä¸ºå¥½çš„ MCP å¯ä»¥åŠ å¿« AI è·å–ä¸Šä¸‹æ–‡çš„é€Ÿåº¦åˆ—å‡ ä¸ªæˆ‘æ¨èçš„ MCPï¼šyamadashy&#x2F;repomix: ï¼š ç”¨äºé¡¹ç›®åˆå§‹åŒ–ï¼ˆæ¨èï¼‰oraios&#x2F;serenaï¼š å¢å¼º AI å¯¹è¯­è¨€çš„æ“ä½œï¼ˆå¼ºçƒˆæ¨èï¼‰servers&#x2F;src&#x2F;filesystemï¼šæ–‡ä»¶ç›¸å…³æ“ä½œï¼ˆæ¨èï¼‰\næ€»ç»“CLaude Code å¤„ç†ä»»åŠ¡åŸºæœ¬ä¸Šéƒ½æ˜¯åˆ†é’Ÿçº§çš„ï¼Œå¯¹æ¯”å…¶ä»– AI ä»£ç†æ¥è¯´å®ƒçš„é€Ÿåº¦ç¡®å®ä¸æ˜¯ä¼˜åŠ¿ï¼Œä½†æ˜¯æˆ‘ä¾ç„¶ä½¿ç”¨ Claude Code æ˜¯å› ä¸ºå®ƒæ˜¯æˆ‘ä½¿ç”¨ä¸‹æ¥å‡†ç¡®ç‡å’Œä»»åŠ¡å®Œæˆåº¦æœ€é«˜çš„ä¸€ä¸ªå·¥å…·ã€‚\n","categories":["AI"],"tags":["AI"]},{"title":"é‡å­¦C#-ç±»å‹åŸºç¡€-æ‰€æœ‰çš„ç±»å‹éƒ½ä»System.Objectæ´¾ç”Ÿ","url":"/2025/03/16/All_types_derive_from_SystemObject/","content":"æ‰€æœ‰çš„ç±»å‹éƒ½ä» System.Object æ´¾ç”Ÿâ€œè¿è¡Œæ—¶â€è¦æ±‚æ¯ä¸ªç±»å‹æœ€ç»ˆéƒ½ä» System.Object ç±»å‹æ´¾ç”Ÿã€‚ä»¥ä¸‹ä¸¤ä¸ªå®šä¹‰å®Œå…¨ä¸€è‡´\n// éšå¼æ´¾ç”Ÿäº System.Objectclass Employee&#123;    ...&#125;// æ˜¾å¼æ´¾ç”Ÿäº System.Objectclass Employee : System.Object&#123;    ...&#125;\n\nç”±äºæ‰€æœ‰çš„ç±»å‹éƒ½ä» System.Object ä¸­æ´¾ç”Ÿï¼Œæ‰€ä»¥æ¯ä¸ªç±»å‹éƒ½ä¿è¯äº†ä¸€ç»„æœ€åŸºæœ¬çš„æ–¹æ³•ã€‚\n\nå…¬å…±æ–¹æ³•\nEquals\nGetHashCode\nToString\nGetType\n\n\næ”¶åˆ°ä¿æŠ¤æ–¹æ³•\nMemberwiseClose\nFinalizeCLR è¦æ±‚æ‰€æœ‰çš„å¯¹è±¡éƒ½ç”¨ new æ“ä½œç¬¦åˆ›å»º\n\n\n\nEmployee e = new Employee(&quot;Parama&quot;);\n\n new æ“ä½œç¬¦ä¼šåšä»¥ä¸‹äº‹æƒ…\n\nè®¡ç®—ç±»å‹åŠå…¶æ‰€æœ‰çš„åŸºç±»ï¼ˆä¸€ç›´åˆ° System.Objectï¼‰å’Œâ€åŒæ­¥å—ç´¢å¼•â€.\nä»æ‰˜ç®¡å †ä¸­åˆ†é…ç±»å‹æ‰€éœ€è¦çš„å­—èŠ‚æ•°ï¼Œä»è€Œåˆ†é…å¯¹è±¡çš„å†…å­˜ï¼Œåˆ†é…çš„æ‰€æœ‰å­—èŠ‚éƒ½è®¾ä¸º 0\nåˆå§‹åŒ–å¯¹è±¡çš„â€ç±»å‹å¯¹è±¡æŒ‡é’ˆâ€ å’Œ â€œåŒæ­¥å—ç´¢å¼•â€ æˆå‘˜\nè°ƒç”¨ç±»å‹çš„å®ä¾‹æ„é€ å™¨ï¼Œä¼ é€’åœ¨ new  è°ƒç”¨ä¸­æŒ‡å®šçš„å®å‚(ä¸Šè¿°ä¸­çš„ â€œParamaâ€)ï¼Œæ¯ä¸ªç±»å‹çš„æ„é€ å™¨è´Ÿè´£åˆå§‹åŒ–è¯¥ç±»å‹å®šä¹‰çš„å®ä¾‹å­—æ®µï¼Œæœ€ç»ˆè°ƒç”¨ System.Object çš„æ„é€ å™¨(è¯¥æ„é€ å™¨ä»€ä¹ˆéƒ½ä¸åšï¼Œç®€å•çš„è¿”å›)ã€‚new æ‰§è¡Œäº†æ‰€æœ‰æ“ä½œåï¼Œè¿”å›æŒ‡å‘æ–°å»ºå¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨ï¼ˆæˆ–æŒ‡é’ˆï¼‰ã€‚\n\n","categories":["ç¼–ç¨‹"],"tags":["C#"]},{"title":"è½¯æŠ€èƒ½-ä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—_å…¶ä¸€","url":"/2025/05/07/Soft_Skills_Beyond_Code_Chapter_1/","content":"\nä¸ºä»€ä¹ˆè¿™æœ¬ä¹¦ä¸å…¶ä»–è½¯ä»¶ç›¸å…³ä¹¦ç±æˆªç„¶ä¸åŒï¼Ÿ\nå¤šæ•°è½¯ä»¶å¼€å‘çš„ä¹¦ç±éƒ½æ˜¯æœ‰å…³äºä»£ç å¼€å‘æœ¬èº«\næœ¬ä¹¦ä¸»è¦è§£å†³â€œå¦‚ä½•æˆä¸ºä¸€åä¼˜ç§€çš„è½¯ä»¶å¼€å‘è€…â€è¿™ä¸ªé—®é¢˜\næœ¬ä¹¦è®¨è®ºä»€ä¹ˆï¼š\nå…³äºä½ è‡ªå·±\nä½œä¸ºä¸€åè½¯ä»¶å¼€å‘è€…ï¼Œå¦‚ä½•è¶…è¶Šç¼–å†™ä»£ç æœ¬èº«\n\n\næœ¬ä¹¦ä¸è®¨è®ºä»€ä¹ˆï¼š\nä»£ç æœ¬èº«\nä»£ç çš„è´¨é‡\nä»£ç çš„è®¾è®¡\nâ€¦ä½ èƒ½åšä»€ä¹ˆ\n\n\n\nç¯‡ç« \nèŒä¸š\nè‡ªæˆ‘è¥é”€\nå­¦ä¹ \nç”Ÿäº§åŠ›\nç†è´¢\nå¥èº«\nå¿ƒæ€\n\nè®°å¿†ç‚¹æƒ³è¦æˆä¸ºä¼˜ç§€çš„äººæ‰ï¼Ÿéœ€è¦æŠŠé‡ç‚¹æ”¾åœ¨â€œäººâ€èº«ä¸Š\n","categories":["è¯»ä¹¦"],"tags":["è½¯æŠ€èƒ½ä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—"]},{"title":"è½¯æŠ€èƒ½-ä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—_å…¶ä¸‰","url":"/2025/05/25/Soft_Skills_Beyond_Code_Chapter_3/","content":"å­¦ä¼šå¦‚ä½•ä¸äººæ‰“äº¤é“ä½œä¸ºä¸€åè½¯ä»¶å¼€å‘è€…ï¼Œä½ çš„å·¥ä½œå°±æ˜¯ä¸äººæ‰“äº¤é“\næ¯ä¸ªäººéƒ½å¸Œæœ›è‡ªå·±å¾ˆé‡è¦æ¯ä¸ªäººéƒ½å¸Œæœ›è‡ªå·±å¾ˆé‡è¦ï¼Œä¸€æ—¦ä½ è´¬ä½ä»–äººï¼Œå‰Šå¼±ä»–ä»¬çš„æˆå°±æ„Ÿï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šå°±å¦‚åŒåˆ‡æ–­äº†ä»–ä»¬çš„æ°§æ°”è¡¥ç»™ï¼Œè·å¾—çš„å›é¦ˆå°±æ˜¯æ„¤æ€’å’Œæ•Œæ„ã€‚\næˆ‘ä»¬å¸¸å¸¸å®¹æ˜“çŠ¯çš„ä¸€é¡¹é”™è¯¯å°±æ˜¯ï¼Œè½»ç‡åœ°å¦å†³åŒäº‹çš„æƒ³æ³•ï¼Œä»¥ä¾¿äºå¯ä»¥æå‡ºè‡ªå·±çš„æƒ³æ³•ã€‚\næ°¸è¿œä¸è¦æ‰¹è¯„å¥–åŠ±ç§¯æè¡Œä¸ºè¦æ¯”æƒ©ç½šæ¶ˆæè¡Œä¸ºæœ‰æ•ˆå¾—å¤šã€‚\næ¢ä½æ€è€ƒåœæ­¢ç”¨ &lt;æˆ‘&gt; å’Œ &lt;æˆ‘æƒ³è¦ä»€ä¹ˆ&gt; æ¥æ€è€ƒã€‚ä½ å› è¯¥æ€è€ƒå¯¹ä»–äººè€Œè¨€ä»€ä¹ˆæ‰æœ€é‡è¦ï¼Œä»€ä¹ˆæ‰æ˜¯ä»–ä»¬éœ€è¦çš„ã€‚\né¿å…äº‰è®ºå°½ç®¡æˆ‘ä»¬è‡ªå·±ä¸ºè‡ªå·±çš„æ™ºæ…§æ„Ÿåˆ°éª„å‚²ï¼Œä½†æˆ‘ä»¬ä¾ç„¶æ˜¯æƒ…æ„ŸåŠ¨ç‰©ã€‚\nå¦‚æœä½ å› ä¸ºè¯¥åšæŸäº‹ä¸å…¶ä»–äººäº§ç”Ÿåˆ†æ­§ï¼Œé‚£ä¹ˆåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ æœ€å¥½å…ˆç¡®å®šåˆ†æ­§ç‚¹æ˜¯å¦å€¼å¾—ä½ å»æ‹¼å‘½ç»´æŠ¤ï¼Œç‰¹åˆ«æ˜¯ä½ çŸ¥é“ä»–å·²ç»è®©ä»–äººå·å…¥æ—¶ã€‚\nä½ ä¼šå‘ç°ï¼Œå½“ä½ å­¦ä¼šäº†å¦‚ä½•é¿å…äº‰è®ºæ—¶ï¼Œè‡ªå·±çš„ç”Ÿæ´»ä¼šå˜å¾—è½»æ¾å¾ˆå¤šã€‚\næ¨¡å¼æ§åˆ¶æ¯å½“ä½ ä¸å¦å¤–ä¸€ä¸ªäººå¯¹è¯æ—¶ï¼Œä½ çš„æ¨¡å¼å’Œä»–çš„æ¨¡å¼å‘ç”Ÿæ¿€çƒˆçš„äº¤é”‹ï¼Œå…¶ä¸­ä¸€äººä¼šèƒœå‡ºã€‚\næ‰€è°“ä½ çš„æ¨¡å¼å°±æ˜¯ä½ å¦‚ä½•çœ‹å¾…ä¸–ç•Œï¼Œä½ ç›¸ä¿¡ä»€ä¹ˆæ˜¯äº‹å®ï¼›æ‰€è°“ä»–çš„æ¨¡å¼å°±æ˜¯ä»–ä»¬å¯¹ç°å®ä¸–ç•Œçš„æ„ŸçŸ¥\nå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸åŒäººçš„æ¨¡å¼æ˜¯ç›¸äº’å†²çªçš„ï¼Œå…¶ä¸­æœ‰ä¸€ç§æ¨¡å¼ï¼Œå³ä¸»å¯¼æ¨¡å¼ï¼Œå†³å®šäº†å¯¹è¯çš„ä¸»æ—‹å¾‹\nåœ¨ä¸äººæ‰“äº¤é“æ—¶ï¼Œè¦è®¤è¯†åˆ°æ¨¡å¼æ˜¯å­˜åœ¨çš„ï¼Œå¦‚æœä½ èƒ½å¤Ÿæ—¶æ—¶åˆ»åˆ»æŠŠä¸»å¯¼æ¨¡å¼æŠ“åœ¨è‡ªå·±æ‰‹ä¸­ï¼Œé‚£ä½ å°±å¯ä»¥è¯´æœäººä»¬ç›¸ä¿¡ä½ å¯¹ç°å®çš„æ„ŸçŸ¥\nmermaidgraph LR    A[æ¯ä¸ªäººéƒ½å¸Œæœ›è‡ªå·±å¾ˆé‡è¦] --&gt; B[æ°¸è¿œä¸è¦æ‰¹è¯„]    B --&gt; I[å¥–åŠ±ç§¯æè¡Œä¸ºè¦æ¯”æƒ©ç½šæ¶ˆæè¡Œä¸ºæœ‰æ•ˆå¾—å¤š]    A --&gt; C[æ¢ä½æ€è€ƒ]    C --&gt; J[åœæ­¢ç”¨ &lt;æˆ‘&gt; å’Œ &lt;æˆ‘æƒ³è¦ä»€ä¹ˆ&gt; æ¥æ€è€ƒ]    C --&gt; K[ä½ å› è¯¥æ€è€ƒå¯¹ä»–äººè€Œè¨€ä»€ä¹ˆæ‰æœ€é‡è¦ï¼Œä»€ä¹ˆæ‰æ˜¯ä»–ä»¬éœ€è¦çš„ã€‚]    A --&gt; D[é¿å…äº‰è®º]    D --&gt; L[å°½ç®¡æˆ‘ä»¬è‡ªå·±ä¸ºè‡ªå·±çš„æ™ºæ…§æ„Ÿåˆ°éª„å‚²ï¼Œä½†æˆ‘ä»¬ä¾ç„¶æ˜¯æƒ…æ„ŸåŠ¨ç‰©ã€‚]    D --&gt; M[å¦‚æœä½ å› ä¸ºè¯¥åšæŸäº‹ä¸å…¶ä»–äººäº§ç”Ÿåˆ†æ­§ï¼Œé‚£ä¹ˆåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ æœ€å¥½å…ˆç¡®å®šåˆ†æ­§ç‚¹æ˜¯å¦å€¼å¾—ä½ å»æ‹¼å‘½ç»´æŠ¤ï¼Œç‰¹åˆ«æ˜¯ä½ çŸ¥é“ä»–å·²ç»è®©ä»–äººå·å…¥æ—¶ã€‚]    D --&gt; N[ä½ ä¼šå‘ç°ï¼Œå½“ä½ å­¦ä¼šäº†å¦‚ä½•é¿å…äº‰è®ºæ—¶ï¼Œè‡ªå·±çš„ç”Ÿæ´»ä¼šå˜å¾—è½»æ¾å¾ˆå¤šã€‚]    A --&gt; E[æ¨¡å¼æ§åˆ¶]    E --&gt; O[æ¯å½“ä½ ä¸å¦å¤–ä¸€ä¸ªäººå¯¹è¯æ—¶ï¼Œä½ çš„æ¨¡å¼å’Œä»–çš„æ¨¡å¼å‘ç”Ÿæ¿€çƒˆçš„äº¤é”‹ï¼Œå…¶ä¸­ä¸€äººä¼šèƒœå‡ºã€‚]    E --&gt; P[æ‰€è°“ä½ çš„æ¨¡å¼å°±æ˜¯ä½ å¦‚ä½•çœ‹å¾…ä¸–ç•Œï¼Œä½ ç›¸ä¿¡ä»€ä¹ˆæ˜¯äº‹å®ï¼›æ‰€è°“ä»–çš„æ¨¡å¼å°±æ˜¯ä»–ä»¬å¯¹ç°å®ä¸–ç•Œçš„æ„ŸçŸ¥]    E --&gt; Q[å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸åŒäººçš„æ¨¡å¼æ˜¯ç›¸äº’å†²çªçš„ï¼Œå…¶ä¸­æœ‰ä¸€ç§æ¨¡å¼ï¼Œå³ä¸»å¯¼æ¨¡å¼ï¼Œå†³å®šäº†å¯¹è¯çš„ä¸»æ—‹å¾‹]    A --&gt; F[æ¯ä¸ªäººéƒ½å¸Œæœ›è‡ªå·±å¾ˆé‡è¦]    F --&gt; G[æˆ‘ä»¬å¸¸å¸¸å®¹æ˜“çŠ¯çš„ä¸€é¡¹é”™è¯¯å°±æ˜¯ï¼Œè½»ç‡åœ°å¦å†³åŒäº‹çš„æƒ³æ³•]    F --&gt; H[æ¯ä¸ªäººéƒ½å¸Œæœ›è‡ªå·±å¾ˆé‡è¦ï¼Œä¸€æ—¦ä½ è´¬ä½ä»–äººï¼Œå‰Šå¼±ä»–ä»¬çš„æˆå°±æ„Ÿï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šå°±å¦‚åŒåˆ‡æ–­äº†ä»–ä»¬çš„æ°§æ°”è¡¥ç»™ï¼Œè·å¾—çš„å›é¦ˆå°±æ˜¯æ„¤æ€’å’Œæ•Œæ„ã€‚]```\n","categories":["è¯»ä¹¦"],"tags":["è½¯æŠ€èƒ½ä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—"]},{"title":"è½¯æŠ€èƒ½-ä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—-å…¶äºŒ","url":"/2025/05/18/Soft_Skills_Beyond_Code_Chapter_2/","content":"åƒç»è¥ä¼ä¸šä¸€æ ·ï¼Œç»è¥è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯æ‹¥æœ‰å•†ä¸šå¿ƒæ€\nå¤§å¤šæ•°è½¯ä»¶å¼€å‘äººå‘˜å¹¶ä¸èƒ½æŠŠè‡ªå·±çš„è½¯ä»¶å¼€å‘äº‹ä¸šå½“ä½œä¸€æ¡©ç”Ÿæ„æ¥çœ‹å¾…\nä¸ºäº†è°‹ç”Ÿçš„å†™ä»£ç å’Œå¼€ä¸€ä¸ªå°é“ºå­çš„è€æ¿ï¼Œæ²¡æœ‰æœ¬è´¨å·®åˆ«ï¼Œéƒ½æ˜¯å°†è‡ªå·±çš„æœåŠ¡æ¨é”€å‡ºå»\næˆ‘ä»¬ä¸ºå…¬å¸å·¥ä½œï¼Œä½†æ˜¯æŠ€èƒ½å’Œç”Ÿæ„éƒ½è¿˜æ˜¯è‡ªå·±çš„ï¼Œæˆ‘ä»¬éšæ—¶å¯ä»¥æ¢ä¸ªåœ°æ–¹\nå¼€å§‹æŠŠè‡ªå·±å½“ä½œä¸€å®¶ä¼ä¸šå»æ€è€ƒï¼ŒæŠŠé›‡ä¸»å½“ä½œä¸€ä¸ªå®¢æˆ·ï¼Œä»å¼±åŠ¿åœ°ä½è½¬æ¢ä¸ºè‡ªæˆ‘æ²»ç†å’Œè‡ªæˆ‘å¼•å¯¼çš„ä¸»åŠ¨åœ°ä½\nè¿™æ˜¯ä½ èŒä¸šèŒä¸šç”Ÿæ¶¯ä¸­å¿…é¡»è¦åšçš„ç¬¬ä¸€è¦åŠ¡ï¼šè½¬å˜ä½ çš„å¿ƒæ€ï¼Œä»è¢«ä¸€çº¸â€œå–èº«å¥‘â€æŸç¼šä½çš„ä»†äººï¼Œè½¬å˜ä¸ºä¸€ä¸ªæ‹¥æœ‰è‡ªå·±ç”Ÿæ„çš„å•†äººï¼Œå°†æ­¤é“­è®°äºå¿ƒï¼Œå¹¶ç§¯æä¸»åŠ¨åœ°æŒ‚å†œå†è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯\n\nå°†æ€ç»´æ¨¡å¼åˆ‡æ¢ä¸ºâ€ç»è¥ä¼ä¸šâ€å¦‚ä½•ç»è¥ä¼ä¸š\n\næˆ‘ä»¬èƒ½æä¾›ä»€ä¹ˆï¼Ÿè½¯ä»¶å¼€å‘äººå‘˜å”®å–çš„å°±æ˜¯ï¼ŒæŠŠä¸€ä¸ªæƒ³æ³•å˜æˆæ•°å­—åŒ–ç°å®äº§å“çš„èƒ½åŠ›\næˆ‘èƒ½æä¾›çš„æœåŠ¡å’Œå…¶ä»–äººæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ\næ¨å¹¿ï¼Œä»…æœ‰æœåŠ¡æˆ–è€…äº§å“æ˜¯ä¸å¤Ÿçš„ã€‚æƒ³èµšåˆ°é’±ï¼Œä½ å°±å¿…é¡»è®©æ½œåœ¨å®¢æˆ·äº†è§£è¯¥äº§å“æˆ–æœåŠ¡ã€‚\nå¦‚ä½•è§„åˆ’ï¼Ÿ\nä¸“æ³¨äºä½ æ­£åœ¨æä¾›æ€æ ·çš„æœåŠ¡ï¼Œä»¥åŠå¦‚ä½•è¥é”€è¿™é¡¹æœåŠ¡\næƒ³æ–¹è®¾æ³•æå‡ä½ çš„æœåŠ¡\næ€è€ƒä½ å¯ä»¥ä¸“æ³¨ä¸ºå“ªä¸€ç±»ç‰¹å®šç±»å‹çš„å®¢æˆ·æˆ–è€…è¡Œä¸šæä¾›ç‰¹å®šçš„æœåŠ¡\né›†ä¸­ç²¾åŠ›æˆä¸ºä¸€åè½¬è½¬ï¼Œä¸“é—¨ä¸ºæŸä¸€ç§ç‰¹å®šç±»å‹çš„å®¢æˆ·æä¾›ä¸“ä¸šçš„æ•´ä½“æœåŠ¡ã€‚\nåªæœ‰çœŸæ­£ä¸“æ³¨äºä¸€ç±»å®¢æˆ·ï¼Œæ‰èƒ½æ‰¾åˆ°é¡¶å°–çš„å²—ä½\n\n\n\nå¦‚ä½•è®¾å®šèŒä¸šç›®æ ‡æƒ³è±¡ä¸€ä¸‹ä½ ç™»ä¸Šäº†ä¸€è‰˜å³å°†æ¨ªæ¸¡å¤§æµ·çš„èˆ¹åªã€‚ä½ ä¼šåƒå¤§å¤šæ•°äººé‚£æ ·ï¼Œä¸€è·³ä¸Šèˆ¹å°±å‡èµ·é£å¸†ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰é€‰å®šæ˜ç¡®çš„ç›®çš„åœ°ï¼Œä½ å°±æ— æ³•æŒèˆµè®©è¿™è‰˜èˆ¹æœç€ç›®æ ‡æ–¹å‘èˆªè¡Œï¼Œè€Œåªèƒ½åœ¨å¤§æµ·ä¸Šæ¼«æ— ç›®çš„åœ°æ¼‚æµã€‚æˆ–è®¸ä½ çš„èˆ¹èƒ½å¶ç„¶åˆ°è¾¾æŸä¸ªå°å²›æˆ–è€…æŸç‰‡é™†åœ°ï¼Œä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ç¡®å®šè‡ªå·±çš„ç›®çš„åœ°ï¼Œä½ æ°¸è¿œéƒ½ä¸ä¼šå–å¾—å®è´¨æ€§çš„è¿›å±•ã€‚ä¸€æ—¦æ˜ç¡®äº†ç›®çš„åœ°ï¼Œä½ å°±ä¼šå‘ç€ç›®æ ‡å…¨åŠ›ä»¥èµ´ã€‚\nå¦‚ä½•è®¾å®šç›®æ ‡\nè®¾å®šå¤§ç›®æ ‡\nä¸éœ€è¦ç‰¹åˆ«çš„å‡†ç¡®, åªéœ€è¦æœ‰ä¸€ä¸ªå…·ä½“æ¸…æ™°çš„æ–¹å‘å³å¯\nå¿…é¡»è¶³å¤Ÿæ¸…æ™°ï¼Œèƒ½çŸ¥é“è‡ªå·±è·ç¦»å®ƒè¶Šæ¥è¶Šè¿‘ï¼Œè¿˜æ˜¯è¶Šæ¥è¶Šè¿œ\nå‹‡äºåšæ¢¦ï¼Œæƒ³è±¡æˆåŠŸçš„æ ·å­\n\n\nè®¾å®šå°ç›®æ ‡\nä¸€ä¸ªåºå¤§çš„ç›®æ ‡ä¼šè®©äººæ„Ÿåˆ°æ— ä»ä¸‹æ‰‹\nä½ å¯ä»¥æ²¿ç€å°ç›®æ ‡é©±åŠ¨è‡ªå·±å‰è¡Œ\nå¹´åº¦ç›®æ ‡ -&gt; æœˆåº¦ç›®æ ‡ &gt; å‘¨ç›®æ ‡ &gt; æ—¥ç›®æ ‡\nè¾ƒå°çš„ç›®æ ‡å¯ä»¥è®©ä½ çŸ¥é“è‡ªå·±åœ¨æœç€ç›®æ ‡å‰è¿›\n\n\nè¿½è¸ªä½ çš„ç›®æ ‡\nå®šæœŸæ›´æ–°è‡ªå·±è®¾å®šçš„ç›®æ ‡\nç»´æŠ¤è‡ªå·±çš„ç›®æ ‡\nè¿½è¸ªç›®æ ‡çš„è¿›å±•\n\n\n\nmermaid\nåƒç»è¥ä¼ä¸šä¸€æ ·ï¼Œç»è¥è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯\n\nflowchart LR\n   A[\"ç»è¥ä¼ä¸šä¸€æ ·ï¼Œç»è¥è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯\"] --> B[\"æ‹¥æœ‰å•†ä¸šå¿ƒæ€\"]\n   A --> C[\"å°†æ€ç»´æ¨¡å¼åˆ‡æ¢ä¸ºï¼Œç»è¥ä¼ä¸š\"]\n   B --> D[\"å¤§å¤šæ•°è½¯ä»¶å¼€å‘è€…ä¸èƒ½æŠŠè‡ªå·±çš„è½¯ä»¶å¼€å‘äº‹ä¸šå½“ä½œä¸€æ¡©ç”Ÿæ„æ¥çœ‹å¾…\"]\n      B --> E[\"ä¸ºäº†è°‹ç”Ÿçš„å†™ä»£ç å’Œå¼€ä¸€ä¸ªå°é“ºå­çš„è€æ¿ï¼Œæ²¡æœ‰æœ¬è´¨å·®åˆ«ï¼Œéƒ½æ˜¯å°†è‡ªå·±çš„æœåŠ¡æ¨é”€å‡ºå»\"]\n      B --> F[\"æˆ‘ä»¬ä¸ºå…¬å¸å·¥ä½œï¼Œä½†æ˜¯æŠ€èƒ½å’Œç”Ÿæ„éƒ½è¿˜æ˜¯è‡ªå·±çš„ï¼Œæˆ‘ä»¬éšæ—¶å¯ä»¥æ¢ä¸ªåœ°æ–¹\"]\n      B --> G[\"å¼€å§‹æŠŠè‡ªå·±å½“ä½œä¸€å®¶ä¼ä¸šå»æ€è€ƒï¼ŒæŠŠé›‡ä¸»å½“ä½œä¸€ä¸ªå®¢æˆ·ï¼Œä»å¼±åŠ¿åœ°ä½è½¬æ¢ä¸ºè‡ªæˆ‘æ²»ç†å’Œè‡ªæˆ‘å¼•å¯¼çš„ä¸»åŠ¨åœ°ä½\"]\n      B --> H[\"è¿™æ˜¯ä½ èŒä¸šèŒä¸šç”Ÿæ¶¯ä¸­å¿…é¡»è¦åšçš„ç¬¬ä¸€è¦åŠ¡ï¼šè½¬å˜ä½ çš„å¿ƒæ€ï¼Œä»è¢«ä¸€çº¸â€œå–èº«å¥‘â€æŸç¼šä½çš„ä»†äººï¼Œè½¬å˜ä¸ºä¸€ä¸ªæ‹¥æœ‰è‡ªå·±ç”Ÿæ„çš„å•†äººï¼Œå°†æ­¤é“­è®°äºå¿ƒï¼Œå¹¶ç§¯æä¸»åŠ¨åœ°æŒ‚å†œå†è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯\"]\n      C --> I[\"æˆ‘ä»¬èƒ½æä¾›ä»€ä¹ˆï¼Ÿ\"]\n      I --> J[\"è½¯ä»¶å¼€å‘äººå‘˜å”®å–çš„å°±æ˜¯ï¼ŒæŠŠä¸€ä¸ªæƒ³æ³•å˜æˆæ•°å­—åŒ–ç°å®äº§å“çš„èƒ½åŠ›\"]\n      C --> K[\"æˆ‘èƒ½æä¾›çš„æœåŠ¡å’Œå…¶ä»–äººæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ\"]\n      K --> L[\"ä½œä¸ºä¸€åè½¯ä»¶å¼€å‘è€…ï¼Œä½ èƒ½æä¾›çš„æœåŠ¡å’Œå…¶ä»–äººæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ\"]\n      C --> M[\"ä»…æœ‰æœåŠ¡æˆ–è€…äº§å“æ˜¯ä¸å¤Ÿçš„ã€‚æƒ³èµšåˆ°é’±ï¼Œä½ å°±å¿…é¡»è®©æ½œåœ¨å®¢æˆ·äº†è§£è¯¥äº§å“æˆ–æœåŠ¡\"]\n      C --> N[\"å¦‚ä½•è§„åˆ’ï¼Ÿ\"]\n      N --> O[\"ä¸“æ³¨äºä½ æ­£åœ¨æä¾›æ€æ ·çš„æœåŠ¡ï¼Œä»¥åŠå¦‚ä½•è¥é”€è¿™é¡¹æœåŠ¡\"]\n      N --> P[\"æƒ³æ–¹è®¾æ³•æå‡ä½ çš„æœåŠ¡\"]\n      N --> Q[\"æ€è€ƒä½ å¯ä»¥ä¸“æ³¨ä¸ºå“ªä¸€ç±»ç‰¹å®šç±»å‹çš„å®¢æˆ·æˆ–è€…è¡Œä¸šæä¾›ç‰¹å®šçš„æœåŠ¡\"]\n      N --> R[\"é›†ä¸­ç²¾åŠ›æˆä¸ºä¸€åè½¬è½¬ï¼Œä¸“é—¨ä¸ºæŸä¸€ç§ç‰¹å®šç±»å‹çš„å®¢æˆ·æä¾›ä¸“ä¸šçš„æ•´ä½“æœåŠ¡ï¼Œåªæœ‰çœŸæ­£ä¸“æ³¨äºä¸€ç±»å®¢æˆ·ï¼Œæ‰èƒ½æ‰¾åˆ°é¡¶å°–çš„å²—ä½\"]\n      C --> S[\"å¦‚ä½•å®£ä¼ è¿˜è¦æƒ³æƒ³å¦‚ä½•æ›´å¥½åœ°å®£ä¼ ä½ çš„æœåŠ¡ï¼Œå¦‚ä½•æ›´å¥½åœ°æ‰¾åˆ°ä½ çš„å®¢æˆ·ã€‚å¤§å¤šæ•°è½¯ä»¶å¼€å‘äººå‘˜åœ¨å†™å¥½ä¸€ä»½ç®€å†ä¹‹åå°±éšæ„ä¸¢ç»™ä¸€äº›å…¬å¸å’Œæ‹›è˜äººå‘˜ã€‚ä½†æ˜¯ï¼Œå½“ä½ æŠŠèŒä¸šç”Ÿæ¶¯å½“ä½œä¸€å®¶ä¼ä¸šæ—¶ï¼Œä½ çœŸçš„è®¤ä¸ºè¿™å°±æ˜¯ä½ æ‹“å±•æ½œåœ¨å®¢æˆ·çš„æœ€ä½³é€”å¾„æˆ–å”¯ä¸€æ–¹æ³•å—ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚å¤§å¤šæ•°æˆåŠŸçš„å…¬å¸éƒ½ä¼šå¼€å‘å‡ºè®©å®¢æˆ·ä¸»åŠ¨ä¸Šé—¨è´­ä¹°çš„äº§å“æˆ–æœä¸ä¼šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¿½é€å®¢ã€‚\"]\n\nå¦‚ä½•è®¾å®šèŒä¸šç›®æ ‡flowchart LR\n   A[\"å¦‚ä½•è®¾å®šèŒä¸šç›®æ ‡\"] --> B[\"å¦‚æœæ²¡æœ‰ç¡®å®šè‡ªå·±çš„ç›®çš„åœ°ï¼Œä½ å°±æ— æ³•æŒèˆµè®©è¿™è‰˜èˆ¹æœç€ç›®æ ‡æ–¹å‘èˆªè¡Œï¼Œè€Œåªèƒ½åœ¨å¤§æµ·ä¸Šæ¼«æ— ç›®çš„åœ°æ¼‚æµã€‚ä¸€æ—¦æ˜ç¡®äº†ç›®çš„åœ°ï¼Œä½ å°±ä¼šå‘ç€ç›®æ ‡å…¨åŠ›ä»¥èµ´\"]\n   B --> C[\"è®¾å®šå¤§ç›®æ ‡\"]\n   C --> D[\"ä¸éœ€è¦ç‰¹åˆ«çš„å‡†ç¡®, åªéœ€è¦æœ‰ä¸€ä¸ªå…·ä½“æ¸…æ™°çš„æ–¹å‘å³å¯\"]\n   C --> E[\"å¿…é¡»è¶³å¤Ÿæ¸…æ™°ï¼Œèƒ½çŸ¥é“è‡ªå·±è·ç¦»å®ƒè¶Šæ¥è¶Šè¿‘ï¼Œè¿˜æ˜¯è¶Šæ¥è¶Šè¿œ\"]\n   C --> F[\"å‹‡äºåšæ¢¦ï¼Œæƒ³è±¡æˆåŠŸçš„æ ·å­\"]\n   B --> G[\"è®¾å®šå°ç›®æ ‡\"]\n   G --> H[\"ä¸€ä¸ªåºå¤§çš„ç›®æ ‡ä¼šè®©äººæ„Ÿåˆ°æ— ä»ä¸‹æ‰‹\"]\n   G --> I[\"ä½ å¯ä»¥æ²¿ç€å°ç›®æ ‡é©±åŠ¨è‡ªå·±å‰è¡Œ\"]\n   G --> J[\"å¹´åº¦ç›®æ ‡ -> æœˆåº¦ç›®æ ‡ > å‘¨ç›®æ ‡ > æ—¥ç›®æ ‡\"]\n   G --> K[\"è¾ƒå°çš„ç›®æ ‡å¯ä»¥è®©ä½ çŸ¥é“è‡ªå·±åœ¨æœç€ç›®æ ‡å‰è¿›\"]\n   B --> L[\"è¿½è¸ªä½ çš„ç›®æ ‡\"]\n   L --> M[\"å®šæœŸæ›´æ–°è‡ªå·±è®¾å®šçš„ç›®æ ‡\"]\n   L --> N[\"ç»´æŠ¤è‡ªå·±çš„ç›®æ ‡\"]\n   L --> O[\"è¿½è¸ªç›®æ ‡çš„è¿›å±•\"]\n","categories":["è¯»ä¹¦"],"tags":["è½¯æŠ€èƒ½ä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—"]},{"title":"è®°å½•ä¸€ä¸‹æœ€è¿‘é¢è¯•,æ€»ç»“","url":"/2024/08/08/Interview/","content":"æœ€è¿‘è¿™æ®µæ—¶é—´å› ä¸ºé¡¹ç›®æ”¾ç¼“äº†å‡ ä¸ªæ˜ŸæœŸï¼Œå°±å‡ºå»é¢è¯•äº†ä¸‰å®¶å§ï¼Œè¿‡äº†ä¸€å®¶ï¼Œå¯„æ‰ä¸¤å®¶ã€‚æ²¡é¢å¤šå°‘ä½†è¿˜æ˜¯è®°å½•è®°å½•å§ã€‚  \n\nå¯¹è‡ªå·±åšè¿‡çš„åŠŸèƒ½å…¶å®è¿˜ä¸å¤Ÿäº†è§£ã€‚è¿™ä¸ªæ˜¯æœ‰ä¸€å®¶å…¬å¸é¢è¯•é—®äº†è‡ªå·±åšè¿‡çš„ä¸€äº›åŠŸèƒ½ï¼Œç°åœºè·ŸæŠ€æœ¯è¯´æ€ä¹ˆç”¨ MVC æ€æƒ³å¦‚ä½•å»è®¾è®¡ï¼Œæœ‰ä»€ä¹ˆå‡½æ•°ï¼Œæ€æ ·çš„æ•°ç»“æ„ã€‚å…¶å®é—®çš„ä¸ç®—éš¾ï¼Œåªæ˜¯å¾ˆå¤šç»†èŠ‚çš„è€ƒè™‘è€Œå·²ï¼ŒåŠŸèƒ½è‡ªå·±æ˜¯åšè¿‡çš„ï¼Œä½†æ˜¯é¢è¯•æ—¶è¿˜æ˜¯å¾ˆå¤šç‚¹æ²¡è¯´åˆ°ã€‚æ²¡è¯´æ˜ç™½ã€‚å› è¯¥æ˜¯å¯„çš„åŸå› ã€‚\nå¯¹ä¸€äº›åŸç†æ€§çš„ä¸œè¥¿è¿˜ä¸å¤Ÿäº†è§£ï¼Œä¸æ˜ç™½ä¸ºä»€ä¹ˆè¿™ä¹ˆåšã€‚ é¢è¯•é—®é¢˜ï¼šåœ¨UIæ¡†æ¶ç®¡ç†ä¸­ï¼Œç•Œé¢å»¶æ—¶å…³é—­æ˜¯ä¸ºäº†ä»€ä¹ˆï¼Œç•Œé¢é¢‘ç¹åŠ è½½ä¼šå¯¼è‡´ä»€ä¹ˆæ¶ˆè€—ï¼Œä¸ºä»€ä¹ˆä¸èƒ½é¢‘ç¹åŠ è½½ç•Œé¢ã€‚   \nä¼˜åŒ–ç®€å†ï¼Œå­¦ä¼šè¯´è¯ï¼Œå­¦ä¼šè¡¨è¾¾ã€‚\n\n","categories":["éšç¬”"],"tags":["é¢è¯•"]},{"title":"è®°ä¸€æ¬¡ä½è¡€ç³–æ„Ÿå—","url":"/2024/07/18/Low_Blood_Sugar/","content":"èµ·å› èµ·å› æ˜¯å› ä¸ºä¸Šä¸€ä¸ªæ˜ŸæœŸå»æ‹”äº†ä¸€é¢—æ™ºé½¿ï¼Œè¿™å‘¨å°±è¿‡å»æ‹†çº¿äº†ã€‚ç„¶åå› ä¸ºè‚‰é•¿åˆ°çº¿ä¸Šé¢å»äº†ã€‚åŒ»ç”Ÿå°±ç”¨å‰ªåˆ€ï¼Œé•Šå­å’Œé’©å­æ…¢æ…¢æŠŠè‚‰å‰ªå¼€æŠŠçº¿æŒ‘å‡ºæ¥ï¼Œç»™æˆ‘ç–¼å‚»äº†ã€‚\nç»è¿‡å¯èƒ½å› ä¸ºå¤ªç–¼äº†ï¼Œè‡ªå·±ä¸€ç›´ç´§ç»·ç€ã€‚åœ¨ä¸‹æ¤…å­çš„æ—¶å€™å·²ç»å¼€å§‹æ„Ÿè§‰ä¸å¯¹åŠ²äº†ã€‚ç­‰åŒ»ç”Ÿå¼€å®Œè´¦å•åã€‚å°±å‡ºå»åˆ°ç‰™ç§‘é—¨å£çš„æ¤…å­ä¸Šåç€ï¼Œåšåˆ°æ¤…å­ä¸Šæ—¶å€™çœ¼ç›å·²ç»å¼€å§‹çœ‹ä¸æ¸…äº†ã€‚æœ€å¼€å§‹æ˜¯è¶´ç€çš„ï¼Œèƒ½æ„Ÿè§‰åˆ°è‡ªå·±åœ¨æ…¢æ…¢æ¢å¤å’Œå‘æŠ–ï¼Œç„¶åè¿‡äº†ä¸€ä¼šï¼Œçœ¼ç›åˆå¼€å§‹çœ‹æ¸…äº†ï¼Œå°±ä»è¶´ç€åˆ°åç€é ç€åèƒŒï¼Œç„¶åå¤§æ¦‚æ˜¯å› ä¸ºè¡€ç³–ä½å¼•èµ·çš„è¡€å‹ä½ï¼Œä»è¶´ç€åˆ°åç€ä¾›è¡€å¼€å§‹ä¸è¶³ã€‚å¹¸è¿çš„æ˜¯æ—è¾¹çš„å§å§çœ‹åˆ°äº†ï¼Œå«äº†åŒ»ç”Ÿï¼ŒåŒ»ç”Ÿæ‹¿äº†è‘¡è„ç³–å–å®Œä¹‹åå°±å¥½äº†ã€‚\nå·²ç»å¼€å§‹è®°å¿†ä¸æ¸…æ·…äº†ï¼Œè®°å¾—åœ¨å–è‘¡è„ç³–çš„æ—¶å€™åŒ»ç”Ÿé€’ç»™æˆ‘ï¼Œæˆ‘è®°å¾—å½“æ—¶çœ¼ç›æ˜¯çå¼€çš„ï¼Œä½†æ˜¯åªèƒ½çœ‹åˆ°ç™½èŒ«èŒ«ä¸€ç‰‡ã€‚ç–¯ç‹‚çš„æ„Ÿå—è‡ªå·±æµå‡ºçš„å†·æ±—ã€‚\næ„Ÿæƒ³å…¶å®ä¸æ˜¯ç¬¬ä¸€æ¬¡ä½è¡€ç³–ï¼Œå¯¼è‡´çš„è¿™äº›äº†ã€‚ä»¥å‰åœ¨å­¦æ ¡æ™•è¿‡ä¸€æ¬¡ï¼Œè¿˜æœ‰ä¸€æ¬¡åœ¨åœ°é“ç«™ï¼Œåˆšå¥½åœ¨å•†åº—æ—ä¹°äº†ç³–æ°´ã€‚æ‰€ä»¥è¦ä¹ˆæ˜¯æ¯«æ— æ„è¯†ï¼Œè¦ä¹ˆæ˜¯å¿«é€Ÿæ¢å¤äº†ã€‚ç¬¬ä¸€æ¬¡æ„Ÿå—çš„è¿™ä¹ˆè´´åˆ‡ã€‚\nè°¢è°¢åæˆ‘éš”å£çš„å§å§ï¼Œè°¢è°¢åŒ»ç”Ÿã€‚\n","categories":["éšç¬”"],"tags":["è®°å½•"]},{"title":"C#æœ¯è¯­è¡¨","url":"/2026/01/20/CSharp_Glossary_AOT_JIT/","content":"AOTAOT ç¼–è¯‘å™¨ä¹Ÿå°†Â IL ä»£ç ç¿»è¯‘æˆæœºå™¨ä»£ç ã€‚ä½†ä¸ JIT ç¼–è¯‘ä¸åŒçš„æ˜¯ï¼ŒAOT ç¼–è¯‘å‘ç”Ÿåœ¨åº”ç”¨ç¨‹åºæ‰§è¡Œä¹‹å‰ï¼Œé€šå¸¸åœ¨ä¸åŒçš„æœºå™¨ä¸Šè¿›è¡Œã€‚ç”±äº AOT å·¥å…·é“¾ä¸åœ¨è¿è¡Œæ—¶è¿›è¡Œç¼–è¯‘ï¼Œå› æ­¤æ— éœ€æœ€å°åŒ–ç¼–è¯‘æ—¶é—´ï¼Œå¯ä»¥æŠ•å…¥æ›´å¤šæ—¶é—´è¿›è¡Œä¼˜åŒ–ã€‚ç”±äº AOT çš„ä¸Šä¸‹æ–‡æ˜¯æ•´ä¸ªåº”ç”¨ç¨‹åºï¼ŒAOT ç¼–è¯‘å™¨è¿˜ä¼šæ‰§è¡Œè·¨æ¨¡å—é“¾æ¥å’Œå…¨ç¨‹åºåˆ†æï¼Œè¿™æ„å‘³ç€å®ƒä¼šè·Ÿè¸ªæ‰€æœ‰å¼•ç”¨å¹¶ç”Ÿæˆå•ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚\nJITä¸Â AOT ç±»ä¼¼ï¼ŒJIT ç¼–è¯‘å™¨å°†IL ä»£ç ç¿»è¯‘æˆå¤„ç†å™¨èƒ½å¤Ÿç†è§£çš„æœºå™¨ä»£ç ã€‚ä½†ä¸ AOT ä¸åŒçš„æ˜¯ï¼ŒJIT ç¼–è¯‘æ˜¯æŒ‰éœ€è¿›è¡Œçš„ï¼Œå¹¶ä¸”åœ¨ä»£ç è¿è¡Œçš„åŒä¸€å°æœºå™¨ä¸Šæ‰§è¡Œã€‚ç”±äº JIT ç¼–è¯‘å‘ç”Ÿåœ¨åº”ç”¨ç¨‹åºæ‰§è¡ŒæœŸé—´ï¼Œå› æ­¤ç¼–è¯‘æ—¶é—´ä¹ŸåŒ…å«åœ¨è¿è¡Œæ—¶æ—¶é—´ä¸­ã€‚æ‰€ä»¥ï¼ŒJIT ç¼–è¯‘å™¨å¿…é¡»æƒè¡¡ä»£ç ä¼˜åŒ–æ‰€èŠ±è´¹çš„æ—¶é—´ä¸æœ€ç»ˆä»£ç å¸¦æ¥çš„æ€§èƒ½æå‡ã€‚ä½† JIT ç¼–è¯‘å™¨äº†è§£å®é™…çš„ç¡¬ä»¶æƒ…å†µï¼Œå¯ä»¥è®©å¼€å‘äººå‘˜å…äºå‘å¸ƒä¸åŒçš„å®ç°ç‰ˆæœ¬ã€‚\nILä»€ä¹ˆæ˜¯ â€œä¸­é—´è¯­è¨€ï¼ˆILï¼‰â€? å®ƒæ˜¯ç”¨é«˜çº§ .NET è¯­è¨€ç¼–å†™çš„ä»£ç ç¼–è¯‘çš„äº§ç‰©ã€‚ç¼–å†™å…¶ä¸­ä¸€ç§è¯­è¨€ç¼–å†™çš„ä»£ç åï¼Œå°†ä¼šæ”¶åˆ°ä¸€ä¸ªç”± IL ç¼–å†™çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚  \nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒIL ç‹¬ç«‹äºè¿è¡Œåœ¨è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰ä¹‹ä¸Šçš„ä»»ä½•ç‰¹å®šè¯­è¨€ï¼›å®ƒç”šè‡³æ‹¥æœ‰ä¸€å¥—ç‹¬ç«‹çš„è§„èŒƒã€‚ \nä»é«˜çº§ä»£ç ç”Ÿæˆ IL åï¼Œå¦‚æœè¦è¿è¡Œå®ƒï¼ŒCLR ä¼šæ¥ç®¡å·¥ä½œï¼Œå¯åŠ¨å®æ—¶ç¼–è¯‘ï¼ˆJITï¼‰ç¼–è¯‘è¿‡ç¨‹ï¼Œæˆ–è€…å°†ä»£ç ä» IL å®æ—¶ç¼–è¯‘æˆçœŸæ­£å¯ä»¥åœ¨ CPU ä¸Šè¿è¡Œçš„æœºå™¨ç ã€‚è¿™æ ·ï¼ŒCLR å°±èƒ½ç¡®åˆ‡çŸ¥é“ä»£ç çš„ä½œç”¨ï¼Œå¹¶æœ‰æ•ˆç®¡ç†ä»£ç ã€‚\nCLRæ˜¯ä»€ä¹ˆ.Net çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œç±»ä¼¼äº Java çš„ JVM\nåšä»€ä¹ˆ\nJIT ç¼–è¯‘\nå†…å­˜ç®¡ç†\nç±»å‹ç³»ç»Ÿ\nå¼‚å¸¸å¤„ç†\nå®‰å…¨æ ¡éªŒ\n\n\nCLR æœ‰å“ªäº›å®ç°\nCoreClr\nå¾®è½¯å®˜æ–¹çš„ CLR å®ç°\n.Net 6&#x2F;7&#x2F;8&#x2F;9 çš„æ ¸å¿ƒè¿è¡Œæ—¶\n\n\nMono\næ—©æœŸç¬¬ä¸‰æ–¹ CLR å®ç°\nåè¢«å¾®è½¯æ”¶è´­\nç°åœ¨æ˜¯ .Net å®˜æ–¹è¿è¡Œæ—¶ä¹‹ä¸€\n\n\n.Net Framework CLR\nä»…æ”¯æŒ Windows å¹³å°\nä»…ç»´æŠ¤\n\n\n\nMonoMonoæ˜¯ä¸€ä¸ªç”±Xamarinå…¬å¸ï¼ˆå…ˆå‰æ˜¯Novellï¼Œæœ€æ—©ä¸ºXimianï¼‰æ‰€ä¸»æŒçš„è‡ªç”±å¼€æ”¾æºç é¡¹ç›®ã€‚è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ç³»åˆ—ç¬¦åˆECMAæ ‡å‡†ï¼ˆEcma-334[1]å’ŒEcma-335[2]ï¼‰çš„.NETå·¥å…·ï¼ŒåŒ…æ‹¬C #ç¼–è¯‘å™¨å’Œé€šç”¨è¯­è¨€æ¶æ„ ã€‚ä¸å¾®è½¯çš„.NET Frameworkï¼ˆå…±é€šè¯­è¨€æ‰§è¡Œå¹³å°ï¼‰ä¸åŒï¼ŒMonoé¡¹ç›®ä¸ä»…å¯ä»¥è¿è¡ŒäºWindowsç³»ç»Ÿä¸Šï¼Œè¿˜å¯ä»¥è¿è¡ŒäºLinuxã€FreeBSDã€Unixã€OS Xå’ŒSolarisï¼Œç”šè‡³ä¸€äº›æ¸¸æˆå¹³å°  \nMono ç”±å‡ ä¸ªç»„ä»¶ç»„æˆï¼š\nC#ç¼–è¯‘å™¨Â - Mono çš„ C#ç¼–è¯‘å™¨æ”¯æŒ C#1.0ã€2.0ã€3.0ã€4.0ã€5.0 å’Œ 6.0ï¼ˆECMAï¼‰ã€‚å„ç§ç‰ˆæœ¬çš„ C#ç¼–è¯‘å™¨çš„ç‰¹æ€§æè¿°å¯ä»¥åœ¨ç»´åŸºç™¾ç§‘ä¸Šæ‰¾åˆ°ã€‚\nMono RuntimeÂ - è¿è¡Œæ—¶å®ç°äº† ECMA å…±åŒè¯­è¨€åŸºç¡€ç»“æ„ (CLI)ã€‚è¿è¡Œæ—¶æä¾›å³æ—¶ç¼–è¯‘å™¨ã€æå‰ç¼–è¯‘å™¨ (AOT)ã€åº“è£…è½½å™¨ã€åƒåœ¾æ”¶é›†å™¨ã€çº¿ç¨‹ç³»ç»Ÿå’Œäº’æ“ä½œæ€§åŠŸèƒ½ã€‚\n.NET Framework ç±»åº“Â - Mono å¹³å°æä¾›äº†ä¸€ç³»åˆ—å…¨é¢çš„ç±»ï¼Œä¸ºæ„å»ºåº”ç”¨ç¨‹åºæä¾›åšå®çš„åŸºç¡€ã€‚è¿™äº›ç±»ä¸ Microsoft çš„ .NET Framework ç±»ç›¸å®¹ã€‚\nMono Class LibraryÂ - Mono è¿˜æä¾›äº†è®¸å¤šç±»ï¼Œè¿™äº›ç±»è¶…è¶Šäº† Microsoft æä¾›çš„åŸºç±»åº“ã€‚è¿™äº›ç±»æä¾›äº†é¢å¤–çš„æœ‰ç”¨åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯åœ¨æ„å»º Linux åº”ç”¨ç¨‹åºæ—¶ã€‚ä¸€äº›ç¤ºä¾‹åŒ…æ‹¬ Gtk+ã€Zip æ–‡ä»¶ã€LDAPã€OpenGLã€Cairoã€POSIX ç­‰ç±»ã€‚\nè·¨å¹³å° iosiOS å’Œ Mac Catalyst ä¸Šçš„ Mono è§£é‡Šå™¨ - .NET MAUI | Microsoft Learn\nIl2cppä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼ŒIL2CPCPP æ˜¯ Unity å¼•æ“ä¸­çš„ä¸€ä¸ªè„šæœ¬åç«¯é€‰é¡¹ï¼Œè€Œä¸æ˜¯ C# æœ¬èº«çš„ä¸€ä¸ªæœ¯è¯­, å®ƒå·²ç»è„±ç¦»äº† .Net ç”Ÿæ€ã€‚\nIL2CPPï¼ˆä¸­é—´è¯­è¨€åˆ° C++ï¼‰æ˜¯ Unity çš„è‡ªå®šä¹‰ã€æå‰ç¼–è¯‘ï¼ˆAOTï¼‰è„šæœ¬åç«¯ï¼Œæœ€åˆæ˜¯ä¸º iOS ç­‰ä¸æ”¯æŒÂ å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰çš„å¹³å°å¼€å‘çš„ã€‚Â IL2CPPÂ å°† ILï¼ˆÂ ä¸­é—´è¯­è¨€Â ï¼‰è½¬æ¢ä¸º C++ï¼Œå¹¶å°†å…¶ç¼–è¯‘æˆç‰¹å®šäºå¹³å°çš„åŸç”Ÿä»£ç ï¼Œç„¶åä»¥ç›®æ ‡å¹³å°çš„æ ‡å‡†æ ¼å¼æ‰“åŒ…åˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œä¾‹å¦‚Â APKÂ &#x2F;AABã€iOS åº”ç”¨ç¨‹åºåŒ…æˆ– Windows å¯æ‰§è¡Œæ–‡ä»¶å’Œ DLLã€‚\nIL2CPP æ”¯æŒæ‰€æœ‰å¹³å°ï¼Œå¹¶ä¸”å¯ä»¥æä¾›æ¯” Mono è„šæœ¬åç«¯çš„å‡ ä¸ªå¥½å¤„ï¼ŒåŒ…æ‹¬æ€§èƒ½æå‡å’Œå¯åŠ¨æ—¶é—´ç¼©çŸ­ã€‚\n","categories":["ç¼–ç¨‹"],"tags":["C#"]},{"title":"Unity UGUI ä¼˜åŒ–","url":"/2026/01/09/Unity_UI_Optimization_Items/","content":"æœ¬æ–‡ä¸»è¦è®°å½•Unity UGUI å¸¸ç”¨çš„ä¼˜åŒ–é¡¹\nCanvas.SendWillRenderCanvasesæ­¤å‡½æ•°çš„è€—æ—¶ä»£è¡¨çš„æ˜¯ UI å…ƒç´ è‡ªèº«å˜åŒ–å¸¦æ¥çš„æ›´æ–°è€—æ—¶ï¼Œå¯ä»¥ç†è§£ä¸º UI æ›´æ–°çš„è€—æ—¶ã€‚\nè§¦å‘æ¡ä»¶\næ›¿æ¢å›¾ç‰‡\næ–‡æœ¬å˜åŒ–\né¢œè‰²å˜åŒ–UI å…ƒç´ ä½ç§»ã€æ—‹è½¬ã€ç¼©æ”¾æ“ä½œå¹¶ä¸ä¼šå¼•èµ·æ­¤å‡½æ•°\n\nä¼˜åŒ–æ–¹æ¡ˆ\né™ä½é¢‘ç¹æ›´æ–°çš„ UI å…ƒç´ çš„é¢‘ç‡\nå°½é‡è®©å¤æ‚çš„ UI ä¸è¦å‘ç”Ÿå˜åŠ¨\næ§åˆ¶åŠ¨æ€å…ƒç´  Canvas ç½‘æ ¼æ•°é‡\n\nCanvas.BuildBatch &amp; Rendering.EmitWorldScreenspaceCameraGeometryCanvas.BuildBatchæ˜¯åœ¨ä¸»çº¿ç¨‹å‘èµ·UIç½‘æ ¼åˆå¹¶ï¼Œå…·ä½“çš„åˆå¹¶è¿‡ç¨‹æ˜¯åœ¨å­çº¿ç¨‹ä¸­å¤„ç†çš„ï¼Œå½“å­çº¿ç¨‹å‹åŠ›è¿‡å¤§ï¼Œæˆ–è€…åˆå¹¶çš„UIç½‘æ ¼è¿‡äºå¤æ‚çš„æ—¶å€™ï¼Œä¼šåœ¨ä¸»çº¿ç¨‹äº§ç”Ÿç­‰å¾…ï¼Œç­‰å¾…çš„è€—æ—¶ä¼šè¢«ç»Ÿè®¡åˆ°EmitWorldScreenspaceCameraGeometryä¸­ã€‚\nè§¦å‘æ¡ä»¶Canvas.BuildBatchä¸ºUIå…ƒç´ åˆå¹¶çš„Meshéœ€è¦æ”¹å˜æ—¶æ‰€äº§ç”Ÿçš„è°ƒç”¨ã€‚\n\nCanvas.SendWillRenderCanvases()çš„è°ƒç”¨éƒ½ä¼šå¼•èµ·Canvas.BuildBatchçš„è°ƒç”¨ã€‚\nCanvasä¸­çš„UIå…ƒç´ å‘ç”Ÿç§»åŠ¨ä¹Ÿä¼šå¼•èµ·Canvas.BuildBatchçš„è°ƒç”¨ã€‚\n\nä¼˜åŒ–æ–¹æ¡ˆè¿™ä¸¤ä¸ªå‡½æ•°é«˜è€—æ—¶ï¼Œè¯´æ˜é‡å»ºçš„ Canvas éå¸¸å¤æ‚ã€‚\n\nCanvas åŠ¨é™åˆ†ç¦»\né™ä½ç½‘æ ¼å¤æ‚åº¦\n\nCanvasRenderer.SyncTransformè§¦å‘æ¡ä»¶\nTransform ä¿¡æ¯å˜åŒ–ä¾‹å¦‚ï¼šç”»åœ¨å±å¹•ç©ºé—´çš„ Hubï¼Œä¼šè·Ÿéš Player çš„è§†è§’ or ç§»åŠ¨äº§ç”Ÿä½ç§»ï¼›æ­¤æ—¶ä¸€æ¬¡è§¦å‘ Transform ä¿¡æ¯å˜åŒ–çš„ UI å…ƒç´ é‡è¾ƒå¤§ï¼Œå¦‚æœæœ‰æ–‡æœ¬è¿™ç±»ç½‘æ ¼æ•°å¤šçš„å¯¹è±¡æ—¶å¯¹æ€§èƒ½å½±å“è¿˜ä¼šè¿›ä¸€æ­¥å¢å¤§\nè°ƒç”¨ Instantiate å®ä¾‹åŒ–å¯¹è±¡å®ä¾‹åŒ– UI å¯¹è±¡æ—¶ï¼Œä¼šä½¿å¾—è‡ªå·±æœ¬èº«ï¼ŒåŒ Canvas ä¸‹çš„ UI å…ƒç´ ï¼Œçˆ¶ Canvas ä¸‹çš„å…ƒç´ ï¼Œéƒ½è§¦å‘ä¸€æ¬¡ SyncTransform\nè°ƒç”¨ Destroy é”€æ¯å¯¹è±¡å†é”€æ¯å¯¹è±¡æ—¶ï¼Œåªä¼šå½±å“è‡ªå·±åŒ Canvas ä¸‹çš„ UI å…ƒç´ è§¦å‘ä¸€æ¬¡ SyncTransform\nè°ƒç”¨ SetActivity (true) æ¿€æ´» UI å…ƒç´  SetActivity(true) æ¿€æ´» UI å…ƒç´ ï¼Œä¼šä½¿å¾—è‡ªå·±æœ¬èº«ï¼ŒåŒ Canvas ä¸‹çš„ UI å…ƒç´ ï¼Œçˆ¶ Canvas ä¸‹çš„å…ƒç´ ï¼Œéƒ½è§¦å‘ä¸€æ¬¡ SyncTransform SetActivity (false) ä¸ä¼šè§¦å‘\n\nä¼˜åŒ–æ–¹æ¡ˆ\nåŠ¨é™åˆ†ç¦»\nå°†éœ€è¦é¢‘ç¹è¿›è¡Œä¸Šè¿°æ“ä½œçš„ UI å’Œå…¶ä»–çš„ UI å…ƒç´ åˆ†ç¦»åˆ°ä¸åŒçš„åŒçº§ Canvas ä¸‹\nè®¾è®¡åˆç†çš„ Canvas çš„åµŒå¥—ç»“æ„\nä¸­é—´èŠ‚ç‚¹çš„ Canvas ä¸è¦æœ‰å¤æ‚çš„ UI å…ƒç´ ï¼Œå®ä¾‹åŒ–å’Œæ¿€æ´»éƒ½ä¼šå½±å“åˆ°çˆ¶ Canvas\n\nEventSystem.Update\nè§¦å‘è°ƒç”¨è€—æ—¶å‡½æ•°ä¸ºè§¦æ‘¸é‡Šæ”¾æ—¶å€™è§¦å‘ï¼Œè¯¥å‡½æ•°æœ¬èº«æœ‰è¾ƒé«˜çš„ CPU å¼€é”€æ—¶ï¼Œé€šå¸¸æ˜¯å› ä¸ºè°ƒç”¨äº†å…¶ä»–è€—æ—¶å‡½æ•°å¼•èµ·çš„ã€‚å®šä½è€—æ—¶å‡½æ•°ä¼˜åŒ–å³å¯ã€‚å¯ä»¥ä½¿ç”¨ Profiler. BeginSample&#x2F;EndSample, Profiler å¼€å¯ Deep Profiler å®šä½\nè½®è¯¢è€—æ—¶å°½é‡å…³é—­ UI å…ƒç´ çš„ Raycast\n\nUI DrawCall\nåŒä¸€ Canvas ä¸‹çš„ UI å…ƒç´ æ‰èƒ½åˆæ‰¹\nä½¿ç”¨å›¾é›†ï¼Œè®©ä¸åŒ UI å…ƒç´ çš„çš„æè´¨å›¾é›†ä¸€è‡´\nå°½é‡é¿å… UI å±‚çº§ç©¿æ’å¯¼è‡´ UI åˆæ‰¹å¤±è´¥ï¼ˆå¯ä»¥ä½¿ç”¨ Unity -&gt; Analysis -&gt; Frame Debugger æŸ¥çœ‹åˆæ‰¹æƒ…å†µï¼‰\n\n","categories":["Unity"],"tags":["ä¼˜åŒ–ï¼ŒUGUI"]},{"title":"æœ€è¿‘çš„ä¸€äº›äº‹","url":"/2026/01/13/Some_Recent_Things/","content":"æœ‰ä¸€ä¸ªçƒŸé¬¼ï¼Œè‚ºç™Œæ­»äº¡åé‡è§ä¸Šå¸ã€‚æ€’éª‚ä¸Šå¸ï¼šâ€œä½ ä¸ºä»€ä¹ˆä¸æé†’æˆ‘ä¸è¦å¸çƒŸâ€ï¼Œä¸Šå¸è¯´ï¼šâ€œæˆ‘æé†’è¿‡äº†ï¼Œä½ æ²¡å‘ç°æ¯æ¬¡å¸çƒŸçš„æ—¶å€™éƒ½æ‰¾ä¸åˆ°æ‰“ç«æœºå—ï¼Ÿâ€ã€‚\n","categories":["æ‚è°ˆ"],"tags":["æ‚è°ˆ"]}]